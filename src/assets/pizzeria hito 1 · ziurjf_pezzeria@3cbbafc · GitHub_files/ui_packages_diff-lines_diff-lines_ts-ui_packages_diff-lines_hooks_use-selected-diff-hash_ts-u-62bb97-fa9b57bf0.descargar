"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_diff-lines_diff-lines_ts-ui_packages_diff-lines_hooks_use-selected-diff-hash_ts-u-62bb97"],{60281:(e,t,n)=>{n.d(t,{A:()=>i});let i={diff:"Diff-module__diff--GKRfQ",diffTargetable:"Diff-module__diffTargetable--hLfiB",diffHeaderWrapper:"Diff-module__diffHeaderWrapper--J03RC"}},89276:(e,t,n)=>{function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{z:()=>WebWorker});let WebWorker=class WebWorker{set onmessage(e){this.worker.onmessage=e}postMessage(e){this.worker.postMessage(e)}terminate(){this.worker.terminate()}constructor(e,t){i(this,"worker",void 0);try{this.worker=new Worker(`${e}?module=true`,{type:"module"})}catch{console.warn("Web workers are not available. Please enable web workers to benefit from the improved performance."),this.worker=new MainThreadWorker(t)}}};let MainThreadWorker=class MainThreadWorker{async postMessage(e){if(this.terminated)return;let t={data:this.job({data:e})};this.onmessage?.(t)}terminate(){this.terminated=!0}constructor(e){i(this,"terminated",!1),i(this,"onmessage",void 0),this.job=e}}},17264:(e,t,n)=>{function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{N:()=>DebouncedWorkerManager});let DebouncedWorkerManager=class DebouncedWorkerManager{post(e){if(this.debounceOverrideCondition&&this.debounceOverrideCondition(e))return this.delayId&&clearTimeout(this.delayId),this.postNow(e);this.idle()?(this.delayId&&clearTimeout(this.delayId),this.delayId=setTimeout(()=>{this.postNow(e)},this.delayMs)):this.nextRequest=e}postNow(e){this.currentRequest=e,this.worker.postMessage(e)}idle(){return!this.currentRequest}terminate(){this.worker.terminate()}constructor(e,t=200,n){i(this,"currentRequest",void 0),i(this,"nextRequest",void 0),i(this,"onResponse",void 0),i(this,"delayId",void 0),this.worker=e,this.delayMs=t,this.debounceOverrideCondition=n,this.worker.onmessage=({data:e})=>{this.onResponse&&this.onResponse(e),this.nextRequest?(this.postNow(this.nextRequest),this.nextRequest=void 0):this.currentRequest=void 0}}}},81278:(e,t,n)=>{n.d(t,{e:()=>i});function i(e){let t=document.querySelector('#__primerPortalRoot__ div[role="dialog"]'),n=document.querySelector(`#${e} div[role="dialog"]`);(t||n)&&document.dispatchEvent(new KeyboardEvent("keydown",{key:"Escape",code:"Escape",ctrlKey:!0}))}},29943:(e,t,n)=>{n.d(t,{HS:()=>l,Oc:()=>r,Tv:()=>o,Xr:()=>SymbolChangedEvent,f7:()=>a,fD:()=>s,qR:()=>i});let OpenCopilotChatEvent=class OpenCopilotChatEvent extends Event{constructor(e){super("open-copilot-chat",{bubbles:!1,cancelable:!0}),this.payload=e}};Event;let AddCopilotChatReferenceEvent=class AddCopilotChatReferenceEvent extends Event{constructor(e,t=!1,n){super("add-copilot-chat-reference",{bubbles:!1,cancelable:!0}),this.reference=e,this.openPanel=t,this.id=n}};let SymbolChangedEvent=class SymbolChangedEvent extends Event{constructor(e){super("symbol-changed",{bubbles:!1,cancelable:!0}),this.context=e}};function i(e){window.dispatchEvent(new OpenCopilotChatEvent(e))}function r(e,t=!1,n){window.dispatchEvent(new AddCopilotChatReferenceEvent(e,t,n))}function l(e){return window.addEventListener("open-copilot-chat",e),()=>{window.removeEventListener("open-copilot-chat",e)}}function a(e){return window.addEventListener("add-copilot-chat-reference",e),()=>{window.removeEventListener("add-copilot-chat-reference",e)}}function s(e){return window.addEventListener("search-copilot-chat",e),()=>{window.removeEventListener("search-copilot-chat",e)}}function o(e){return window.addEventListener("symbol-changed",e),()=>{window.removeEventListener("symbol-changed",e)}}},99377:(e,t,n)=>{n.d(t,{C6:()=>r,UH:()=>o,Wp:()=>d,hs:()=>a,mF:()=>s,wh:()=>i,xP:()=>l});let i={explain:"explain",conversation:"conversation",suggest:"suggest",discussFileDiff:"discuss-file-diff",explainFileDiff:"explain-file-diff",reviewPr:"review-pull-request",actionsAgent:"actions-agent"},r=["exception","filtered","publicCode","contentTooLarge","rateLimit","agentUnauthorized","agentRequest","networkError","multipleAgentsAttempt"],l=["bing-search","codesearch","semantic-code-search","lexical-code-search","kb-search","getfile","getfilechanges","getdiscussion","get-actions-job-logs","getalert","planskill","get-github-data","support-search","get-figma","codesearchagentskill"],a={Experiments:"experiements",Prompt:"prompt",None:"none"},s={Unlicensed:"unlicensed",LicensedFull:"licensed_full",LicensedLimited:"licensed_limited"},o={IndividualFree:"free",IndividualPro:"pro",IndividualProPlus:"pro_plus",Business:"business",Enterprise:"enterprise"},d="NULL_MESSAGE"},48040:(e,t,n)=>{n.d(t,{B:()=>p,C:()=>g});var i=n(74848),r=n(21728),l=n(34164),a=n(38621),s=n(34614),o=n(16945),d=n(42522),c=n(8895),u=n(24965),f=n(8579);let m={"diff-file-header":"DiffFileHeader-module__diff-file-header--TjXyn",collapsed:"DiffFileHeader-module__collapsed--FPwYM","file-name":"DiffFileHeader-module__file-name--mY1O5"};function h(e){let t,n,l=(0,r.c)(13),{newPath:s,oldPath:o,status:d}=e;l[0]!==s?(t=(0,i.jsxs)(i.Fragment,{children:["\u200E",s]}),l[0]=s,l[1]=t):t=l[1];let c=t;l[2]!==o?(n=(0,i.jsxs)(i.Fragment,{children:["\u200E",o]}),l[2]=o,l[3]=n):n=l[3];let u=n;if("RENAMED"===d){let e,t,n;return l[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(a.ArrowRightIcon,{}),t=(0,i.jsx)("span",{className:"sr-only",children:"renamed to "}),l[4]=e,l[5]=t):(e=l[4],t=l[5]),l[6]!==c||l[7]!==u?(n=(0,i.jsxs)("code",{children:[u," ",e,t,c]}),l[6]=c,l[7]=u,l[8]=n):n=l[8],n}if("DELETED"===d||"REMOVED"===d){let e;return l[9]!==u?(e=(0,i.jsx)("code",{children:u}),l[9]=u,l[10]=e):e=l[10],e}{let e;return l[11]!==c?(e=(0,i.jsx)("code",{children:c}),l[11]=c,l[12]=e):e=l[12],e}}function p(e){let t,n,p,g,x,b,y,v,C,N,j,w,L,S,k,I,D,E,R=(0,r.c)(67),{additionalLeftSideContent:_,areLinesExpanded:A,canExpandOrCollapseLines:T,className:M,diffStatsProps:O,isBinary:P,isSubmodule:$,isCollapsed:F,canToggleRichDiff:U,headingId:H,linesAdded:B,linesChanged:z,linesDeleted:G,fileLinkHref:V,fileLinkRef:W,newMode:K,newPath:q,oldMode:X,oldPath:J,onCopyPath:Y,onHeaderClick:Q,onToggleDiffDisplay:Z,onToggleExpandAllLines:ee,onToggleFileCollapsed:et,patchStatus:en,path:ei,rightSideContent:er,size:el,showRichDiff:ea}=e,es=el&&"-"===el[0],eo=F?m.collapsed:"";R[0]!==M||R[1]!==eo?(t=(0,l.$)(m["diff-file-header"],eo,"flex-wrap flex-sm-nowrap",M),R[0]=M,R[1]=eo,R[2]=t):t=R[2];let ed=F?`Expand file: ${ei}`:`Collapse file: ${ei}`;R[3]!==F?(n=F?(0,i.jsx)(a.ChevronRightIcon,{}):(0,i.jsx)(a.ChevronDownIcon,{}),R[3]=F,R[4]=n):n=R[4],R[5]!==et||R[6]!==ed||R[7]!==n?(p=(0,i.jsx)("button",{onClick:et,className:"Button Button--iconOnly Button--invisible flex-shrink-0 flex-order-1","aria-label":ed,children:n}),R[5]=et,R[6]=ed,R[7]=n,R[8]=p):p=R[8],R[9]===Symbol.for("react.memo_cache_sentinel")?(g=(0,l.$)(m["file-name"]),R[9]=g):g=R[9],R[10]!==q||R[11]!==J||R[12]!==en?(x=(0,i.jsx)(h,{newPath:q,oldPath:J,status:en}),R[10]=q,R[11]=J,R[12]=en,R[13]=x):x=R[13],R[14]!==V||R[15]!==W||R[16]!==Q||R[17]!==x?(b=(0,i.jsx)(s.A,{className:"Link--primary",href:V,onClick:Q,ref:W,children:x}),R[14]=V,R[15]=W,R[16]=Q,R[17]=x,R[18]=b):b=R[18],R[19]!==H||R[20]!==b?(y=(0,i.jsx)("h3",{id:H,className:g,children:b}),R[19]=H,R[20]=b,R[21]=y):y=R[21];let ec=q??J??"";return R[22]===Symbol.for("react.memo_cache_sentinel")?(v={direction:"s"},R[22]=v):v=R[22],R[23]!==Y||R[24]!==ec?(C=(0,i.jsx)(f.T,{className:"ml-1 flex-shrink-0",textToCopy:ec,ariaLabel:"Copy file name to clipboard",tooltipProps:v,onCopy:Y}),R[23]=Y,R[24]=ec,R[25]=C):C=R[25],R[26]!==K||R[27]!==X||R[28]!==en?(N=(0,c.AL)(en,X,K)&&(0,i.jsxs)("div",{className:"p-2",children:[(0,i.jsx)("code",{children:X}),(0,i.jsx)(a.ArrowRightIcon,{className:"mx-1"}),(0,i.jsx)("code",{children:K})]}),R[26]=K,R[27]=X,R[28]=en,R[29]=N):N=R[29],R[30]!==A||R[31]!==T||R[32]!==ee||R[33]!==ei?(j=T&&ee&&(0,i.jsx)(d.m,{text:A?`Collapse non-diff lines: ${ei}`:`Expand all lines: ${ei}`,direction:"s",children:(0,i.jsx)("button",{onClick:ee,className:`Button Button--iconOnly Button--invisible flex-shrink-0 ${A?"":"js-expand-all-difflines-button"}`,"aria-label":A?`Collapse non-diff lines: ${ei}`:`Expand all lines: ${ei}`,"data-file-path":ei,children:A?(0,i.jsx)(a.FoldIcon,{}):(0,i.jsx)(a.UnfoldIcon,{})})}),R[30]=A,R[31]=T,R[32]=ee,R[33]=ei,R[34]=j):j=R[34],R[35]!==C||R[36]!==N||R[37]!==j||R[38]!==y?(w=(0,i.jsxs)("div",{className:"d-flex px-1 flex-items-center overflow-hidden flex-order-2 flex-sm-order-1",children:[y,C,N,j]}),R[35]=C,R[36]=N,R[37]=j,R[38]=y,R[39]=w):w=R[39],R[40]!==O||R[41]!==$||R[42]!==B||R[43]!==z||R[44]!==G?(L=!$&&(0,i.jsx)(u.z,{linesAdded:B,linesDeleted:G,linesChanged:z,...O}),R[40]=O,R[41]=$,R[42]=B,R[43]=z,R[44]=G,R[45]=L):L=R[45],R[46]!==L?(S=(0,i.jsx)("div",{className:"d-flex mr-2 flex-justify-end flex-items-center flex-1",children:L}),R[46]=L,R[47]=S):S=R[47],R[48]!==P||R[49]!==es||R[50]!==el?(k=P&&(0,i.jsx)("div",{className:"d-flex flex-items-center",children:(0,i.jsx)("code",{className:(0,l.$)("px-2",es&&"fgColor-danger",!es&&"fgColor-success"),children:`${el}`})}),R[48]=P,R[49]=es,R[50]=el,R[51]=k):k=R[51],R[52]!==U||R[53]!==Z||R[54]!==ea?(I=U&&(0,i.jsxs)(o.I,{"aria-label":"File view",size:"small",className:"mx-2",onChange:Z?e=>Z(1===e):void 0,children:[(0,i.jsx)(o.I.IconButton,{"aria-label":"Display the source diff",selected:!ea,icon:a.CodeIcon}),(0,i.jsx)(o.I.IconButton,{"aria-label":"Display the rich diff",selected:ea,icon:a.FileIcon})]}),R[52]=U,R[53]=Z,R[54]=ea,R[55]=I):I=R[55],R[56]!==er||R[57]!==S||R[58]!==k||R[59]!==I?(D=(0,i.jsxs)("div",{className:"d-flex flex-row flex-justify-end flex-1 flex-order-1 flex-sm-order-2 flex-items-center",children:[S,k,I,er]}),R[56]=er,R[57]=S,R[58]=k,R[59]=I,R[60]=D):D=R[60],R[61]!==_||R[62]!==w||R[63]!==t||R[64]!==D||R[65]!==p?(E=(0,i.jsxs)("div",{className:t,children:[p,_,w,D]}),R[61]=_,R[62]=w,R[63]=t,R[64]=D,R[65]=p,R[66]=E):E=R[66],E}try{h.displayName||(h.displayName="FileName")}catch{}try{p.displayName||(p.displayName="DiffFileHeader")}catch{}function g(e){let t,n,a=(0,r.c)(6),{children:s,isAddition:o,className:d}=e,c=o?"fgColor-success":"fgColor-danger";return a[0]!==d||a[1]!==c?(t=(0,l.$)("ml-1 text-small text-bold",c,d),a[0]=d,a[1]=c,a[2]=t):t=a[2],a[3]!==s||a[4]!==t?(n=(0,i.jsx)("div",{className:t,children:s}),a[3]=s,a[4]=t,a[5]=n):n=a[5],n}try{g.displayName||(g.displayName="LinesChangedCounterLabel")}catch{}},8895:(e,t,n)=>{function i(e){return void 0!==e.linesChanged&&0!==e.linesChanged}function r(e,t,n){return"MODIFIED"===e&&t!==n}function l(e,t,n,r){return"MODIFIED"===t&&n!==r&&!i(e)}function a(e){return"COPIED"===e.status&&!i(e)}function s(e){return"RENAMED"===e.status&&!i(e)}function o(e){return!!e.oldTreeEntry&&null===e.newTreeEntry}function d(e){return!!e.truncatedReason}n.d(t,{AL:()=>r,HI:()=>d,Jc:()=>a,Sn:()=>l,dK:()=>s,lO:()=>o,l_:()=>f,s8:()=>h,xW:()=>m});let c=["maximum diff size exceeded.","maximum number of lines exceeded."],u=/^maximum file count exceeded/;function f(e){let t=e;return c.includes(e)?t="This diff could not be loaded automatically because of too many other changes.":u.test(e)&&(t="This diff could not be loaded automatically because of too many other files to display."),t}function m(e){return!!e.newTreeEntry?.isGenerated}function h(e){return 0===e.linesChanged}},73435:(e,t,n)=>{n.d(t,{QC:()=>f,s2:()=>m,wH:()=>a,xY:()=>u});var i=n(26940);function r(e,t){var n=function(e,t,n){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t,0);return n.get?n.get.call(e):n.value}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return e<t?-1:+(e>t)}function s(e,t){return a(e.name,t.name)}function o(e,t){return a(e.fileName,t.fileName)}function d(e){return e.diff}let FileNode=class FileNode{constructor(e){this.diff=e,this.filePath=e.path;let t=this.filePath.split("/");this.fileName=t[t.length-1],this.directoryParts=t.slice(0,t.length-1)}};var c=new WeakMap;let DirectoryNode=class DirectoryNode{getOrCreateDirectory(e){let t=r(this,c).get(e);if(!t){let n=this.path?`${this.path}/`:"";t=new DirectoryNode(e,`${n}${e}`),this.directories.push(t),r(this,c).set(e,t)}return t}sort(){for(let e of(this.directories.sort(s),this.files.sort(o),this.directories))e.sort()}getOrderedDiffs(){let e=this.files.map(d);for(let t of this.directories)e.push(...t.getOrderedDiffs());return e}constructor(e,t){l(this,"directories",[]),l(this,"files",[]),function(e,t,n){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.set(e,n)}(this,c,{writable:!0,value:new Map}),this.name=e,this.path=t}};function u(e){let t=new DirectoryNode("","");for(let n of e.map(e=>new FileNode(e))){let e=t;for(let t of n.directoryParts)e=e.getOrCreateDirectory(t);e.files.push(n)}return t.sort(),t}function f(e){let t;t="string"==typeof e?e:e?.newPath||e?.oldPath;let n=t?.lastIndexOf(".");return t?!n||n<0?i.F7:`.${t.substring(n+1)}`:""}function m(e){let t={};return e.map(e=>{let n=f(e.path);void 0!==t[n]?t[n]+=1:t[n]=1}),t}},45985:(e,t,n)=>{n.d(t,{oO:()=>nb,Ao:()=>nx,n$:()=>nN,cP:()=>nw,T5:()=>t5,Uz:()=>c,Wb:()=>ni,Dd:()=>v.Dd,xB:()=>nR});var i=n(74848),r=n(48040),l=n(96540),a=n(11704),s=n(69851),o=n(42083),d=n(63867);function c({dependencyDiffPath:e,fileRendererInfo:t,proseDiffHtml:n,loading:r}){return r?(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:(0,i.jsx)(d.A,{size:"large"})}):n?(0,i.jsx)("div",{className:"prose-diff position-relative",children:(0,i.jsx)(o.oG,{html:n})}):t?(0,i.jsx)(a.default,{...t}):e?(0,i.jsx)(s.x,{src:e,children:(0,i.jsxs)("div",{className:"text-center py-3",children:[(0,i.jsx)(d.A,{size:"medium"}),(0,i.jsx)("p",{className:"color-fg-muted my-2",children:"Loading Dependency Review..."})]})}):(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:"This rich diff is not supported at the moment."})}try{c.displayName||(c.displayName="RichDiff")}catch{}var u=n(8895),f=n(91215),m=n(87591),h=n(34614),p=n(52811),g=n(96679),x=n(46996),b=n(72086);function y({selectedDiffRowRange:e,leftLines:t,rightLines:n,isNumberCell:i}){let r=!!n,{startOrientation:l,endOrientation:a}=e;if(e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation&&!i)return{isRowSelected:()=>!1,selectedRightLines:[],selectedLeftLines:[]};let s=u(l).findIndex(t=>(0,b.a2)(t,e.startLineNumber,e.startOrientation)),o=u(a).findIndex(t=>(0,b.a2)(t,e.endLineNumber,e.endOrientation)),d=s>=0&&o>=0;function c(e){if(!d||(0,b.Po)(e))return!1;let t=u((0,m.XU)(e.type)).indexOf(e);return t>=s&&t<=o}function u(e){var i;return r&&"left"!==("string"==typeof(i=e)?i:(0,m.XU)(i.type))?n:t}let f=u("left").filter(e=>c(e)),h=u("right").filter(e=>c(e));return{isRowSelected:c,selectedRightLines:h,selectedLeftLines:f}}var v=n(67486),C=n(17515);let N=e=>{let t=(0,l.useRef)(e);return(0,C.N)(()=>(t.current=e,()=>t.current=null),[e]),(0,l.useCallback)((...e)=>t.current?.(...e),[])};var j=n(66871);let w=(0,l.createContext)(null);function L(){let e=(0,l.useContext)(w);if(!e)throw Error("useSelectedDiffRowRange must be used within a SelectedDiffRowRangeContext");return e}function S(e){e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation?(0,p.i)(`${"left"===e.startOrientation?"L":"R"}${e.startLineNumber} selected.`):(0,p.i)(`${"left"===e.startOrientation?"L":"R"}${e.startLineNumber} to ${"left"===e.endOrientation?"L":"R"}${e.endLineNumber} selected.`)}function k({children:e}){let t=(0,l.useRef)(new Map),n=N((e,n)=>{if(!e)return;let i=e.diffAnchor,r=t.current.get(i);if(!r)return;let{leftLines:l,rightLines:a}=(0,b.Mk)(r);return y({selectedDiffRowRange:e,leftLines:l,rightLines:a,isNumberCell:n})}),[r,a]=(0,l.useState)(()=>(0,v.ZD)(g.fV.hash)),[s,o]=(0,l.useState)(()=>{if(r){let e=n(r);if(e)return{leftLines:e.selectedLeftLines,rightLines:e.selectedRightLines||[]}}return{leftLines:[],rightLines:[]}}),d=N((e,t)=>{let i=n(e,t),r=i?{leftLines:i.selectedLeftLines,rightLines:i.selectedRightLines||[]}:{leftLines:[],rightLines:[]};(0,x.A)(s,r)||o(r)}),c=N((e,t,n,i,l)=>{if(!t||!n)return;let s=i&&r&&r.diffAnchor===e?t<=r.firstSelectedLineNumber?{...r,startLineNumber:t,startOrientation:n,endLineNumber:r.firstSelectedLineNumber,endOrientation:r.firstSelectedOrientation}:{...r,startLineNumber:r.firstSelectedLineNumber,startOrientation:r.firstSelectedOrientation,endLineNumber:t,endOrientation:n}:{diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:t,startOrientation:n,firstSelectedLineNumber:t,firstSelectedOrientation:n};S(s),(l||i)&&a(s),d(s,l),(0,v.i8)(s)}),u=N(e=>{S(e),a(e),d(e),(0,v.i8)(e)}),f=N(({diffAnchor:e,startGridCell:t,endGridCell:n,focusedGridCell:i})=>{u({diffAnchor:e,endLineNumber:n.lineNumber,endOrientation:n.orientation,firstSelectedLineNumber:i.lineNumber,firstSelectedOrientation:i.orientation,startLineNumber:t.lineNumber,startOrientation:t.orientation})}),m=N(()=>{r&&(a(void 0),d(void 0),(0,p.i)("Selection Cleared"),(0,j.K3)())}),h=N((e,n)=>{t.current.set(e,n),r?.diffAnchor===e&&d(r)}),C=N(e=>t.current.get(e)),L=(0,l.useMemo)(()=>({selectedDiffRowRange:r,updateSelectedDiffRowRange:c,clearSelectedDiffRowRange:m,replaceSelectedDiffRowRange:u,replaceSelectedDiffRowRangeFromGridCells:f,updateDiffLines:h,selectedDiffLines:s,getDiffLinesFromLineRange:n,getDiffLinesByDiffAnchor:C}),[r,c,m,u,f,s,h,n,C]);return(0,i.jsx)(w.Provider,{value:L,children:e})}try{w.displayName||(w.displayName="SelectedDiffRowRangeContext")}catch{}try{k.displayName||(k.displayName="SelectedDiffRowRangeContextProvider")}catch{}var I=n(34164),D=n(55847);let E={gridColumnTemplate:"HiddenDiffPatch-module__gridColumnTemplate--3bEGq"};var R=n(38621);function _({children:e,helpText:t,helpUrl:n,onLoadDiff:r,diffAnchor:a}){let s=n&&t,[o,c]=(0,l.useState)("initial"),u=(0,l.useCallback)(async()=>{try{c("loading"),await r()}catch{c("error")}},[r,c]);return(0,i.jsx)("div",{className:"px-3 py-4 fgColor-muted","data-diff-anchor":a,children:(0,i.jsxs)("div",{className:(0,I.$)(E.gridColumnTemplate),children:[(0,i.jsx)("svg",{"aria-hidden":!0,height:"84",style:{maxWidth:"340px"},viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{clipPath:"url(#diff-placeholder)",d:"M0 0h340v84H0z",fillRule:"evenodd",style:{fill:"var(--bgColor-muted, var(--color-canvas-subtle))"}})})," ",(0,i.jsxs)("div",{className:"d-flex flex-justify-center flex-column flex-column text-center flex-items-center",children:["loading"===o&&(0,i.jsx)(d.A,{size:"medium"}),"error"===o&&(0,i.jsx)(R.AlertIcon,{size:24}),"initial"===o&&(0,i.jsx)(D.Q,{className:"h4 mx-auto fgColor-accent",variant:"invisible",onClick:()=>{u(),c("loading")},children:"Load Diff"}),"error"===o?(0,i.jsxs)("span",{className:"fgColor-muted mt-1",children:["The contents of the file couldn't be loaded."," ",(0,i.jsx)(h.A,{inline:!0,as:"button",onClick:()=>{u(),c("loading")},children:"Retry"})]}):(0,i.jsxs)("span",{className:"fgColor-muted mt-1",children:[e,s&&(0,i.jsx)(h.A,{inline:!0,href:n,children:t})]})]})]})})}try{_.displayName||(_.displayName="HiddenDiffPatch")}catch{}let A={finalLineId:"final-hunk-header-line"};function T(e,t){return e.startBlobLineNumber-t.startBlobLineNumber}function M(e,t){if("HUNK"===e.type&&e.__id===A.finalLineId)return{currentHunk:t[t.length-1],previousHunk:t[t.length-2]};let n=t.sort(T).findIndex(t=>t.startBlobLineNumber<=e.blobLineNumber&&t.endBlobLineNumber>=e.blobLineNumber);return{currentHunk:t[n],nextHunk:t[n+1],previousHunk:t[n-1]}}function O(e){let t,n=[],i=0;for(let r=1;r<e.length;r++){let l=e[r];if(l&&!(0,b.Po)(l)&&(t=l,"HUNK"===l.type)){let t,a=e[i];if(!a||(0,b.Po)(a))continue;let s=r-1;for(;(!t||(0,b.Po)(t))&&(t=e[s],-1!=--s););t&&!(0,b.Po)(t)&&n.push({startBlobLineNumber:a.blobLineNumber,endBlobLineNumber:t.blobLineNumber}),l.__id===A.finalLineId&&n.push({startBlobLineNumber:l.blobLineNumber,endBlobLineNumber:l.blobLineNumber+20}),i=r;continue}}if(t&&"HUNK"!==t.type){let r=e[i];r&&!(0,b.Po)(r)&&n.push({startBlobLineNumber:r.blobLineNumber,endBlobLineNumber:t.blobLineNumber})}return n}let P=(0,l.createContext)(null);function $({children:e,currentHunk:t,diffEntryId:n,diffLine:r,fileAnchor:a,fileLineCount:s,filePath:o,hasHiddenUnicodeCharacters:d,isLeftSide:c,isRowSelected:u=!1,isSplit:f,modifiedLineThreads:m,nextHunk:h,originalLineThreads:p,previousHunk:g,rowId:x,diffContext:b,setInGridMode:y}){let v=(0,l.useMemo)(()=>({currentHunk:t,diffEntryId:n,diffLine:r,fileAnchor:a,fileLineCount:s,filePath:o,hasHiddenUnicodeCharacters:d,isLeftSide:c,isRowSelected:u,isSplit:f,modifiedLineThreads:m,modifiedLineHasThreads:m&&m.length>0,nextHunk:h,originalLineThreads:p,originalLineHasThreads:p&&p.length>0,previousHunk:g,rowId:x,diffContext:b,setInGridMode:y}),[t,n,r,a,s,o,d,c,u,f,m,h,p,g,x,b,y]);return(0,i.jsx)(P.Provider,{value:v,children:e})}function F(){let e=(0,l.useContext)(P);if(!e)throw Error("useDiffLineContext must be used within a DiffLineContextProvider");return e}try{P.displayName||(P.displayName="DiffLineContext")}catch{}try{$.displayName||($.displayName="DiffLineContextProvider")}catch{}function U(e,t){return e?.threads?.flatMap(e=>{let n=e?.id,i=e?.commentsData?.comments?.[0]?.author??t,r=e?.commentsData?.totalCount??0,l=e?.commentsData?.__id;return n&&i?[{id:n,author:i,commentCount:r,commentsConnectionId:l,diffSide:e.diffSide,isOutdated:e.isOutdated,line:e.line,startLine:e.startLine,startDiffSide:e.startDiffSide}]:[]})??[]}var H=n(82678);function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let GridNavigator=class GridNavigator{moveToNextItem(e,t){let n,i=this.cellIdToGridLocation.get(this.focusedGridCell?.cellId??"");if(!i)return;let[r]=i,[,l]=i;switch(("ArrowDown"===e||"ArrowUp"===e)&&this.isHunkRow(r)&&this.savedColumnIndex&&(l=this.savedColumnIndex,this.savedColumnIndex=void 0),!0){case t&&"Home"===e:this.focusFirstGridCell();break;case t&&"End"===e:{let e=this.grid.length-1,t=this.grid[e]?.length;t&&(n=this.grid[e]?.[t-1]);break}case"ArrowUp"===e:this.isHunkRow(r-1)?(this.saveColumnIndex(l),n=this.grid[r-1]?.[0]):n=this.grid[r-1]?.[l];break;case"ArrowDown"===e:this.isHunkRow(r+1)?(this.saveColumnIndex(l),n=this.grid[r+1]?.[0]):n=this.grid[r+1]?.[l];break;case"ArrowLeft"===e:n=this.grid[r]?.[l-1];break;case"ArrowRight"===e:n=this.grid[r]?.[l+1];break;case"PageUp"===e:{this.saveColumnIndex(l);let e=this.getPreviousHunkRowIndex(r);n=this.grid[e]?.[0];break}case"PageDown"===e:{this.saveColumnIndex(l);let e=this.getNextHunkRowIndex(r),t=0;e||(e=this.grid.length-1,t=l),n=this.grid[e]?.[t];break}case"Home"===e:n=this.grid[r]?.[0];break;case"End"===e:{let e=this.grid[r];if(e&&!this.isHunkRow(r)){let t=e.length-1;n=this.grid[r]?.[t]}}}return n&&(this.focusedGridCell=n),this.focusedGridCell}reinitializeGrid(e,t){this.initializeGrid(e,t)}focusFirstGridCell(e){e&&this.cellIdToGridLocation.get(e)?this.focusGridCell(e):this.focusedGridCell=this.grid[0]?.[0]}focusGridCell(e){if(this.focusedGridCell?.cellId===e)return;let t=this.cellIdToGridLocation.get(e);if(!t)return;let[n,i]=t;this.focusedGridCell=this.grid[n]?.[i]}getNextSelectableCell(e){let t,n=this.getValidSelectableRowCell()||this.focusedGridCell,i=this.lastSelectedGridCell||n,r=this.cellIdToGridLocation.get(i?.cellId??"");if(!r)return;let[l,a]=r;if("ArrowUp"===e){let e=l-1;for(;!t&&e>=0;)t=this.getNextSelectableCellFromRow({rowIndex:e,columnIndex:a}),e--}if("ArrowDown"===e){let e=l+1;for(;!t&&e<this.grid.length;)t=this.getNextSelectableCellFromRow({rowIndex:e,columnIndex:a}),e++}return t&&(this.lastSelectedGridCell=t),t}getValidSelectableRowCell(){let e;if(this.focusedGridCell?.isHunk)return;if(!this.focusedGridCell?.isEmpty)return this.focusedGridCell;let t=this.cellIdToGridLocation.get(this.focusedGridCell.cellId)?.[0];if(t)return this.focusedGridCell.columnIndex<=1&&!this.isSplitDiff?this.grid[t]?.[this.focusedGridCell.columnIndex+1]:this.focusedGridCell.columnIndex<2&&this.isSplitDiff?this.grid[t]?.[this.focusedGridCell.columnIndex+2]:this.grid[t]?.[this.focusedGridCell.columnIndex-2]}clearLastSelectedCell(){this.lastSelectedGridCell=void 0}getFirstCodeCell(){let e=this.grid.find(e=>e[0]&&!e[0].isHunk);return e?.find(e=>!e.isEmpty)}getLastCodeCell(){let e=this.grid.slice().reverse().find(e=>e[0]&&!e[0].isHunk);return e?.slice().reverse().find(e=>!e.isEmpty)}hasLine(e,t,n){let i=(0,b.qX)(this.fileAnchor,e,t),r=(0,b.u6)(i,0),l=this.cellIdToGridLocation.get(r);if(!l)return!1;let[a]=l;return!!n===this.isHunkRow(a)}getNextSelectableCellFromRow({rowIndex:e,columnIndex:t}){let n=this.grid[e],i=n?.[t];switch(!0){case i?.isHunk:return;case i?.orientation==="left"&&i.isEmpty:return n?.[t+2];case i?.orientation==="right"&&i.isEmpty&&this.isSplitDiff:return n?.[t-2];case i?.orientation==="right"&&i.isEmpty&&!this.isSplitDiff:return n?.[t+1];default:return n?.[t]}}getNextHunkRowIndex(e){return Array.from(this.hunkRowIndexes).sort((e,t)=>e-t).find(t=>t>e)}getPreviousHunkRowIndex(e){return Array.from(this.hunkRowIndexes).sort((e,t)=>e-t).reverse().find(t=>t<e)??0}initializeGrid(e,t){this.grid=[],this.cellIdToGridLocation=new Map,this.hunkRowIndexes=new Set;for(let n=0;n<e.length;n++){let i=[],r=e[n];if(void 0!==r){if(this.isSplitDiff){let e=(t||[])[n],l=(0,b.qX)(this.fileAnchor,r,e);(0,b.Po)(r)||"HUNK"!==r.type?this.initializeSplitDiffCodeRow({leftLine:r,rightLine:e,row:i,rowIdentifier:l,rowIndex:n}):this.initializeHunkRow(i,l,n)}else{let e=(0,b.qX)(this.fileAnchor,r,r);(0,b.Po)(r)||"HUNK"!==r.type?this.initializeUnifiedDiffCodeRow({diffLine:r,row:i,rowIdentifier:e,rowIndex:n}):this.initializeHunkRow(i,e,n)}this.grid.push(i)}}}initializeContentCell({cellIndex:e,diffLine:t,orientation:n,row:i,rowIdentifier:r,rowIndex:l,isSplit:a}){let s,o,d=(0,b.u6)(r,e);o=!(a||(0,b.Po)(t))&&t?.type==="DELETION"&&1===e||!(a||(0,b.Po)(t))&&t?.type==="ADDITION"&&0===e||(0,b.Po)(t),(0,b.Po)(t)||"left"!==n||(s=t?.left),(0,b.Po)(t)||"right"!==n||(s=t?.right),i.push({lineNumber:s,orientation:n,isEmpty:o,isHunk:!1,cellId:(0,b.u6)(r,e),columnIndex:e}),this.cellIdToGridLocation.set(d,[l,e])}initializeHunkRow(e,t,n){let i=(0,b.u6)(t,0);e.push({isHunk:!0,isEmpty:!1,cellId:i,columnIndex:0}),this.cellIdToGridLocation.set(i,[n,0]),this.hunkRowIndexes.add(n)}isHunkRow(e){return this.hunkRowIndexes.has(e)}initializeSplitDiffCodeRow({leftLine:e,rightLine:t,row:n,rowIdentifier:i,rowIndex:r}){this.initializeContentCell({cellIndex:0,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:r,isSplit:!0}),this.initializeContentCell({cellIndex:1,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:r,isSplit:!0}),this.initializeContentCell({cellIndex:2,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:r,isSplit:!0}),this.initializeContentCell({cellIndex:3,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:r,isSplit:!0})}initializeUnifiedDiffCodeRow({diffLine:e,row:t,rowIdentifier:n,rowIndex:i}){let r=(0,b.Po)(e)||"DELETION"!==e.type?"right":"left";this.initializeContentCell({cellIndex:0,diffLine:e,orientation:"left",row:t,rowIdentifier:n,rowIndex:i,isSplit:!1}),this.initializeContentCell({cellIndex:1,diffLine:e,orientation:"right",row:t,rowIdentifier:n,rowIndex:i,isSplit:!1}),this.initializeContentCell({cellIndex:2,diffLine:e,orientation:r,row:t,rowIdentifier:n,rowIndex:i,isSplit:!1})}saveColumnIndex(e){this.isHunkRow(e)||(this.savedColumnIndex=e)}constructor(e,t,n,i,r){B(this,"grid",[]),B(this,"cellIdToGridLocation",new Map),B(this,"hunkRowIndexes",new Set),B(this,"focusedGridCell",void 0),B(this,"lastSelectedGridCell",void 0),B(this,"savedColumnIndex",void 0),this.fileAnchor=e,this.isSplitDiff=t,this.initializeGrid(n,i),this.focusFirstGridCell(r)}};function z(e){e&&setTimeout(()=>{0!==e.tabIndex&&(e.tabIndex=0)})}var G=n(69676);let V={ArrowLeft:G.z0.ArrowHorizontal,ArrowDown:G.z0.ArrowVertical,ArrowUp:G.z0.ArrowVertical,ArrowRight:G.z0.ArrowHorizontal,h:G.z0.HL,j:G.z0.JK,k:G.z0.JK,l:G.z0.HL,a:G.z0.AD,s:G.z0.WS,w:G.z0.WS,d:G.z0.AD,Tab:G.z0.Tab,Home:G.z0.HomeAndEnd,End:G.z0.HomeAndEnd,PageUp:G.z0.PageUpDown,PageDown:G.z0.PageUpDown,Backspace:G.z0.Backspace},W=G.z0.ArrowAll|G.z0.PageUpDown|G.z0.HomeAndEnd|G.z0.AD,K={ghostUser:{displayName:"Ghost",login:"ghost",avatarUrl:"https://avatars.githubusercontent.com/ghost",path:"/ghost",url:"/ghost"}};function q(e){return e in V&&(V[e]&W)>0}function X({clearSelectedDiffRowRange:e,containerRef:t,fileAnchor:n,isSplitDiff:i,leftLines:r,replaceSelectedDiffRowRangeFromGridCells:a,rightLines:s,disabled:o}){var d;let c=(0,l.useRef)(void 0),u=(0,l.useMemo)(()=>new GridNavigator(n,i,r,s,c.current?.focusedGridCell?.cellId),[n,i,r,s]);(0,l.useEffect)(()=>{c.current=u},[u]),(0,l.useEffect)(()=>{let e=t.current,n=()=>{u.clearLastSelectedCell()};return e?.addEventListener("mousedown",n),()=>e?.removeEventListener("mousedown",n)},[t,u]),d=c.current,(0,l.useEffect)(()=>{if(d&&document.activeElement){let e=function(e,t,n){let i=[];for(let r=0;r<t.length;r++){let l=t[r],a=n?.[r]??l,s=!(0,b.Po)(l)&&l?.type==="HUNK";l&&a&&!e.hasLine(l,a,s)&&i.push(l)}return i}(d,r,s);if(0!==e.length){if(document.activeElement===document.body){let t,i,l,a=r.indexOf(e[e.length-1]),s=r[a+1],o=e[0];s&&!(0,b.Po)(s)&&"HUNK"===s.type&&(t=(0,b.u6)((0,b.qX)(n,s,s),0),i=document.querySelector(`[data-grid-cell-id=${t}]`),l=i?.querySelector("button[data-direction=down], button[data-direction=all]")),l||(t=(0,b.u6)((0,b.qX)(n,o,o),0),i=document.querySelector(`[data-grid-cell-id=${t}]`),l=i?.querySelector("button[data-direction=up], button[data-direction=all]")),t&&i&&(l?l.focus():i.focus(),u.focusGridCell(t),z(i))}else if("BUTTON"===document.activeElement.tagName)z(document.activeElement.closest("td"));else if("TD"===document.activeElement.tagName){let e=document.activeElement.getAttribute("data-grid-cell-id"),n=u.focusedGridCell?.cellId;if(e!==n){let e=t.current?.querySelector(`[data-grid-cell-id=${n}]`);e?.focus()}}}}},[n,r,u,s,d,t]);let f=(0,l.useCallback)(e=>{let t=e.target.getAttribute("data-grid-cell-id");t&&u.focusGridCell(t)},[u]);(0,l.useEffect)(()=>{let e=t.current;return e?.addEventListener("focusin",f),()=>e?.removeEventListener("focusin",f)},[t,f]);let m=(0,l.useCallback)((t,i,r)=>{let l=u.getValidSelectableRowCell();switch(!0){case(r.metaKey||r.ctrlKey)&&"KeyA"===r.code:{let e=u.getFirstCodeCell(),t=u.getLastCodeCell();if(!e||!t)return i;return a({diffAnchor:n,focusedGridCell:e,startGridCell:e,endGridCell:t}),i}case r.shiftKey&&"ArrowDown"===r.key:{let e=u.getNextSelectableCell("ArrowDown");if(!e||!l)return i;return a({diffAnchor:n,focusedGridCell:l,startGridCell:l,endGridCell:e}),i}case r.shiftKey&&"ArrowUp"===r.key:{let e=u.getNextSelectableCell("ArrowUp");if(!e||!l)return i;return a({diffAnchor:n,focusedGridCell:l,startGridCell:e,endGridCell:l}),i}case"ArrowLeft"===r.key&&r.metaKey&&r.shiftKey:return i;default:{let t=u.moveToNextItem(r.key,r.ctrlKey),n=t&&document.querySelector(`[data-grid-cell-id=${t.cellId}]`);return e(),u.clearLastSelectedCell(),n??void 0}}},[u,n,a,e]);return(0,H.G)({containerRef:t,bindKeys:W,getNextFocusable:m,focusableElementFilter:e=>"BUTTON"!==e.tagName&&"TEXTAREA"!==e.tagName,focusInStrategy:"previous",disabled:o},[m]),{gridNavigator:u}}var J=n(54725),Y=n(58655),Q=n(74088),Z=n(87330),ee=n(46839);let et=G.z0.ArrowAll;function en(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}G.z0.ArrowHorizontal,G.z0.ArrowVertical,G.z0.ArrowVertical,G.z0.ArrowHorizontal;let MarkerNavigator=class MarkerNavigator{focusMarker(e){let t=this.markers.findIndex(t=>t.id.toString()===e.toString());-1!==t&&(this.currentMarkerPosition={markerId:e,index:t})}get focusedMarker(){if(this.currentMarkerPosition)return this.markers[this.currentMarkerPosition.index]}moveToFirstComment(e){if(0!==this.markers.length&&!e)return}moveToNextMarker(e,t){let n;if(0===this.markers.length)return;if(t){let e=t.closest("[data-marker-id]"),n=e?.getAttribute("data-marker-id");n&&(this.currentMarkerPosition={markerId:n,index:this.markers.findIndex(e=>e.id.toString()===n.toString())})}if(!this.currentMarkerPosition){let t="ArrowUp"===e?this.markers.length-1:0,n=this.markers[t];if(!n)return;return this.currentMarkerPosition={markerId:n.id,index:t},this.markers[t]}let i=0===this.currentMarkerPosition.index,r=this.currentMarkerPosition.index===this.markers.length-1;switch(e){case"ArrowDown":if(r)return;n=(this.currentMarkerPosition.index+1)%this.markers.length;break;case"ArrowUp":if(i)return;n=(this.currentMarkerPosition.index-1+this.markers.length)%this.markers.length;break;default:return}let l=this.markers[n];if(l)return this.currentMarkerPosition={markerId:l.id,index:n},l}moveToNextMarkerItem(e,t){let n;if(!t||!this.markerComments)return;let i=t.closest("[data-marker-id]"),r=i?.getAttribute("data-marker-id");if(!i||!r)return;let l=this.markerComments[r]||[];if(0===l.length)return;let a=t.getAttribute("data-marker-navigation-comment-id"),s=l.findIndex(e=>e.id===a);if(-1===s)return;let o=s===l.length-1;switch(e){case"ArrowDown":if(o)return;n=s+1;break;case"ArrowUp":if(0===s)return;n=s-1;break;default:return}let d=l[n];if(d)return this.currentMarkerCommentPosition={markerId:d.id,index:n},d}constructor(e,t,n){if(en(this,"markers",void 0),en(this,"markerComments",null),en(this,"currentMarkerPosition",null),en(this,"currentMarkerCommentPosition",null),this.markers=e.map(e=>{let t=e.id;return{...e,id:t}}),this.markerComments=e.reduce((e,t)=>{let n=document.querySelectorAll(`[data-marker-navigation-comment-thread-id="${t.id}"]`);if(n){let i=Array.from(n).map(e=>({id:e.getAttribute("data-marker-navigation-comment-id")}));return{...e,[t.id.toString()]:i}}return e},{}),t&&!n){let e=this.markers.findIndex(e=>e.id.toString()===t.toString());-1!==e&&(this.currentMarkerPosition={markerId:t,index:e})}}};function ei({containerRef:e,markers:t,disabled:n=!1,focusInStrategy:i="previous",selectedMarkerId:r}){let a=(0,l.useRef)(void 0),s=(0,l.useRef)(void 0);(0,l.useEffect)(()=>{s.current=new MarkerNavigator(t,a.current?.focusedMarker?.id||r||void 0),a.current=s.current},[t,r]);let o=(0,l.useCallback)((e,t,n)=>{let i=n.key,r=!t?.hasAttribute("data-marker-id")&&!t?.hasAttribute("data-marker-navigation-comment-id");switch(!0){case r&&("ArrowUp"===i||"ArrowDown"===i||"ArrowRight"===i||"ArrowLeft"===i):return t?.closest("[data-marker-navigation-comment-id]")||t?.closest("[data-marker-id]")||void 0;case"ArrowUp"===i||"ArrowDown"===i:if(s.current&&t?.hasAttribute("data-marker-id")){let e=s.current.moveToNextMarker(i,t);if(e)return document.querySelector(`[data-marker-id="${e.id}"]`)||void 0;return t}if(s.current&&t?.hasAttribute("data-marker-navigation-comment-id")){let e=s.current.moveToNextMarkerItem(i,t);if(e)return document.querySelector(`[data-marker-navigation-comment-id="${e.id}"]`)||void 0}return t;case"ArrowRight"===i:if(t?.hasAttribute("data-marker-navigation-comment-id"))return t;if(t?.hasAttribute("data-marker-id"))return t?.querySelector('[data-first-thread-comment="true"]')||void 0;return t;case"ArrowLeft"===i:if(t?.hasAttribute("data-marker-id"))return t;if(t?.hasAttribute("data-marker-navigation-comment-id"))return t?.closest("[data-marker-id]")||void 0;return t;default:return t??void 0}},[s]);return(0,H.G)({containerRef:e,bindKeys:et,getNextFocusable:o,focusableElementFilter:e=>e.hasAttribute("data-marker-id")||e.hasAttribute("data-marker-navigation-comment-id"),focusInStrategy:i,disabled:n},[o,n]),{markerNavigator:s}}var er=n(55238);let el="a, audio, button, details, embed, iframe, img, input, keygen, label, object, select, textarea, video";function ea(e){for(let t of(e?.setAttribute("aria-hidden","false"),Array.from(e?.querySelectorAll("*")??[])))t?.setAttribute("aria-hidden","false");for(let t of Array.from(e?.querySelectorAll(el)??[]))t.setAttribute("tabindex","0")}function es({commentSubjectType:e,markerRef:t,isThread:n=!1,thread:i}){let{isInDialogMode:r}=(0,Y.q)();(0,l.useEffect)(()=>{let l=null;if(!n||i){if(r)"commit"===e?l=setTimeout(()=>{ea(t.current)},100):ea(t.current);else{var a;a=t.current,a?.setAttribute("aria-hidden","true"),function e(t=0){setTimeout(()=>{let t=Array.from(a?.querySelectorAll("*")??[]),n=Array.from(a?.querySelectorAll(el)??[]);if(0===n.length)return e(200);for(let e of t)e?.setAttribute("aria-hidden","true");for(let e of n)e.setAttribute("tabindex","-1")},t)}()}return()=>{l&&clearTimeout(l)}}},[r,e,t,n,i])}var eo=n(48280);let ed={inlineAnnotation:"InlineAnnotation-module__inlineAnnotation--mNxPj"};function ec({annotation:e,isFirstMarker:t,commentingImplementation:n}){let r=(0,l.useRef)(null),{isInDialogMode:a}=(0,Y.q)();return es({commentSubjectType:n.commentSubjectType,markerRef:r}),(0,i.jsx)("div",{id:`annotation_${e.databaseId}`,ref:r,className:(0,I.$)("border rounded-2 color-border-default color-shadow-small overflow-hidden",t?"mb-1":"mb-2",ed.inlineAnnotation),"data-level":e.annotationLevel,"data-testid":`annotation-${e.id}`,"data-marker-id":`${e.id}`,tabIndex:a?0:-1,children:(0,i.jsx)(eo.Y,{annotation:e})})}try{ec.displayName||(ec.displayName="InlineAnnotation")}catch{}let eu={closeMarkersDialogButton:"InlineMarkers-module__closeMarkersDialogButton--H1wyh",markersWrapper:"InlineMarkers-module__markersWrapper--gRSoz",fileMarkersWrapper:"InlineMarkers-module__fileMarkersWrapper--mJY4f",markersDialogActive:"InlineMarkers-module__markersDialogActive--j6cUe"};var ef=n(70179),em=n(85351),eh=n(75367),ep=n(47139),eg=n(6869),ex=n(42522),eb=n(93116);function ey(){return(0,i.jsx)("div",{className:"position-relative",children:(0,i.jsxs)(eb.E,{border:!0,children:[(0,i.jsx)(eb.E.Visual,{children:(0,i.jsx)(R.AlertIcon,{size:24,className:"fgColor-muted mt-3 mb-3"})}),(0,i.jsx)(eb.E.Heading,{children:(0,i.jsx)("strong",{children:"Comments cannot be loaded right now"})}),(0,i.jsx)("div",{className:"mb-n2",children:(0,i.jsx)(eb.E.Description,{children:"Refresh the page or try again later"})}),(0,i.jsx)(eb.E.SecondaryAction,{href:"https://www.githubstatus.com/",children:"GitHub status"})]})})}try{ey.displayName||(ey.displayName="CommentErrorFallback")}catch{}let ev={inlineReviewThreadHeading:"InlineReviewThread-module__inlineReviewThreadHeading--CroDZ",ReviewThreadContainer:"InlineReviewThread-module__ReviewThreadContainer--WU0Rg",ResolvableContainer:"InlineReviewThread-module__ResolvableContainer--CacB8",ThreadLoading:"InlineReviewThread-module__ThreadLoading--johNO"};var eC=n(83283);function eN({children:e}){return(0,i.jsx)("span",{className:"text-semibold fgColor-default",children:e})}function ej({thread:e}){return void 0!==e&&e?.diffSide&&e.line?e.startLine&&e.startDiffSide?eL({thread:e}):ew({thread:e}):null}function ew({thread:e}){let t="LEFT"===e.diffSide?"L":"R";return(0,i.jsxs)("h2",{className:ev.inlineReviewThreadHeading,children:["Comment on line"," ",(0,i.jsxs)(eN,{children:[t,e.line]})]})}function eL({thread:e}){let t="LEFT"===e.startDiffSide?"L":"R",n="LEFT"===e.diffSide?"L":"R";return(0,i.jsxs)("h2",{className:ev.inlineReviewThreadHeading,children:["Comment on lines"," ",(0,i.jsxs)(eN,{children:[t,e.startLine]})," ","to"," ",(0,i.jsxs)(eN,{children:[n,e.line]})]})}function eS({commentingImplementation:e,fileAnchor:t,filePath:n,threadId:r,threadPositionNumber:a,isOutdated:s,threads:o,threadsConnectionId:c,isFirstThread:u,enterDialogMode:f,ghostUser:m,manuallyUpdateCommentsWithThisThreadId:h,suggestedChangesConfig:p,...g}){let[x,b]=(0,l.useState)(void 0),{fetchThread:y,shouldRefetchThread:v}=e,C=(0,l.useRef)(null),N=(0,em.A)("localStorage"),j=x?.isResolved,[w,L]=(0,l.useState)(""),[S,k]=(0,l.useState)(j??!1);(0,l.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${r}`);null!==e?k(JSON.parse(e)):j&&k(!0)},[j,r]);let D=(0,l.useCallback)(async(e,t=!0)=>{b(await y(e,t))},[y]);(0,l.useEffect)(()=>{D(r,!1)},[D,h,r]),es({commentSubjectType:e.commentSubjectType,markerRef:C,isThread:!0,thread:x}),(0,l.useEffect)(()=>{x||D(r,!1)},[r,x,y,D]);let E=(0,l.useMemo)(()=>{if(t&&x&&x.subject?.startDiffSide&&x.subject?.endDiffSide&&x.subject?.startLine&&x.subject?.endLine&&p?.configureSuggestedChangesFromLineRange){let e=x.subject?.startLine??x?.subject?.endLine,n=x.subject?.startDiffSide??x?.subject?.endDiffSide,i={diffAnchor:t,endLineNumber:x?.subject?.endLine,endOrientation:x.subject?.endDiffSide==="LEFT"?"left":"right",startLineNumber:e,firstSelectedLineNumber:e,firstSelectedOrientation:"LEFT"===n?"left":"right",startOrientation:"LEFT"===n?"left":"right"};return p?.configureSuggestedChangesFromLineRange(i)}},[t,x,p]);(0,l.useEffect)(()=>{x&&v?.(x)&&D(r,!0)},[D,v,x,r,o]);let{sendAnalyticsEvent:_}=(0,eh.s)(),{resolveThread:A,unresolveThread:T,resolvingEnabled:M}=e,O=o.find(e=>e.id===r);if(!x||!(x.commentsData.comments.length>0))return null;let P=!!x.isResolved,$=O?.commentsConnectionId,F=M&&x.commentsData.comments.some(e=>e.state?.toUpperCase()!=="PENDING");return(0,i.jsx)(ef.t,{fallback:(0,i.jsx)(ey,{}),children:(0,i.jsxs)("div",{className:"rounded-2 bgColor-default",ref:C,children:[(0,i.jsxs)("div",{className:(0,I.$)("px-1",ev.ReviewThreadContainer),children:[(0,i.jsx)(Z.K,{"aria-label":S?"Expand comment":"Collapse comment",icon:S?R.ChevronRightIcon:R.ChevronDownIcon,size:"small",variant:"invisible",onClick:()=>{window.requestAnimationFrame(()=>{N.setItem(`reviewThreadIsCollapsed_${r}`,JSON.stringify(!S))}),k(e=>!e)},"data-is-first-collapse-button":u}),(0,i.jsx)(ej,{thread:O}),(0,i.jsxs)("div",{className:ev.ResolvableContainer,children:[P&&(0,i.jsx)(ep.A,{variant:"secondary",children:"Resolved"}),F&&(0,i.jsx)(ex.m,{text:P?"Unresolve conversation":"Resolve conversation",type:"label",direction:"w",id:"resolve-conversation",children:(0,i.jsx)(Z.K,{"aria-labelledby":"resolve-conversation",icon:P?R.CheckCircleFillIcon:R.CheckCircleIcon,sx:{color:P?"var(--fgColor-done, var(--color-done-fg)) !important":void 0},variant:"invisible",onClick:P?()=>{x&&(T({threadId:x.id,onCompleted:()=>{v||D(x.id),k(!1),N.removeItem(`reviewThreadIsCollapsed_${r}`)},onError:()=>{L("Failed to unresolve thread")}}),_("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))}:()=>{x&&(A({threadId:x.id,onCompleted:()=>{v||D(x.id),k(!0),N.removeItem(`reviewThreadIsCollapsed_${r}`)},onError:()=>{L("Failed to resolve thread")}}),_("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))}})})]})]}),(0,i.jsxs)(l.Suspense,{fallback:(0,i.jsxs)("div",{className:ev.ThreadLoading,children:[(0,i.jsx)(d.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),children:[w&&(0,i.jsxs)(eg.A,{variant:"danger",className:"m-2",children:[(0,i.jsx)(R.StopIcon,{className:"mr-2"}),w]}),!S&&(0,i.jsx)(eC.H,{enterDialogMode:f,commentingImplementation:e,commentsConnectionId:$,filePath:n,isInlineComment:!0,onRefreshThread:D,thread:x,threadPositionNumber:a,threadsConnectionId:c,suggestedChangesConfig:E,shouldLimitHeight:!1,...g,ghostUser:m})]})]})})}try{eN.displayName||(eN.displayName="Emphasis")}catch{}try{ej.displayName||(ej.displayName="ThreadBanner")}catch{}try{ew.displayName||(ew.displayName="SingleLineThreadBanner")}catch{}try{eL.displayName||(eL.displayName="MultineLineThreadBanner")}catch{}try{eS.displayName||(eS.displayName="InlineReviewThread")}catch{}let ek={[er.U.Failure]:0,[er.U.Warning]:1,[er.U.Notice]:2};function eI(e){return(0,i.jsx)(ee.j,{children:(0,i.jsx)(eD,{...e})})}function eD({annotations:e,children:t,commentingImplementation:n,conversationListThreads:r,inlineMarkersRef:a,isMarkerListOpen:s,isRowSelected:o,fileAnchor:d,filePath:c,gutterSizeOffset:u,lineType:f,onAnnotationSelected:m,onCloseConversationList:h,onCloseFocusMode:p,onThreadSelected:g,returnFocusRef:x,selectedAnnotationId:y,selectedThreadId:v,threadsConnectionId:C,suggestedChangesConfig:N,manuallyUpdateCommentsWithThisThreadId:j,ghostUser:w,enterDialogMode:L,...S}){let k=(0,l.useCallback)(async e=>{let t=await n.fetchThread(e,!1);t&&r.push(t),E({})},[n,r]),[D,E]=(0,l.useState)({});(0,l.useEffect)(()=>{0===r.length&&j&&""!==j&&k(j)},[n,r.length,k,j]);let{isInDialogMode:_,enableInlineCommentDialogMode:A}=(0,Y.q)(),T=(0,l.useRef)(null),M=(0,l.useMemo)(()=>[...e].sort((e,t)=>ek[e.annotationLevel]-ek[t.annotationLevel]),[e]),O=(0,l.useMemo)(()=>t?[...r,{id:"new-comment"},...M]:[...r,...M],[t,r,M]);return ei({containerRef:T,markers:O,disabled:!_,selectedMarkerId:v}),(0,i.jsxs)("div",{className:(0,I.$)("d-flex pt-1",_?eu.markersDialogActive:""),style:_?{marginRight:`-${u}`,backgroundColor:(0,b.Yf)(f,!0,o)}:{marginRight:`-${u}`},onFocus:()=>{_||A()},"data-inline-markers":!0,ref:a,children:[(0,i.jsxs)("div",{className:eu.markersWrapper,ref:T,children:[r.map((e,t)=>(0,i.jsx)("div",{className:(0,I.$)("mt-1 border rounded-2 color-border-default color-shadow-small",t===O.length-1?"mb-1":"mb-2"),"data-first-marker":0===t,"data-marker-id":`${e.id}`,tabIndex:_?0:-1,children:(0,i.jsx)(eS,{threadPositionNumber:t+1,manuallyUpdateCommentsWithThisThreadId:j,enterDialogMode:L,isFirstThread:0===t,commentingImplementation:n,filePath:c,fileAnchor:d,threadId:e.id,isOutdated:e.isOutdated,threads:r,threadsConnectionId:C,onThreadSelected:g,suggestedChangesConfig:N,ghostUser:w,...S})},`review-thread-${e.id}`)),t,M.map((e,t)=>{let r=0===t&&e===O[0];return(0,i.jsx)(ec,{annotation:e,commentingImplementation:n,isFirstMarker:r},`annotation-${e.id}`)})]}),_&&(0,i.jsx)(Z.K,{icon:R.UndoIcon,className:(0,I.$)(eu.closeMarkersDialogButton,"ml-2 position-relative",0===r.length?"mt-2":"mt-1"),"aria-label":"Return to code","data-exit-dialog-mode-button":"true",variant:"default",size:"small",onMouseUp:p,onKeyDown:e=>{("Enter"===e.key||"Space"===e.code)&&p()}})]})}try{eI.displayName||(eI.displayName="InlineMarkers")}catch{}try{eD.displayName||(eD.displayName="InlineMarkersInternal")}catch{}var eE=n(72847),eR=n(80804),e_=n(89323),eA=n(15385),eT=n(640);function eM({fileAnchor:e}){let{isSplit:t,isLeftSide:n,diffLine:i}=F(),{selectedDiffRowRange:r}=L(),{getDiffSingleLineCode:a,getUnifiedDiffMultiLineCode:s,getSplitDiffMultiLineCode:o}=function(e,t){let{selectedDiffLines:n,getDiffLinesByDiffAnchor:i}=L();return{getUnifiedDiffMultiLineCode:()=>{let n=i(e);if(!n||!t)return"";let{startOrientation:r,endOrientation:l,startLineNumber:a,endLineNumber:s}=t,o=0,d=0;return n.length>1&&(o=n.findIndex(e=>"left"===r?e.left===a:e.right===a),d=n.findIndex(e=>"left"===l?e.left===s:e.right===s)),(0,b.Ls)(n.slice(o,d+1))},getDiffSingleLineCode:(t,n)=>{if(!t||!n)return"";let r=i(e)?.find(e=>"left"===t?e.left===n:e.right===n);return r?(0,b.Ls)([r]):""},getSplitDiffMultiLineCode:e=>void 0===e?"":"left"===e?(0,b.Ls)(n.leftLines):(0,b.Ls)(n.rightLines)}}(e,r);return(0,l.useCallback)(async()=>{let e=window.getSelection();return e&&""!==e.toString()?void document.execCommand("copy"):void 0===r||r?.startOrientation===r?.endOrientation&&r?.startLineNumber===r?.endLineNumber?void await (0,eT.D)(a(n?"left":"right",n?i?.left:i?.right)):t?void await (0,eT.D)(o(n?"left":"right")):void await (0,eT.D)(s())},[r,t,s,a,n,i?.left,i?.right,o])}let eO=(0,l.createContext)(null);function eP({children:e,...t}){let n=!!t.commentingImplementation,r=!!t.markerNavigationImplementation;if(t.commentingEnabled!==n&&t.commentingEnabled!==r)throw Error("commentingEnabled, commentingImplementation, and markerNavigationImplementation must be passed together");let a=t?.ghostUser??K.ghostUser,s=(0,l.useMemo)(()=>({ghostUser:a,...t}),[...Object.values(t),a]);return(0,i.jsx)(eO.Provider,{value:s,children:e})}function e$(){let e=(0,l.useContext)(eO);if(!e)throw Error("useDiffContext must be used within a DiffContextProvider");return e}try{eO.displayName||(eO.displayName="DiffContext")}catch{}try{eP.displayName||(eP.displayName="DiffContextProvider")}catch{}var eF=n(81278);function eU(e){return null!=e}let eH="thread",eB="annotation",ez=(0,l.createContext)(null);function eG({children:e,line:t}){let[n,r]=(0,l.useState)(!1),[a,s]=(0,l.useState)(),[o,d]=(0,l.useState)(),[c,u]=(0,l.useState)(),[f,m]=(0,l.useState)(),[h,p]=(0,l.useState)(),{ghostUser:g,markerNavigationImplementation:x}=e$(),{originalLineThreads:b,modifiedLineThreads:y}=F(),[v,C]=(0,l.useState)(),N=eW({line:t,side:v,originalLineThreads:b,modifiedLineThreads:y,ghostUser:g}),j=(0,l.useMemo)(()=>!!a||!!o||!!c||!!f,[a,c,o,f]),w=(0,l.useCallback)(()=>{r(!0)},[]),L=(0,l.useCallback)(()=>{r(!1)},[]),S=(0,l.useCallback)(e=>{e?p({id:e,kind:eH}):p(void 0)},[]),k=h?.kind===eH?h.id:void 0,I=h?.kind===eB?h.id:void 0,D=(0,l.useCallback)(e=>{e?p({id:e,kind:eB}):p(void 0)},[]),E=(0,l.useCallback)((e,t,n)=>{switch((0,eF.e)(x?.overlayPortalContainerName),e){case"context-menu":s(t),m(void 0),u(void 0),d(void 0);break;case"new-conversation":m({cellId:t,withSuggestedChange:n?.withSuggestedChange}),s(void 0),u(void 0),d(void 0);break;case"marker-details":u(t),s(void 0),d(void 0),m(void 0);break;case"marker-list":d(t),s(void 0),m(void 0),u(void 0)}},[x?.overlayPortalContainerName]),R=(0,l.useCallback)(e=>{switch(e){case"context-menu":s(void 0);break;case"new-conversation":m(void 0);break;case"marker-details":u(void 0);break;case"marker-list":d(void 0)}},[]),_=(0,l.useCallback)(e=>(C(e),eW({line:t,side:e,modifiedLineThreads:y,originalLineThreads:b,ghostUser:g})),[t,y,b,g]),A=(0,l.useMemo)(()=>t.annotationsData?.annotations?.filter(eU)??[],[t.annotationsData?.annotations]),T=(0,l.useMemo)(()=>({annotations:A,isActionBarVisible:n,showActionBar:w,hideActionBar:L,selectThreadId:S,selectAnnotationId:D,closeDialog:R,openDialog:E,anyMenuOpen:j,selectedThreadId:k,selectedAnnotationId:I,openContextMenuCell:a,openMarkersListCell:o,openMarkerDetailsCell:c,openNewConversationCell:f,threads:N,updateVisibleThreads:_}),[A,n,w,L,S,D,R,E,j,k,I,a,o,c,f,N,_]);return(0,i.jsx)(ez.Provider,{value:T,children:e})}function eV(){let e=(0,l.useContext)(ez);if(!e)throw Error("useMarkersDialogContext must be used within a MarkersDialogContextProvider");return e}function eW({line:e,side:t,originalLineThreads:n,modifiedLineThreads:i,ghostUser:r}){switch(t){case"LEFT":return n||[];case"RIGHT":return i||[];case void 0:return U(e.threadsData,r);default:return[]}}try{ez.displayName||(ez.displayName="MarkersDialogContext")}catch{}try{eG.displayName||(eG.displayName="MarkersDialogContextProvider")}catch{}function eK({cellId:e,actionBarRef:t,onOpenInLineThread:n}){let{replaceSelectedDiffRowRange:i}=L(),{fileAnchor:r}=F(),[a,s]=(0,l.useState)(t),{annotations:o,openDialog:d,closeDialog:c,selectedAnnotationId:u,selectAnnotationId:f,selectedThreadId:m,selectThreadId:h,openContextMenuCell:p,openNewConversationCell:g,openMarkerDetailsCell:x,threads:b,anyMenuOpen:y}=eV(),{sendAnalyticsEvent:v}=(0,eh.s)(),C=(0,l.useMemo)(()=>g?.cellId===e,[e,g]),j=(0,l.useMemo)(()=>g?.withSuggestedChange,[g]),w=(0,l.useCallback)(t=>{n?.(),d("new-conversation",e,t)},[e,n,d]),S=(0,l.useCallback)(()=>{w()},[w]),k=(0,l.useCallback)(()=>{w({withSuggestedChange:!0}),v("diff.start_new_conversation_with_suggested_change","CELL_CONTEXT_MENU")},[w,v]),I=(0,l.useCallback)(()=>{c("new-conversation")},[c]),D=(0,l.useMemo)(()=>p===e,[e,p]),E=(0,l.useCallback)(()=>{d("context-menu",e)},[e,d]),R=(0,l.useCallback)(()=>{s(t),E()},[t,E]),_=(0,l.useCallback)(()=>{c("context-menu")},[c]),A=(0,l.useCallback)(()=>{D?_():E()},[_,D,E]),T=(0,l.useCallback)(()=>{s(t),A()},[t,A]),M=(0,l.useMemo)(()=>x===e?m:void 0,[e,x,m]),O=(0,l.useMemo)(()=>x===e?u:void 0,[e,x,u]),P=(0,l.useCallback)(()=>{n?.()},[n]),$=N((e,t={skipLineSelection:!1})=>{if(h(e),P(),t.skipLineSelection)return;let n=b.find(t=>t.id===e);if(n&&n.diffSide&&n.line){let e=n.startLine??n.line,t=n.startDiffSide??n.diffSide;i({diffAnchor:r,endLineNumber:n.line,endOrientation:"LEFT"===n.diffSide?"left":"right",startLineNumber:e,startOrientation:"LEFT"===t?"left":"right",firstSelectedLineNumber:e,firstSelectedOrientation:"LEFT"===t?"left":"right"})}});return{isNewConversationDialogOpen:C,startNewConversation:S,closeNewConversation:I,startNewConversationWithSuggestedChange:k,shouldStartNewConversationWithSuggestedChange:j,isContextMenuOpen:D,openContextMenu:E,openContextMenuFromActionBar:R,closeContextMenu:_,toggleContextMenu:A,toggleContextMenuFromActionBar:T,optimizedSelectedThreadId:M,optimizedSelectedAnnotationId:O,selectThread:$,selectAnnotation:N((e,t={skipLineSelection:!1})=>{if(f(e),P(),t.skipLineSelection)return;let n=o.find(t=>t.id===e);n&&i({diffAnchor:r,endLineNumber:n.endLine,endOrientation:"right",startLineNumber:n.startLine,startOrientation:"right",firstSelectedLineNumber:n.startLine,firstSelectedOrientation:"right"})}),openMarkersDialog:P,closeMarkerListDialog:(0,l.useCallback)(()=>{c("marker-list")},[c]),annotations:o,returnFocusRef:a,threads:b,anyMenuOpen:y}}function eq({cellRef:e}){let{showActionBar:t,hideActionBar:n,anyMenuOpen:i}=eV(),[r,a]=(0,l.useState)(!1),s=(0,l.useCallback)(()=>{t()},[t]),o=(0,l.useCallback)(t=>{!i&&(e.current&&e.current.contains(t.relatedTarget)||n())},[i,e,n]),d=(0,l.useCallback)(()=>{t()},[t]),c=(0,l.useCallback)(()=>{!i&&(e.current===document.activeElement||e.current?.contains(document.activeElement)||n())},[i,e,n]),u=(0,l.useCallback)(t=>{e.current&&(i||(e.current.contains(t.relatedTarget)?e.current===t.relatedTarget&&a(!1):(n(),a(!1))))},[i,e,n]);return{isActionBarFocused:r,handleCellBlur:o,handleCellFocus:s,handleCellMouseEnter:d,handleCellMouseLeave:c,handleActionBarBlur:u,handleActionBarFocusCapture:(0,l.useCallback)(e=>{i||(e.stopPropagation(),a(!0))},[i]),handleActionBarKeydownCapture:(0,l.useCallback)(e=>{!i&&q(e.key)&&e.stopPropagation()},[i])}}n(43032);var eX=n(64515),eJ=n(91321),eY=n(39459),eQ=n(46008),eZ=n(27455);let e0={commentIndicatorContainer:"CommentIndicator-module__commentIndicatorContainer--L8lU3",AvatarStack:"CommentIndicator-module__AvatarStack--jMN2F",Compact:"CommentIndicator-module__Compact--SQwGN",Relaxed:"CommentIndicator-module__Relaxed--DWkA5",textStyles:"CommentIndicator-module__textStyles--ahQJa"},e1={compact:{avatarSize:18},relaxed:{avatarSize:20}};function e2({shouldAnimateRef:e,lineSpacingPreference:t="relaxed"}){let{diffLine:n}=F(),{ghostUser:r}=e$();(0,l.useEffect)(()=>{e?.current&&(e.current=!1)},[e]);let{avatarSize:a}=e1[t],s=(n.threadsData?.totalCommentsCount||0)+(n.annotationsData?.totalCount||0);if(0===s)return null;let o={},d=[];n.annotationsData?.annotations?.map(e=>{e?.annotationLevel&&d.push({id:e.id,level:e.annotationLevel})}),n.threadsData?.threads?.map(e=>e?.commentsData?.comments?.map(e=>{e?.author?o[e?.author.login]=e.author:r?.login&&(o[r.login]=r)}));let c=[...d.sort((e,t)=>(eZ.GF[e.level]?.priority||0)<(eZ.GF[t.level]?.priority||0)?-1:1).map(t=>e?.current?(0,i.jsx)(eZ.S,{annotationLevel:t.level},t.id):(0,i.jsx)(eZ.Xh,{annotationLevel:t.level},t.id)),...Object.keys(o).map(e=>{let t=o[e]?.login,n=o[e]?.avatarUrl??(r?.avatarUrl||" ");return(0,i.jsx)(eY.r,{alt:t,size:20,src:n},t)})].slice(0,3),u=s>9?"9+":`${s}`;return(0,i.jsxs)("div",{className:(0,I.$)("d-flex","flex-justify-between","flex-items-center",e0.commentIndicatorContainer),children:[(0,i.jsx)(eQ.A,{disableExpand:!0,size:a,className:(0,I.$)(e0.AvatarStack,"relaxed"===t?e0.Relaxed:e0.Compact),children:c}),(0,i.jsx)("span",{className:(0,I.$)("fgColor-default","ml-1",e0.textStyles),children:u})]})}try{e2.displayName||(e2.displayName="CommentIndicator")}catch{}var e3=n(6698),e4=n(64979),e6=n(10048);let e8=({fileDiffReference:e,selectedRange:t,showDivider:n})=>{let r=(0,l.useMemo)(()=>{let n={...e};return t&&(n.selectedRange={start:`${t?.startOrientation[0]?.toUpperCase()??""}${t?.startLineNumber}`,end:`${t?.endOrientation[0]?.toUpperCase()??""}${t?.endLineNumber}`}),n},[e,t]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(e_.W,{children:[(0,i.jsx)(e_.W.Anchor,{children:(0,i.jsxs)(eA.l.Item,{children:[(0,i.jsx)(eA.l.LeadingVisual,{children:(0,i.jsx)(R.CopilotIcon,{})}),"Copilot"]})}),(0,i.jsx)(e_.W.Overlay,{children:(0,i.jsxs)(eA.l,{children:[(0,i.jsx)(e4.t,{fileDiffReference:r,eventContext:{prx:!0}}),(0,i.jsx)(e6.e,{fileDiffReference:r,eventContext:{prx:!0}}),(0,i.jsx)(e3.i,{fileDiffReference:r,eventContext:{prx:!0}})]})})]}),n&&(0,i.jsx)(eA.l.Divider,{})]})};try{e8.displayName||(e8.displayName="CopilotDiffChatContextMenu")}catch{}function e5(){let{nextHunk:e,currentHunk:t,previousHunk:n}=F(),{addInjectedContextLines:i}=e$(),r=!!t&&0!==t.startBlobLineNumber,l=!!t&&!!e;return{expandStartOfHunk:()=>{r&&t&&i({start:Math.max(0,t.startBlobLineNumber-20),end:t.startBlobLineNumber})},expandEndOfHunk:()=>{l&&t&&i({start:t.endBlobLineNumber+1,end:t.endBlobLineNumber+1+20})},expandEndOfPreviousHunk:()=>{n&&i({start:n.endBlobLineNumber+1,end:n.endBlobLineNumber+1+20})},canExpandEndOfHunk:l,canExpandStartOfHunk:r}}var e9=n(96339);let e7={left:"L",right:"R"},te="Add comment",tt="Suggest change";function tn(e,t,n){let i=n&&!(0,b.Ji)(t)?e7.left:e7.right;return`${e} on line ${i}${t.blobLineNumber}`}function ti({handleStartConversationWithSuggestedChange:e,handleStartConversation:t}){let n,r,a,{selectedDiffRowRange:s,selectedDiffLines:o,replaceSelectedDiffRowRange:d}=L(),{commentingEnabled:c}=e$(),{diffLine:u,isLeftSide:f,isSplit:m,diffContext:h}=F(),p=(0,l.useMemo)(()=>o.leftLines[0],[o.leftLines]),g=(0,l.useMemo)(()=>o.leftLines[o.leftLines.length-1],[o.leftLines]),x=(0,l.useMemo)(()=>o.leftLines.every(e=>!(0,b.Po)(e)&&"DELETION"!==e.type),[o.leftLines]),y=(0,l.useMemo)(()=>o.rightLines[0],[o.rightLines]),v=(0,l.useMemo)(()=>o.rightLines[o.rightLines.length-1],[o.rightLines]),C=(0,l.useMemo)(()=>0===o.rightLines.length,[o.rightLines]),N=(0,l.useMemo)(()=>0===o.leftLines.length,[o.leftLines]),j=(0,l.useMemo)(()=>!(o.leftLines.find(e=>!(0,b.Po)(e)&&!(0,b.Ji)(e)&&"INJECTED_CONTEXT"!==e.type)||o.rightLines.find(e=>!(0,b.Po)(e)&&!(0,b.Ji)(e)&&"INJECTED_CONTEXT"!==e.type)),[o.leftLines,o.rightLines]),w=(0,l.useCallback)((n,i)=>{!(!s||!g||!p||(0,b.Po)(g)||(0,b.Po)(p))&&p.left&&g.left&&(d({diffAnchor:s.diffAnchor,endLineNumber:g.left,endOrientation:"left",startLineNumber:p.left,startOrientation:"left",firstSelectedLineNumber:p.left,firstSelectedOrientation:"left"}),i?.withSuggestedChange?e():t())},[s,g,p,d,e,t]),S=(0,l.useCallback)((n,i)=>{!(!s||!v||!y||(0,b.Po)(v)||(0,b.Po)(y))&&y.right&&v.right&&(d({diffAnchor:s.diffAnchor,endLineNumber:v.right,endOrientation:"right",startLineNumber:y.right,startOrientation:"right",firstSelectedLineNumber:y.right,firstSelectedOrientation:"right"}),i?.withSuggestedChange?e():t())},[s,v,y,d,e,t]),k="DELETION"!==u.type&&("pr"===h||void 0===h),I=(0,l.useMemo)(()=>!!s&&(s.startOrientation!==s.endOrientation||s.startLineNumber!==s.endLineNumber),[s]);if(!c)return null;let D=!1,E=!1;if(s&&I){let l=e7[s.startOrientation],o=e7[s.endOrientation];return a=` on lines ${l}${s.startLineNumber}-${o}${s.endLineNumber}`,!(0,b.Po)(p)&&!(0,b.Po)(g)&&p&&g&&(D=!0,n=p.left===g.left?C?` on line L${p.left}`:`, original line L${p.left}`:C?` on lines L${p.left}-L${g.right}`:`, original lines L${p.left}-L${g.left}`),!(0,b.Po)(y)&&!(0,b.Po)(v)&&y&&v&&(E=!0,r=y.right===v.right?N||m&&j?` on line R${y.right}`:`, modified line R${v.right}`:N||m&&j?` on lines R${y.right}-R${v.right}`:`, modified lines R${y.right}-R${v.right}`),(0,i.jsx)(i.Fragment,{children:m?(0,i.jsx)(i.Fragment,{children:j?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eA.l.Item,{onSelect:S,children:[(0,i.jsx)(eA.l.LeadingVisual,{children:(0,i.jsx)(R.PlusIcon,{})}),te+r,(0,i.jsx)(eA.l.TrailingVisual,{children:(0,i.jsx)(e9.U,{keys:"Alt+n"})})]}),(0,i.jsxs)(eA.l.Item,{onSelect:e=>S(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eA.l.LeadingVisual,{children:(0,i.jsx)(R.PlusCircleIcon,{})}),tt+r]})]}):(0,i.jsxs)(i.Fragment,{children:[D?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eA.l.Item,{onSelect:w,children:[(0,i.jsx)(eA.l.LeadingVisual,{children:(0,i.jsx)(R.PlusIcon,{})}),te+n,(0,i.jsx)(eA.l.TrailingVisual,{children:(0,i.jsx)(e9.U,{keys:C?"Alt+n":"Alt+Shift+N"})})]}),x&&(0,i.jsxs)(eA.l.Item,{onSelect:e=>w(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eA.l.LeadingVisual,{children:(0,i.jsx)(R.PlusCircleIcon,{})}),tt+n]})]}):null,E?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eA.l.Item,{onSelect:S,children:[(0,i.jsx)(eA.l.LeadingVisual,{children:(0,i.jsx)(R.PlusIcon,{})}),te+r,(0,i.jsx)(eA.l.TrailingVisual,{children:(0,i.jsx)(e9.U,{keys:"Alt+n"})})]}),(0,i.jsxs)(eA.l.Item,{onSelect:e=>S(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eA.l.LeadingVisual,{children:(0,i.jsx)(R.PlusCircleIcon,{})}),tt+r]})]}):null]})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eA.l.Item,{onSelect:t,children:[(0,i.jsx)(eA.l.LeadingVisual,{children:(0,i.jsx)(R.PlusIcon,{})}),te+a]}),k&&x&&(0,i.jsxs)(eA.l.Item,{onSelect:e,children:[(0,i.jsx)(eA.l.LeadingVisual,{children:(0,i.jsx)(R.PlusCircleIcon,{})}),tt+a]})]})})}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eA.l.Item,{onSelect:t,children:[(0,i.jsx)(eA.l.LeadingVisual,{children:(0,i.jsx)(R.PlusIcon,{})}),tn(te,u,f)]}),k&&(0,i.jsxs)(eA.l.Item,{onSelect:e,children:[(0,i.jsx)(eA.l.LeadingVisual,{children:(0,i.jsx)(R.PlusCircleIcon,{})}),tn(tt,u,f)]})]})}try{ti.displayName||(ti.displayName="StartConversationContextMenuItems")}catch{}function tr(e){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(td,{...e}),(0,i.jsx)(ts,{fileDiffReference:e.copilotChatReference}),(0,i.jsx)(th,{handleCopyCode:e.handleCopyCode}),(0,i.jsx)(to,{}),(0,i.jsx)(tl,{}),(0,i.jsx)(tp,{})]})}function tl(){let{diffLine:e,fileAnchor:t}=F(),{selectedDiffRowRange:n}=L(),r=(0,l.useCallback)(()=>{let i=(0,b.j2)({line:e,range:n,fileAnchor:t});i&&(0,eT.D)(i)},[t,e,n]);return(0,i.jsxs)(eA.l.Item,{onSelect:r,onMouseDown:e=>{window.getSelection()?.toString()!==""&&e.preventDefault()},children:[(0,i.jsx)(eA.l.LeadingVisual,{children:(0,i.jsx)(R.LinkIcon,{})}),"Copy link",(0,i.jsx)(eA.l.TrailingVisual,{children:(0,i.jsx)(e9.U,{keys:"Mod+Alt+y"})})]})}function ta(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tg,{}),(0,i.jsx)(to,{})]})}let ts=e=>{let{selectedDiffRowRange:t}=L(),{diffLine:n,isLeftSide:r,fileAnchor:l}=F(),a=(0,b.Av)(t,n,r,l);return e.fileDiffReference?(0,i.jsx)(e8,{showDivider:!0,selectedRange:a,fileDiffReference:e.fileDiffReference}):null};function to(){let{fileAnchor:e}=F();return(0,i.jsxs)(eA.l.Item,{onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${e}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"a",code:"KeyA",ctrlKey:!0}))})},children:[(0,i.jsx)(eA.l.LeadingVisual,{children:(0,i.jsx)(R.MultiSelectIcon,{})}),"Select all",(0,i.jsx)(eA.l.TrailingVisual,{children:(0,i.jsx)(e9.U,{keys:"Mod+a"})})]})}function td({handleViewMarkersSelection:e,shouldDisplayCollapseComments:t,showStartConversation:n,startConversationCurrentLine:r,startConversationWithSuggestedChange:l}){let{commentingEnabled:a}=e$(),{annotations:s,threads:o}=eV(),d=s.length>0;return a&&(n||o||d)?(0,i.jsxs)(i.Fragment,{children:[n&&(0,i.jsx)(ti,{handleStartConversation:r,handleStartConversationWithSuggestedChange:l}),(0,i.jsx)(tc,{handleViewMarkersSelection:e,shouldDisplayCollapseComments:t}),(0,i.jsx)(eA.l.Divider,{})]}):null}function tc({handleViewMarkersSelection:e,shouldDisplayCollapseComments:t}){let{commentingEnabled:n}=e$(),{isSplit:r}=F(),{viewerData:l}=e$();return n&&l.commentsPreference!==eR.sI.Visible?r?(0,i.jsx)(tu,{handleViewMarkersSelection:e,shouldDisplayCollapseComments:t}):(0,i.jsx)(tf,{onSelect:()=>e(),shouldDisplayCollapseComments:t}):null}function tu({handleViewMarkersSelection:e,shouldDisplayCollapseComments:t}){let{originalLineHasThreads:n,modifiedLineHasThreads:r,isLeftSide:l}=F(),{annotations:a}=eV(),s=a.length>0;return l?(0,i.jsxs)(i.Fragment,{children:[n&&(0,i.jsx)(tm,{text:t?"Collapse comments":"Expand comments",onSelect:()=>e("LEFT")}),(r||s)&&(0,i.jsx)(tm,{text:t?"Collapse comments, modified line":"Expand comments, modified line",onSelect:()=>e("RIGHT")})]}):(0,i.jsxs)(i.Fragment,{children:[(r||s)&&(0,i.jsx)(tm,{text:t?"Collapse comments":"Expand comments",onSelect:()=>e("RIGHT")}),n&&(0,i.jsx)(tm,{text:t?"Collapse comments, original line":"Expand comments, original line",onSelect:()=>e("LEFT")})]})}function tf({onSelect:e,shouldDisplayCollapseComments:t}){let{ghostUser:n}=e$(),{diffLine:r}=F(),{annotations:l}=eV();return r&&U(r.threadsData,n).length>0||l.length>0?(0,i.jsx)(tm,{text:t?"Collapse comments":"Expand comments",onSelect:()=>e()}):null}function tm({onSelect:e,text:t}){return(0,i.jsxs)(eA.l.Item,{onSelect:e,children:[(0,i.jsx)(eA.l.LeadingVisual,{children:(0,i.jsx)(R.CommentDiscussionIcon,{})}),t]})}function th({handleCopyCode:e}){return(0,i.jsxs)(eA.l.Item,{onSelect:e,onMouseDown:e=>{window.getSelection()?.toString()!==""&&e.preventDefault()},children:[(0,i.jsx)(eA.l.LeadingVisual,{children:(0,i.jsx)(R.CopyIcon,{})}),"Copy",(0,i.jsx)(eA.l.TrailingVisual,{children:(0,i.jsx)(e9.U,{keys:"Mod+c"})})]})}function tp(){let{canExpandStartOfHunk:e,canExpandEndOfHunk:t}=e5(),{previousHunk:n,nextHunk:r}=F();return e||t||n||r?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eA.l.Divider,{}),(0,i.jsx)(tg,{}),(0,i.jsx)(tx,{})]}):null}function tg(){let{canExpandStartOfHunk:e,expandEndOfHunk:t,expandStartOfHunk:n,canExpandEndOfHunk:r}=e5();return(0,i.jsxs)(i.Fragment,{children:[e&&(0,i.jsxs)(eA.l.Item,{onSelect:n,children:[(0,i.jsx)(eA.l.LeadingVisual,{children:(0,i.jsx)(R.FoldUpIcon,{})}),"Expand above"]}),r&&(0,i.jsxs)(eA.l.Item,{onSelect:t,children:[(0,i.jsx)(eA.l.LeadingVisual,{children:(0,i.jsx)(R.FoldDownIcon,{})}),"Expand below"]})]})}function tx(){let{previousHunk:e,nextHunk:t}=F(),{fileAnchor:n}=F();return(0,i.jsxs)(i.Fragment,{children:[t?(0,i.jsxs)(eA.l.Item,{"aria-keyshortcuts":"PageDown",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${n}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageDown"}))})},children:[(0,i.jsx)(eA.l.LeadingVisual,{children:(0,i.jsx)(R.MoveToBottomIcon,{})}),"Go to next hunk",(0,i.jsx)(eA.l.TrailingVisual,{children:"Page Down"})]}):null,e?(0,i.jsxs)(eA.l.Item,{"aria-keyshortcuts":"PageUp",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${n}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))})},children:[(0,i.jsx)(eA.l.LeadingVisual,{children:(0,i.jsx)(R.MoveToTopIcon,{})}),"Go to previous hunk",(0,i.jsx)(eA.l.TrailingVisual,{children:"Page Up"})]}):null]})}try{tr.displayName||(tr.displayName="CellContextMenu")}catch{}try{tl.displayName||(tl.displayName="CopyAnchorLink")}catch{}try{ta.displayName||(ta.displayName="EmptyCellContextMenu")}catch{}try{to.displayName||(to.displayName="SelectAllListItem")}catch{}try{td.displayName||(td.displayName="MarkerListItems")}catch{}try{tc.displayName||(tc.displayName="ViewMarkerListItems")}catch{}try{tu.displayName||(tu.displayName="SplitDiffMarkersListItems")}catch{}try{tf.displayName||(tf.displayName="UnifiedDiffMarkerListItem")}catch{}try{tm.displayName||(tm.displayName="MarkerListItem")}catch{}try{th.displayName||(th.displayName="CopyContentListItems")}catch{}try{tp.displayName||(tp.displayName="HunkListItems")}catch{}try{tg.displayName||(tg.displayName="ExpandHunksListItems")}catch{}try{tx.displayName||(tx.displayName="JumpToHunkListItems")}catch{}var tb=n(75177),ty=n(53110);function tv({iconColor:e,icon:t,size:n=12,backgroundColor:r="fg.onEmphasis",absolute:l=!0,backgroundSx:a}){let s,o;return 12===n?(s="10px",o="1px"):20===n?(s="16px",o="2px"):(s="16px",o="4px"),(0,i.jsxs)(tb.A,{sx:{display:"flex",borderRadius:"100px",...l?{position:"absolute",bottom:-1,right:-1,boxShadow:"0 0 0 2px var(--bgColor-default, var(--color-canvas-default))",backgroundColor:"var(--bgColor-default, var(--color-canvas-default))"}:{position:"relative"},...a},children:[(0,i.jsx)(tb.A,{sx:{display:"flex",position:"absolute",borderRadius:"100px",width:s,height:s,left:o,top:o,backgroundColor:r}}),(0,i.jsx)(ty.A,{icon:t,size:n,sx:{color:e,position:"relative"}})]})}try{tv.displayName||(tv.displayName="StatusIcon")}catch{}function tC({zIndex:e,altText:t,hovercardUrl:n,src:r,square:l,icon:a,iconColor:s,backgroundColor:o,backgroundSx:d,sx:c,size:u=20}){return(0,i.jsxs)(tb.A,{sx:{position:"relative",display:"flex",gap:2,alignItems:"center",...e,...c},children:[(0,i.jsx)(eY.r,{alt:t,"data-hovercard-url":n,size:u,square:l,src:r}),(0,i.jsx)(tv,{icon:a,iconColor:s,size:12,backgroundColor:o,backgroundSx:d})]})}try{tC.displayName||(tC.displayName="StatusAvatar")}catch{}function tN({authorAvatarUrl:e,authorLogin:t,lineSpacingPreference:n,sx:r}){return(0,i.jsx)(tC,{altText:`${t}'s avatar image with pending indicator`,icon:R.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",square:!1,size:"compact"===n?18:20,src:e,backgroundSx:{backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",boxShadow:"0 0 0 .1px var(--bgColor-default, var(--color-canvas-default))"},sx:{alignItems:"center",display:"flex",height:"var(--diff-line-minimum-height)",...r}})}try{tN.displayName||(tN.displayName="InProgressCommentIndicator")}catch{}let tj={"action-bar-position":"ActionBar-module__action-bar-position--q5zYS","left-action-bar":"ActionBar-module__left-action-bar--EJ7Y6","left-action-bar-draft-compact":"ActionBar-module__left-action-bar-draft-compact--BA7vx","left-action-bar-draft-relaxed":"ActionBar-module__left-action-bar-draft-relaxed--yz9iI","left-action-bar-new":"ActionBar-module__left-action-bar-new--NXupU",actionBarArrowSizing:"ActionBar-module__actionBarArrowSizing--VJyrJ",actionBarHeight:"ActionBar-module__actionBarHeight--BT8aR",actionBarStartCommentWidth:"ActionBar-module__actionBarStartCommentWidth--NZ_pB","action-bar-button-group":"ActionBar-module__action-bar-button-group--eolOy"},tw=(0,l.forwardRef)(function({authorAvatarUrl:e,authorLogin:t,cellId:n,cellRef:r,showStartConversation:a,hasDraftComment:s,copilotChatReference:o,handleCopyCode:d,onOpenInLineThread:c,shouldDisplayCollapseComments:u,toggleViewingMarkers:f},m){let h=(0,l.useRef)(null),p=(0,l.useRef)(null),{commentingEnabled:g,viewerData:{lineSpacingPreference:x,commentsPreference:b}}=e$(),{diffLine:y}=F(),v=(0,l.useRef)(null),C=h.current?h:p;(0,eX.T)(m,C);let N=y.threadsData?.totalCommentsCount||0,j=y.annotationsData?.totalCount||0,{isActionBarFocused:w,handleActionBarBlur:L,handleActionBarFocusCapture:S,handleActionBarKeydownCapture:k}=eq({cellRef:r}),{annotations:E,isContextMenuOpen:_,startNewConversation:A,startNewConversationWithSuggestedChange:T,anyMenuOpen:M,threads:O,toggleContextMenu:P,toggleContextMenuFromActionBar:$}=eK({cellId:n,actionBarRef:v,onOpenInLineThread:c}),U=g&&N+j>0&&b===eR.sI.Collapsed,H=g&&a,B={onBlur:L,onFocusCapture:S,onKeyDownCapture:k};return(0,i.jsxs)(i.Fragment,{children:[H&&(0,i.jsx)("div",{"aria-hidden":!w,className:(0,I.$)("d-flex","flex-row",tj["left-action-bar"]),children:(0,i.jsx)(i.Fragment,{children:s?(0,i.jsx)(D.Q,{"aria-label":"Continue comment in progress",size:"small",className:(0,I.$)("py-0","compact"===x?tj["left-action-bar-draft-compact"]:tj["left-action-bar-draft-relaxed"],tj.actionBarHeight),onClick:A,...B,children:(0,i.jsx)(tN,{lineSpacingPreference:x,authorAvatarUrl:e,authorLogin:t})}):(0,i.jsx)(Z.K,{icon:R.PlusIcon,"aria-label":"Add comment",ref:p,size:"small",className:(0,I.$)("fgColor-muted","bgColor-accent-emphasis","fgColor-onEmphasis","px-0",tj["left-action-bar-new"],tj.actionBarHeight,tj.actionBarStartCommentWidth),onClick:A,...B})})}),(0,i.jsx)("div",{"aria-hidden":!w,className:(0,I.$)("d-flex","flex-row",tj["action-bar-position"]),children:(0,i.jsxs)(eJ.A,{className:tj["action-bar-button-group"],...B,children:[U&&(0,i.jsx)(D.Q,{ref:h,"aria-expanded":M,"aria-label":"View comments",size:"small",className:(0,I.$)("py-0","px-1",tj.actionBarHeight),onClick:e=>{(1===O.length||1===E.length)&&e.preventDefault(),f?.()},children:(0,i.jsx)(e2,{lineSpacingPreference:x})}),(0,i.jsxs)(e_.W,{anchorRef:v,open:_,onOpenChange:P,children:[(0,i.jsx)(e_.W.Anchor,{children:(0,i.jsx)(Z.K,{ref:v,"aria-haspopup":"true","aria-label":"More actions",icon:R.TriangleDownIcon,size:"small",className:(0,I.$)("fgColor-muted",tj.actionBarArrowSizing),onClick:$})}),(0,i.jsx)(e_.W.Overlay,{width:"medium",children:(0,i.jsx)(eA.l,{children:(0,i.jsx)(tr,{shouldDisplayCollapseComments:u,copilotChatReference:o,showStartConversation:a,handleCopyCode:d,handleViewMarkersSelection:f,startConversationCurrentLine:A,startConversationWithSuggestedChange:T})})})]})]})})]})});tw.displayName="ActionBar";let tL={visibilityHidden:"DiffHighlightedOverlay-module__visibilityHidden--v59uf",userSelectNone:"DiffHighlightedOverlay-module__userSelectNone--i39lB",focusedResultStyles:"DiffHighlightedOverlay-module__focusedResultStyles--QZMIm",nonFocusedResultStyles:"DiffHighlightedOverlay-module__nonFocusedResultStyles--x2N7d",nonHunkStyles:"DiffHighlightedOverlay-module__nonHunkStyles--_dJlQ"};function tS({searchResults:e,focusedSearchResult:t,className:n,styleObject:r}){let l=0,a=e[0]?.text??"",s=e[0]?.diffLineNumIndex??-1,o=`overlay-${s}-${a}`;return(0,i.jsxs)("span",{className:(0,I.$)(n,"position-absolute",tL.userSelectNone,!e[0].isHunk&&tL.nonHunkStyles),style:{...r},children:[e.map(e=>{var n,r;let s=e.indexWithinPathDigest===t,o=(0,i.jsxs)("span",{children:[(0,i.jsx)("span",{className:(0,I.$)(tL.visibilityHidden,tL.userSelectNone),children:a.substring(l,e.column)}),(0,i.jsx)("span",{className:(0,I.$)(tL.userSelectNone,s&&tL.focusedResultStyles,!s&&tL.nonFocusedResultStyles),children:(0,i.jsx)("span",{className:(0,I.$)(!s&&tL.visibilityHidden),id:(n=e.indexWithinPathDigest,r=e.pathDigest,`match-${r}-${n}`),children:a.substring(e.column,e.columnEnd)})})]},`find-match-${e.diffLineNumIndex}-${e.column}`);return l=e.columnEnd,o}),(0,i.jsx)("span",{className:(0,I.$)(tL.visibilityHidden,tL.userSelectNone),children:a.substring(l)})]},o)}try{tS.displayName||(tS.displayName="DiffHighlightedOverlay")}catch{}function tk({diffLine:e}){let t=function(e){let t=(e.annotationsData?.annotations??[]).length>0,n=(e.threadsData?.threads??[]).length>0;switch(!0){case t&&n:return"Code has comments and alerts. Press enter to view.";case n:return"Code has comments. Press enter to view.";case t:return"Code has alerts. Press enter to view.";default:return""}}(e);return t?(0,i.jsx)("span",{className:"sr-only user-select-none",children:t}):null}try{tk.displayName||(tk.displayName="DiffLineScreenReaderSummary")}catch{}let tI={"comment-indicator":"DiffLineTableCellParts-module__comment-indicator--eI0hb","in-progress-comment-indicator":"DiffLineTableCellParts-module__in-progress-comment-indicator--hx3m3"};function tD(e,t){switch(t){case"SHOW_MARKERS":return{userMinimized:!1,showMarkers:!0};case"USER_EXPANDED_MARKERS":return{showMarkers:!0,userMinimized:!1};case"USER_MINIMIZED_MARKERS":return{userMinimized:!0,showMarkers:!1};case"USER_EXITED_MARKERS_DIALOG":return{...e,showMarkers:!1}}}let tE=["CONTEXT","INJECTED_CONTEXT"];function tR(e){let{rowId:t}=F();if(t)return(0,b.u6)(t,e)}let t_=(0,l.forwardRef)(function({children:e,ContextMenu:t,className:n,columnIndex:r,handleDiffCellClick:a,handleDiffCellMouseDown:s,handleExitDialogMode:o,handleHideMarkersFromFocus:d,handleDiffSideCellSelectionBlocking:c,handleStartConversation:u,handleUserClosedMarkersDialog:f,lineAnchor:m,firstLineNumberSelection:h,commentDialogOpen:p,enterDialogMode:x,hasThreads:y,...v},C){let{diffLine:N,fileAnchor:j,isRowSelected:w,isLeftSide:S}=F(),k=(0,l.useRef)(null);(0,l.useImperativeHandle)(C,()=>k.current,[]);let[I,D]=(0,l.useState)(!1),{selectedDiffRowRange:E}=L(),{disableInlineCommentDialogMode:R,isInDialogMode:_}=(0,Y.q)(),A=(0,l.useRef)(null),T=(0,eE.U)(e=>{if(!e.target)return;let t=e.target;if(!I||A.current?.contains(t)||k.current?.contains(t)||2!==e.button?k.current?.contains(t)&&e.target.closest("button")?.contains(t)&&D(!1):D(!1),_){let t=!e.target.closest("[data-inline-markers]"),n=!e.target.closest("#__primerPortalRoot__");t&&n&&R()}});(0,l.useEffect)(()=>(g.XC?.addEventListener("mousedown",T),()=>g.XC?.removeEventListener("mousedown",T)),[T]),(0,l.useEffect)(()=>()=>g.XC?.removeEventListener("mousedown",T),[]);let M=(0,l.useCallback)(()=>{let e=(0,b.j2)({line:N,range:E,fileAnchor:j});e&&(0,eT.D)(e)},[j,N,E]),O=(0,l.useCallback)(()=>{h?.current&&(h.current=null)},[h]),P=(0,l.useCallback)(e=>{let t=e.target?.closest("td"),n=t?.classList.contains("diff-line-number");e.shiftKey?e.preventDefault():n?s?.():h&&(h.current=null),h&&n&&(h.current=S?N.left:N.right),c?.(e)},[c]),$=(0,l.useCallback)(()=>{k.current?.focus(),R(),o?.(),f?.()},[R,o,f]),U=eM({fileAnchor:j}),H=(0,l.useCallback)(async e=>{if(e.target===k.current&&(e?.metaKey||e?.ctrlKey)&&"c"===e.key){e.preventDefault(),await U();return}if(e.target===k.current&&(e?.metaKey||e?.ctrlKey)&&e.altKey&&"y"===e.key)return void M();if(k.current?.contains(e.target)&&e?.key==="Escape")return void $();if(k.current?.contains(e.target)&&"true"===e.target.getAttribute("data-exit-dialog-mode-button")&&!e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),k.current?.querySelector('[data-is-first-collapse-button="true"]')?.focus();return}if(k.current?.contains(e.target)&&"true"===e.target.getAttribute("data-is-first-collapse-button")&&e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),k.current?.querySelector('[data-exit-dialog-mode-button="true"]')?.focus();return}e.target===k.current&&"Enter"===e.key&&(x?.(),!1===y&&u?.(),e.preventDefault())},[U,M,$,x,y,u]),B=`inline-dialog-heading-${(0,l.useId)()}`;return(0,i.jsxs)("td",{ref:k,"data-grid-cell-id":tR(r),"data-line-anchor":m,"data-selected":w,role:_?"dialog":"gridcell",style:{userSelect:"none",position:"relative"},tabIndex:-1,valign:"top",className:n?`focusable-grid-cell ${n} ${r<3?"left-side":""}`:"focusable-grid-cell",onKeyDown:H,onBlur:e=>e.target.ariaSelected="false",onClick:a,onFocus:e=>e.target.ariaSelected="true",onMouseDown:P,onMouseUp:O,"aria-labelledby":_?B:void 0,...v,children:[_&&(0,i.jsx)("h1",{id:B,className:"sr-only",children:"Comment view"}),e,t&&I&&(0,i.jsx)(e_.W,{anchorRef:k,open:!0,onOpenChange:D,children:(0,i.jsx)(e_.W.Overlay,{width:e?"medium":"small",children:(0,i.jsx)(eA.l,{children:t})})})]})});function tA(){let{isSplit:e}=F();return(0,i.jsx)("div",{className:(0,I.$)("hunk-kebab-icon pr-2 pb-1",!e&&"hunk-kebab-icon-unified"),children:(0,i.jsx)(R.KebabHorizontalIcon,{})})}let tT=(0,l.forwardRef)(function({searchResultsForLine:e,focusedSearchResult:t,columnIndex:n,lineAnchor:r,firstLineNumberSelection:a,handleDiffCellClick:s,handleDiffSideCellSelectionBlocking:d,filePath:c,copilotChatReference:u},f){let{diffLine:m,fileAnchor:h,isLeftSide:p,isRowSelected:g}=F(),[x,y]=(0,b.x_)(m.html,m.type),v=y&&["+","-"].includes(y),[C,j]=(0,l.useState)(""),{isActionBarVisible:w}=eV(),{selectedDiffRowRange:S,selectedDiffLines:k}=L(),{commentBatchPending:D,commentingEnabled:E,commentingImplementation:_,initialExpandedThreadId:A,markerNavigationImplementation:T,repositoryId:M,subjectId:O,subject:P,viewerData:$}=e$(),{hasPersistedComment:U}=(0,Q.L4)({diffSide:p?"LEFT":"RIGHT",filePath:c,line:m.blobLineNumber,subjectId:O,fileLevelComment:!1}),{isInDialogMode:H,enableInlineCommentDialogMode:B,disableInlineCommentDialogMode:z}=(0,Y.q)(),G=(0,l.useRef)(null),V=(0,l.useRef)(null);(0,l.useImperativeHandle)(f,()=>V.current,[]);let W=!!m.threadsData?.threads?.length||!!m.annotationsData?.annotations?.length,K=(0,b.S4)({hasThreads:W&&$.commentsPreference===eR.sI.Collapsed}),q=function(e,t,n){let{selectedDiffRowRange:i}=L();return(0,l.useMemo)(()=>{let r="Add a comment on",l=!!i&&i.startLineNumber!==i.endLineNumber;if(i&&l&&n){let e={left:"L",right:"R"},t=e[i.startOrientation],n=e[i.endOrientation];r+=i.startLineNumber!==i.endLineNumber?` lines ${t}${i.startLineNumber} to ${n}${i.endLineNumber}`:` line ${t}${i.startLineNumber}`}else{let n=t&&!(0,b.Ji)(e)?"L":"R";r+=` line ${n}${e.blobLineNumber}`}return r},[e,t,i,n])}(m,!!p,g),X=tR(n),{handleCellBlur:J,handleCellFocus:Z,handleCellMouseEnter:ee,handleCellMouseLeave:et}=eq({cellRef:V}),en=(0,l.useRef)(null),[ei,er]=function(e){let[t,n]=(0,l.useReducer)(tD,{userMinimized:e===eR.sI.Collapsed,showMarkers:!1});return(0,l.useEffect)(()=>{e===eR.sI.Visible?n("SHOW_MARKERS"):n("USER_MINIMIZED_MARKERS")},[e,n]),[t,n]}($.commentsPreference),el=(0,l.useCallback)((e=!0)=>{V.current?.classList.contains("diff-text-cell")&&(B(),er("USER_EXPANDED_MARKERS"),e&&setTimeout(()=>{V.current?.querySelector('[data-first-marker="true"]')?.focus()},0))},[er,B]),ea=(0,l.useCallback)(()=>{setTimeout(()=>V.current?.focus()),z(),er("USER_MINIMIZED_MARKERS")},[z,er]),es=(0,l.useCallback)(()=>{$.commentsPreference===eR.sI.Collapsed&&ei.showMarkers?ea():el()},[ea,el,ei.showMarkers,$.commentsPreference]),{annotations:eo,isNewConversationDialogOpen:ed,shouldStartNewConversationWithSuggestedChange:ec,startNewConversation:eu,startNewConversationWithSuggestedChange:ef,selectAnnotation:em,selectThread:ep,closeNewConversation:eg,closeMarkerListDialog:ex,returnFocusRef:eb,optimizedSelectedAnnotationId:ey,optimizedSelectedThreadId:ev,threads:eC}=eK({cellId:X,actionBarRef:G,onOpenInLineThread:el}),eN=(0,l.useMemo)(()=>{var e;return!ed&&(e=$.viewerCanComment,E&&e&&(0,b.a1)(m,k))},[ed,E,$.viewerCanComment,m,k]);(0,l.useEffect)(()=>{_&&A&&ev!==A&&eC.map(e=>e.id).includes(A)&&ep(A,{skipLineSelection:!0})},[A]),(0,l.useEffect)(()=>{if(!T)return;let{activeGlobalMarkerID:e}=T;if(e){let t=eC.map(e=>e.id),n=eo.map(e=>e.id);t.includes(e)?ep(e,{skipLineSelection:!0}):n.includes(e)&&em(e,{skipLineSelection:!0})}},[ep,eC,T,eo,em]);let ej=function(e,t,n){let{sendAnalyticsEvent:i}=(0,eh.s)(),{getDiffLinesFromLineRange:r,selectedDiffRowRange:a}=L(),s=N(function(n,l){if(!e)return;let a=function(e){if(!e)return"DELETION"!==t.type;if("right"===e.startOrientation&&"right"===e.endOrientation)return!0;if(e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation)return"DELETION"!==t.type;let n=r(e)?.selectedLeftLines;return!!n?.every(e=>"empty-diff-line"!==e&&"DELETION"!==e.type)}(n);return{isValidSuggestionRange:a,showSuggestChangesButton:a,sourceContentFromDiffLines:a?function(e){let n=r(e)?.selectedRightLines;if(e&&n&&n.length>1)return(0,b.Ls)(n);if(!t)return"";let[i]=(0,b.dv)(t.text,t.type);return i}(n):void 0,onInsertSuggestedChange:()=>{i("diff.add_suggested_change","ADD_SUGGESTED_CHANGE_BUTTON")},shouldInsertSuggestedChange:l}});return(0,l.useMemo)(()=>({selectedDiffRowRange:a,configureSuggestedChangesFromLineRange:s,shouldStartNewConversationWithSuggestedChange:n}),[a,s,n])}(_?.suggestedChangesEnabled,m,ec),ew=(0,l.useCallback)(()=>{el?.(),eu?.()},[el,eu]),eL=(0,l.useCallback)(()=>{H||0!==(V.current?.querySelectorAll(":focus")??[]).length||z()},[z,H]),eS=(0,l.useRef)(!0),{ghostUser:ek}=e$(),eD=eM({fileAnchor:h}),eE=(0,l.useMemo)(()=>W&&$.commentsPreference===eR.sI.Collapsed?!ei.userMinimized:(!!ed||!!W)&&!!E&&($.commentsPreference===eR.sI.Collapsed&&(!!ed||!!H)||$.commentsPreference===eR.sI.Visible&&(!!W||!!ed||!!ei.showMarkers)||!1),[E,W,H,ed,ei.showMarkers,ei.userMinimized,$.commentsPreference]),e_=(0,l.useMemo)(()=>(0,b.dT)(m),[m]);return(0,i.jsxs)(t_,{ref:V,columnIndex:n,commentDialogOpen:ed,handleDiffCellClick:s,enterDialogMode:el,handleDiffSideCellSelectionBlocking:d,handleExitDialogMode:()=>er("USER_EXITED_MARKERS_DIALOG"),handleUserClosedMarkersDialog:()=>er("USER_MINIMIZED_MARKERS"),lineAnchor:r,firstLineNumberSelection:a,handleStartConversation:ew,hasThreads:W,ContextMenu:(0,i.jsx)(tr,{shouldDisplayCollapseComments:eE,copilotChatReference:u,showStartConversation:eN,handleViewMarkersSelection:es,startConversationCurrentLine:ew,startConversationWithSuggestedChange:ef}),className:(0,I.$)(`diff-text-cell ${p?"left-side-diff-cell":"right-side-diff-cell"} ${e_?"pt-4":""}`,{"border-right":p&&"HUNK"!==m.type}),style:{backgroundColor:(0,b.Yf)(m.type,!1,g),paddingRight:K},onBlur:e=>{J(e),eL()},onFocus:Z,onMouseEnter:ee,onMouseLeave:et,children:[(0,i.jsxs)("code",{className:(0,I.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===m.type,deletion:"DELETION"===m.type}),children:[v&&(0,i.jsx)("span",{className:"diff-text-marker",children:y}),e&&e.length>0&&(0,i.jsx)(tS,{searchResults:e,focusedSearchResult:t,className:(0,I.$)("diff-text-inner",{"color-fg-muted":"HUNK"===m.type})}),(0,i.jsx)(o.mo,{html:x,className:(0,I.$)("diff-text-inner",{"color-fg-muted":"HUNK"===m.type})})]}),m.displayNoNewLineWarning&&(0,i.jsx)(R.NoEntryIcon,{size:16,className:"fgColor-danger"}),w&&(0,i.jsx)(tw,{shouldDisplayCollapseComments:ei.showMarkers,copilotChatReference:u,authorAvatarUrl:$.avatarUrl,authorLogin:$.login,ref:G,cellId:X,cellRef:V,hasDraftComment:U,showStartConversation:eN,onOpenInLineThread:el,handleCopyCode:eD,toggleViewingMarkers:es}),_&&T&&(0,i.jsx)(i.Fragment,{children:eE?(0,i.jsx)(eI,{gutterSizeOffset:K,inlineMarkersRef:en,manuallyUpdateCommentsWithThisThreadId:C,annotations:eo,enterDialogMode:el,batchPending:D,batchingEnabled:_.batchingEnabled,commentingImplementation:{..._,deleteComment:({onCompleted:e,...t})=>{_&&m&&_.deleteComment({...t,onCompleted:()=>{e?.(),eC.length<=1&&setTimeout(()=>V.current?.focus())},filePath:c})}},conversationListThreads:eC,fileAnchor:h,filePath:c,onCloseFocusMode:ea,isMarkerListOpen:!!V.current?.classList.contains("diff-text-cell")&&eC.length>0,isRowSelected:g,lineType:m.type,repositoryId:M,returnFocusRef:eb,selectedAnnotationId:ey,selectedThreadId:ev||(V.current?.classList.contains("diff-text-cell")&&eC.length>0?eC[0]?.id:null),subjectId:O,subject:P,suggestedChangesConfig:ej,onCloseConversationList:ex,onAnnotationSelected:em,onThreadSelected:ep,viewerData:$,ghostUser:ek,children:ed&&(0,i.jsx)("div",{className:(0,I.$)(" border rounded-2 color-border-default",(eC.length,"mt-2 mb-1")),children:(0,i.jsx)(Q.cT,{isDialog:!1,addCommentDialogTitle:q,anchorRef:V,batchPending:D,batchingEnabled:_.batchingEnabled,commentBoxConfig:_.commentBoxConfig,commentBoxSubject:_.commentBoxSubject,filePath:c,isLeftSide:!!p,isOpen:ed,lineNumber:g?S?.endLineNumber:m.blobLineNumber,repositoryId:M,returnFocusRef:eb,startLineNumber:g?S?.startLineNumber:void 0,subjectId:O,suggestedChangesConfig:ej,viewerData:$,onAddComment:({onCompleted:e,threadsConnectionId:t,...n})=>{if(!_||!m)return;let{leftLines:i,rightLines:r}=k;if(S){let e="left"===S.endOrientation?i:r,n=e[e.length-1];n&&(0,b.qK)(n)&&n.threadsData?.__id&&(t=n.threadsData?.__id)}_.addThread({...n,diffLine:m,isLeftSide:p,isLineSelected:g,selectedDiffRowRange:S,threadsConnectionId:t,onCompleted:(t,n)=>{e?.(t,n),ep(t),j(t)}})},onCloseCommentDialog:()=>{ea(),eg()}})})}):null}),!w&&$.commentsPreference===eR.sI.Collapsed&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{"aria-hidden":"true",style:{left:"compact"===$.lineSpacingPreference?"-1px":"-2px"},className:(0,I.$)("position-absolute top-0 d-flex user-select-none",tI["in-progress-comment-indicator"]),children:U&&(0,i.jsx)(tN,{lineSpacingPreference:$.lineSpacingPreference,authorAvatarUrl:$.avatarUrl,authorLogin:$.login})}),(0,i.jsx)("div",{"aria-hidden":"true",className:(0,I.$)("position-absolute top-0 d-flex user-select-none",tI["comment-indicator"]),children:(0,i.jsx)(e2,{shouldAnimateRef:eS,lineSpacingPreference:$.lineSpacingPreference})})]}),(0,i.jsx)(tk,{diffLine:m})]})}),tM=(0,l.memo)(tT),tO=(0,l.memo)(tP);function tP({children:e,columnIndex:t,handleDiffCellClick:n,handleDiffSideCellSelectionBlocking:r,firstLineNumberSelection:a,filePath:s,copilotChatReference:o,contentRef:d,...c}){let u=(0,l.useRef)(null),{diffLine:f,fileAnchor:m,isLeftSide:h,isRowSelected:p}=F(),{updateSelectedDiffRowRange:g}=L(),x=(0,l.useCallback)(()=>{a&&null!==a.current&&g(m,h?f.left:f.right,h?"left":"right",!0,!0)},[m,h,f.left,f.right,a,g]),y=(0,l.useCallback)(()=>{g(m,h?f.left:f.right,h?"left":"right",!1,!0)},[m,h,f.left,f.right,g]);return(0,i.jsx)(t_,{ref:u,className:(0,I.$)("diff-line-number position-relative",tE.includes(f.type)&&"diff-line-number-neutral"),columnIndex:t,handleDiffCellClick:n,handleDiffSideCellSelectionBlocking:r,firstLineNumberSelection:a,style:{backgroundColor:(0,b.Yf)(f.type,!0,p),textAlign:"center"},handleDiffCellMouseDown:y,onMouseEnter:x,...c,children:(0,i.jsx)("code",{children:e})})}function t$({ContextMenu:e,renderHunkButton:t,searchResultsForLine:n,focusedSearchResult:r}){let a=(0,l.useRef)(null),[s,d]=function(e){let[t,n]=(0,l.useState)(!1),[i,r]=(0,l.useState)(!1),a=(0,l.useCallback)(t=>{e.current&&e.current.contains(t.relatedTarget)||n(!1)},[e]),s=(0,l.useCallback)(()=>{e.current===document.activeElement&&n(!0)},[e]),o=(0,l.useCallback)(t=>{e.current&&!e.current.contains(t.relatedTarget)&&n(!1),r(!1)},[e]),d=(0,l.useCallback)(e=>{e.stopPropagation(),r(!0)},[]);return[{onFocus:s,onBlur:a},{"aria-hidden":!i,tabIndex:t?0:-1,onBlur:o,onFocusCapture:d,onKeyDownCapture:(0,l.useCallback)(e=>{q(e.key)&&e.stopPropagation()},[])}]}(a),{diffLine:c}=F();return(0,i.jsx)(t_,{ref:a,ContextMenu:e,colSpan:4,columnIndex:0,style:{backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",flexGrow:1},...s,className:"diff-hunk-cell",children:(0,i.jsxs)("div",{className:"d-flex flex-row",children:[t?.(d)??(0,i.jsx)(tA,{}),(0,i.jsxs)("code",{className:"diff-text-cell hunk",children:[n&&n.length>0&&(0,i.jsx)(tS,{searchResults:n,focusedSearchResult:r,className:(0,I.$)("diff-text-inner",{"color-fg-muted":"HUNK"===c.type})}),(0,i.jsx)(o.mo,{className:"diff-text-inner color-fg-muted",html:c.html})]})]})})}function tF({columnIndex:e,showRightBorder:t}){return(0,i.jsx)(t_,{ContextMenu:(0,i.jsx)(ta,{}),className:(0,I.$)("empty-diff-line",{"border-right":t}),columnIndex:e})}try{t_.displayName||(t_.displayName="Cell")}catch{}try{tA.displayName||(tA.displayName="HunkKebabIcon")}catch{}try{tT.displayName||(tT.displayName="ContentCellUnmemoized")}catch{}try{tM.displayName||(tM.displayName="ContentCell")}catch{}try{tO.displayName||(tO.displayName="LineNumberCell")}catch{}try{tP.displayName||(tP.displayName="LineNumberCellUnmemoized")}catch{}try{t$.displayName||(t$.displayName="HunkCell")}catch{}try{tF.displayName||(tF.displayName="EmptyCell")}catch{}var tU=n(21728),tH=n(94977);function tB(){let e,t=(0,tU.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(tH.A,{direction:"n",text:"This line has hidden Unicode characters",children:(0,i.jsx)(R.AlertIcon,{className:"mr-2"})}),t[0]=e):e=t[0],e}try{tB.displayName||(tB.displayName="HiddenUnicodeAlert")}catch{}let tz=({resultsForLine:e,focusedSearchResult:t,handleDiffSideCellSelectionBlocking:n,handleDiffRowClick:r,lineAnchor:a,filePath:s,copilotChatReference:o,firstLineNumberSelection:d})=>{let{diffLine:c,hasHiddenUnicodeCharacters:u,isLeftSide:f,isSplit:m,setInGridMode:h}=F(),p=(0,l.useRef)(null),g="ADDITION"!==c.type,x=!m||f,b=x&&!g,y="DELETION"!==c.type,v=!m||!f,C=v&&!y,N=(0,l.useCallback)(e=>{c.left&&r(e,c.left,"left",e.shiftKey,!0)},[r,c.left]),j=(0,l.useCallback)(e=>{c.left&&r(e,c.left,"left",e.shiftKey,!1)},[r,c.left]),w=(0,l.useCallback)(e=>{c.right&&r(e,c.right,"right",e.shiftKey,!0)},[r,c.right]),L=(0,l.useCallback)(e=>{c.right&&r(e,c.right,"right",e.shiftKey,!1)},[r,c.right]),S=(0,l.useCallback)(()=>{n&&n("left")},[n]),k=(0,l.useCallback)(()=>{n&&n("right")},[n]);return(0,i.jsxs)(eG,{line:c,children:[x&&(0,i.jsxs)(tO,{copilotChatReference:o,columnIndex:0,filePath:s,handleDiffCellClick:b?w:N,handleDiffSideCellSelectionBlocking:k,firstLineNumberSelection:d,contentRef:p,children:[u&&!y&&(0,i.jsx)(tV,{children:(0,i.jsx)(tB,{})}),g&&c.left]}),v&&(0,i.jsxs)(tO,{copilotChatReference:o,columnIndex:m?2:1,filePath:s,handleDiffCellClick:C?N:w,handleDiffSideCellSelectionBlocking:S,firstLineNumberSelection:d,contentRef:p,children:[u&&y&&(0,i.jsx)(tV,{children:(0,i.jsx)(tB,{})}),y&&c.right]}),(0,i.jsx)(Y.f,{enableDiffGridMode:h,children:(0,i.jsx)(tM,{copilotChatReference:o,columnIndex:m?f?1:3:2,filePath:s,handleDiffCellClick:f?j:L,lineAnchor:a,handleDiffSideCellSelectionBlocking:f?k:S,searchResultsForLine:e,focusedSearchResult:t,firstLineNumberSelection:d,ref:p})})]})},tG=({resultsForLine:e,focusedSearchResult:t,fileAnchor:n,filePath:r,handleDiffRowClick:l,handleDiffSideCellSelectionBlocking:a,copilotChatReference:s,firstLineNumberSelection:o})=>{let{diffLine:d,isLeftSide:c}=F();if((0,b.Po)(d))return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tF,{columnIndex:2*!c}),(0,i.jsx)(tF,{columnIndex:c?1:3,showRightBorder:c})]});let u=c?"left":(0,m.XU)(d.type),f="left"===u?d.left:d.right,h=(0,m.IQ)(n,u,f??0);switch(d.type){case"HUNK":return null;case"ADDITION":case"DELETION":case"CONTEXT":case"INJECTED_CONTEXT":return(0,i.jsx)(tK,{copilotChatReference:s,filePath:r,handleDiffRowClick:l,handleDiffSideCellSelectionBlocking:a,lineAnchor:h,resultsForLine:e,focusedSearchResult:t,firstLineNumberSelection:o});default:throw Error(`cannot handle type ${d.type}`)}};function tV({children:e}){return(0,i.jsx)("span",{className:"position-absolute",style:{left:"-1px",zIndex:"1"},children:e})}let tW=l.memo(tG),tK=l.memo(tz);try{tz.displayName||(tz.displayName="CodeDiffLineUnmemoized")}catch{}try{tG.displayName||(tG.displayName="DiffLineSideUnmemoized")}catch{}try{tV.displayName||(tV.displayName="DiffCodeAlert")}catch{}try{tW.displayName||(tW.displayName="DiffLineSide")}catch{}try{tK.displayName||(tK.displayName="CodeDiffLine")}catch{}let tq={"expand-button-line":"ExpandableHunkHeaderDiffLine-module__expand-button-line--rnQN5","expand-up-and-down":"ExpandableHunkHeaderDiffLine-module__expand-up-and-down--hCan_","expand-button-unified":"ExpandableHunkHeaderDiffLine-module__expand-button-unified--j86KQ"};function tX({direction:e,icon:t,label:n,onClick:r,ariaLabel:l,className:a,...s}){let{sendAnalyticsEvent:o}=(0,eh.s)(),{isSplit:d}=F();return(0,i.jsx)("button",{onClick:()=>{r(),o("file_entry.expand_hunk","FILE_EXPANDER_BUTTON")},className:(0,I.$)("Button Button--iconOnly Button--invisible",tq["expand-button-line"],!d&&tq["expand-button-unified"],a),"aria-label":l??n,"data-direction":e,...s,children:(0,i.jsx)(t,{})})}function tJ({nextLine:e,prevLine:t,resultsForLine:n,focusedSearchResult:r}){let{fileLineCount:a,diffLine:s}=F(),{expandStartOfHunk:o,expandEndOfPreviousHunk:d}=e5(),c=!t,u=!e,f=0===s.blobLineNumber,m=c||u,h=u&&s.blobLineNumber===a,p=(0,l.useMemo)(()=>!m&&!(s.blobLineNumber<=0)&&(!!(s.blobLineNumber-t.blobLineNumber<=20)||!!(e.blobLineNumber-s.blobLineNumber>=20)),[m,s,e,t]),g=(0,l.useMemo)(()=>!m&&!h&&s.blobLineNumber-t.blobLineNumber>20,[m,h,s,t]),x=(0,l.useMemo)(()=>!(s.blobLineNumber<=0)&&!f&&!!c,[c,f,s]),y=(0,l.useMemo)(()=>!c&&!h&&!!u,[c,u,h]),v=(0,l.useMemo)(()=>{switch(!0){case p:return"expand-all";case g:return"expand-up-and-down";case x:return"expand-up";case y:return"expand-down"}},[p,g,x,y]),C=()=>o(),N=()=>d(),j=()=>o();return(0,i.jsx)(t$,{searchResultsForLine:n,focusedSearchResult:r,renderHunkButton:n=>{switch(v){case"expand-all":return(0,i.jsx)(tX,{...n,direction:"all",icon:R.UnfoldIcon,label:`Expand file from line ${t?.blobLineNumber||""} to line ${e?.blobLineNumber||""}`,onClick:j});case"expand-up-and-down":return(0,i.jsxs)("div",{className:"d-flex flex-column",children:[(0,i.jsx)(tX,{...n,direction:"down",icon:R.FoldDownIcon,label:`Expand file down from line ${t?.blobLineNumber||""}`,className:tq["expand-up-and-down"],onClick:N}),(0,i.jsx)(tX,{...n,direction:"up",icon:R.FoldUpIcon,label:`Expand file up from line ${e?.blobLineNumber||""}`,className:tq["expand-up-and-down"],onClick:C})]});case"expand-up":return(0,i.jsx)(tX,{...n,direction:"up",icon:R.FoldUpIcon,label:`Expand file up from line ${e?.blobLineNumber||""}`,onClick:C});case"expand-down":return(0,i.jsx)(tX,{...n,direction:"down",icon:R.FoldDownIcon,label:`Expand file down from line ${t?.blobLineNumber||""}`,onClick:N});default:return null}},ContextMenu:(0,i.jsx)(tY,{handleCopyContent:()=>{let[e]=(0,b.x_)((0,b.ZC)(s.html),s.type);(0,eT.D)(e)},handleExpandAbove:C,handleExpandAll:j,handleExpandBelow:N,shouldCopyContent:!!s.html,shouldExpandAbove:g||x,shouldExpandBelow:g||y})})}function tY({shouldExpandBelow:e,shouldExpandAbove:t,shouldCopyContent:n,handleExpandAll:r,handleExpandBelow:l,handleExpandAbove:a,handleCopyContent:s}){let o={includeShiftKey:!0,key:"["},d={key:"]"},c={key:"["},u={key:"C"};return(0,i.jsx)(e_.W.Overlay,{width:"medium",children:(0,i.jsxs)(eA.l,{children:[(0,i.jsxs)(eA.l.Item,{"aria-keyshortcuts":(0,b.oE)(o),onSelect:r,children:[(0,i.jsx)(eA.l.LeadingVisual,{children:(0,i.jsx)(R.UnfoldIcon,{})}),"Expand all",(0,i.jsx)(eA.l.TrailingVisual,{children:(0,i.jsx)("span",{children:`${(0,b.pI)(o)}`})})]}),t?(0,i.jsxs)(eA.l.Item,{"aria-keyshortcuts":(0,b.oE)(d),onSelect:a,children:[(0,i.jsx)(eA.l.LeadingVisual,{children:(0,i.jsx)(R.FoldUpIcon,{})}),"Expand above",(0,i.jsx)(eA.l.TrailingVisual,{children:(0,i.jsx)("span",{children:`${(0,b.pI)(d)}`})})]}):null,e?(0,i.jsxs)(eA.l.Item,{"aria-keyshortcuts":(0,b.oE)(c),onSelect:l,children:[(0,i.jsx)(eA.l.LeadingVisual,{children:(0,i.jsx)(R.FoldDownIcon,{})}),"Expand below",(0,i.jsx)(eA.l.TrailingVisual,{children:(0,i.jsx)("span",{children:`${(0,b.pI)(c)}`})})]}):null,(0,i.jsx)(tx,{}),n?(0,i.jsxs)(eA.l.Item,{"aria-keyshortcuts":(0,b.oE)(u),onSelect:s,children:[(0,i.jsx)(eA.l.LeadingVisual,{children:(0,i.jsx)(R.CopyIcon,{})}),"Copy",(0,i.jsx)(eA.l.TrailingVisual,{children:(0,i.jsx)("span",{children:`${(0,b.pI)(u)}`})})]}):null]})})}try{tX.displayName||(tX.displayName="ExpandButtonLine")}catch{}try{tJ.displayName||(tJ.displayName="ExpandableHunkHeaderDiffLine")}catch{}try{tY.displayName||(tY.displayName="HunkContextMenu")}catch{}var tQ=n(83829),tZ=n(81351);let t0=(0,l.memo)(function({searchResults:e,diffContext:t="pr",focusedSearchResult:n,clearSelectedDiffRowRange:r,diffEntryId:a,diffHasHiddenUnicodeCharacters:s,diffLines:o,fileAnchor:d,fileLineCount:c,filePath:u,handleDiffRowClick:f,handleDiffSideCellSelectionBlocking:m,replaceSelectedDiffRowRangeFromGridCells:h,selectedDiffRowRange:p,setInGridMode:g,showHiddenUnicode:x,tableRef:v,updateDiffLines:C,copilotChatReference:N,inGridMode:j,firstLineNumberSelection:w}){let{leftLines:L,rightLines:S}=function(e){let t=e.reduce((e,t)=>e+(t.threadsData?.totalCount??0),0)??0,{leftLines:n,rightLines:i}=(0,l.useMemo)(()=>(function(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(J.V);for(;n.length<t.length;)n.push(J.V)};for(let l of e)switch(l.type){case"ADDITION":n.push(l);break;case"DELETION":t.push(l);break;case"CONTEXT":case"INJECTED_CONTEXT":var r;i();let[e,a]=[{...r=l,threadsData:void 0,annotationsData:void 0},{...r,threadsData:r.threadsData?{...r.threadsData,threads:r.threadsData.threads,totalCommentsCount:r.threadsData.totalCommentsCount,totalCount:r.threadsData.totalCount}:void 0}];t.push(e),n.push(a);break;case"HUNK":i(),t.push(l),n.push(l)}return i(),{leftLines:t,rightLines:n}})(e),[e,t]);return{leftLines:n,rightLines:i}}(o),{ghostUser:k}=e$();X({clearSelectedDiffRowRange:r,containerRef:v,fileAnchor:d,isSplitDiff:!0,leftLines:L,replaceSelectedDiffRowRangeFromGridCells:h,rightLines:S,disabled:!j});let I=(0,l.useMemo)(()=>{if(p)return y({selectedDiffRowRange:p,leftLines:L,rightLines:S,isNumberCell:!0})},[p,L,S]);(0,l.useEffect)(()=>{C(d,o)},[o,d,C]);let D=(0,l.useMemo)(()=>O(L),[L]),E=new Map,R=new Map,_=new Map;for(let t=0;t<(e?.length??0);t++){let n=e?.[t];n&&(E.has(n.leftLineNumber)?E.get(n.leftLineNumber)?.push(n):-1!==n.leftLineNumber&&E.set(n.leftLineNumber,[n]),_.has(n.hunkLineNumber)?_.get(n.hunkLineNumber)?.push(n):n.isHunk&&_.set(n.hunkLineNumber,[n]),R.has(n.rightLineNumber)?R.get(n.rightLineNumber)?.push(n):-1!==n.rightLineNumber&&R.set(n.rightLineNumber,[n]))}let A=e=>{let t=!1;return s&&!(0,b.Po)(e)&&(t=(0,tQ.Y)(e.text),x&&t&&(e=e.html?{...e,html:(0,tZ.Gx)(e.html)??e.html}:{...e,text:(0,tQ.TA)(e.text)})),[e,t]},T=[];for(let e=0;e<L.length;e++){let r=L[e],l=S[e],s=L[e-1],[o,h]=A(r),[p,x]=A(l),y=(0,b.Po)(L[e+1])?S[e+1]:L[e+1],v=(0,b.qK)(o)&&"HUNK"===o.type,C=(0,b.qX)(d,o,p),j=(0,b.Po)(o)?(0,b.Po)(p)?void 0:p:o;if(!j)continue;let O=(0,b.Po)(o)?void 0:o.threadsData,P=(0,b.Po)(p)?void 0:p.threadsData,{currentHunk:F,nextHunk:H,previousHunk:B}=M(j,D),z=E.get((0,b.Po)(o)?-2:o.left??-2),G=R.get((0,b.Po)(p)?-2:p.right??-2),V=_.get(j.blobLineNumber),W=V?.[0]?.rightLineNumber===p?.right?n:void 0,K=z?.[0]?.leftLineNumber===o?.left?n:void 0,q=G?.[0]?.rightLineNumber===p?.right?n:void 0,X=U(P,k),J=U(O,k),Y={currentHunk:F,diffEntryId:a,fileAnchor:d,fileLineCount:c,filePath:u,isRowSelected:(I?.isRowSelected(r)||I?.isRowSelected(l))??!1,nextHunk:H,previousHunk:B,rowId:C,isSplit:!0,diffContext:t,setInGridMode:g};T.push((0,i.jsx)("tr",{className:"diff-line-row",children:v?(0,i.jsx)($,{...Y,hasHiddenUnicodeCharacters:h||x,diffLine:j,modifiedLineThreads:X,originalLineThreads:J,children:(0,i.jsx)(tJ,{nextLine:y,prevLine:s,focusedSearchResult:W,resultsForLine:V})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)($,{...Y,diffLine:o,hasHiddenUnicodeCharacters:h,isLeftSide:!0,modifiedLineThreads:X,originalLineThreads:J,children:(0,i.jsx)(tW,{copilotChatReference:N,fileAnchor:d,filePath:u,handleDiffRowClick:f,handleDiffSideCellSelectionBlocking:m,resultsForLine:z,focusedSearchResult:K,firstLineNumberSelection:w})}),(0,i.jsx)($,{...Y,diffLine:p,hasHiddenUnicodeCharacters:x,modifiedLineThreads:X,originalLineThreads:J,children:(0,i.jsx)(tW,{copilotChatReference:N,fileAnchor:d,filePath:u,handleDiffRowClick:f,handleDiffSideCellSelectionBlocking:m,resultsForLine:G,focusedSearchResult:q,firstLineNumberSelection:w})})]})},C))}return(0,i.jsx)(i.Fragment,{children:T})});try{t0.displayName||(t0.displayName="SplitDiffLines")}catch{}let t1=(0,l.memo)(function({searchResults:e,diffContext:t="pr",focusedSearchResult:n,clearSelectedDiffRowRange:r,diffEntryId:a,diffHasHiddenUnicodeCharacters:s,diffLines:o,fileLineCount:d,fileAnchor:c,filePath:u,tableRef:f,selectedDiffRowRange:h,showHiddenUnicode:p,handleDiffRowClick:g,updateDiffLines:x,replaceSelectedDiffRowRangeFromGridCells:v,copilotChatReference:C,setInGridMode:N,inGridMode:j,firstLineNumberSelection:w}){X({clearSelectedDiffRowRange:r,containerRef:f,fileAnchor:c,isSplitDiff:!1,leftLines:o,replaceSelectedDiffRowRangeFromGridCells:v,disabled:!j});let L=(0,l.useMemo)(()=>{if(h)return y({selectedDiffRowRange:h,leftLines:o,isNumberCell:!0})},[h,o]),S=(0,l.useMemo)(()=>O(o.map(e=>e)),[o]);(0,l.useEffect)(()=>{x(c,o)},[o,c,x]);let k=new Map;for(let t=0;t<(e?.length??0);t++){let n=e?.[t];n&&(e&&k.has(n.diffLineNumIndex)?k.get(n.diffLineNumIndex)?.push(n):e&&k.set(n.diffLineNumIndex,[n]))}let I=o.map((e,r)=>{let l=e,f=o[r+1],h=o[r-1],x="HUNK"===e.type,y=(0,m.IQ)(c,(0,m.XU)(l.type),l.blobLineNumber),{currentHunk:v,nextHunk:j,previousHunk:I}=M(l,S),D=k.get(r),E=r===D?.[0]?.diffLineNumIndex?n:void 0,R=L?.isRowSelected(e)??!1,_=(0,b.qX)(c,l,l),A=s&&(0,tQ.Y)(l.text);p&&A&&(l=l.html?{...l,html:(0,tZ.Gx)(l.html)??l.html}:{...l,text:(0,tQ.TA)(l.text)});let T={diffEntryId:a,diffLine:l,currentHunk:v,fileAnchor:c,fileLineCount:d,filePath:u,hasHiddenUnicodeCharacters:A,isLeftSide:"DELETION"===l.type,isRowSelected:R,isSplit:!1,nextHunk:j,previousHunk:I,diffContext:t,rowId:_,setInGridMode:N};return(0,i.jsx)("tr",{className:"diff-line-row",children:(0,i.jsx)($,{...T,children:x?(0,i.jsx)(tJ,{nextLine:f,prevLine:h,focusedSearchResult:E,resultsForLine:D}):(0,i.jsx)(tK,{filePath:u,copilotChatReference:C,handleDiffRowClick:g,firstLineNumberSelection:w,lineAnchor:y,resultsForLine:D,focusedSearchResult:E})})},_)});return(0,i.jsx)(i.Fragment,{children:I})});try{t1.displayName||(t1.displayName="UnifiedDiffLines")}catch{}let t2={tableLayoutFixed:"DiffLines-module__tableLayoutFixed--YZcIJ",compact:"DiffLines-module__compact--wEEom"};var t3=n(80663);function t4(e){let t,n,r,l,a,s=(0,tU.c)(7),{isShown:o,toggleShowHiddenCharacters:d}=e;s[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],s[0]=t):t=s[0];let[c]=(0,t3.I)(t6,g.cg,t);if(!c)return null;s[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(R.AlertIcon,{}),s[1]=n):n=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,i.jsxs)("span",{children:["This file contains bidirectional or hidden Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters."," ",(0,i.jsx)(h.A,{inline:!0,href:"https://github.co/hiddenchars",target:"_blank",rel:"noreferrer",children:"Learn more about bidirectional Unicode characters"})]}),s[2]=r):r=s[2],s[3]===Symbol.for("react.memo_cache_sentinel")?(l={backgroundClip:"padding-box"},s[3]=l):l=s[3];let u=o?"Hide revealed characters":"Show hidden characters";return s[4]!==u||s[5]!==d?(a=(0,i.jsxs)(eg.A,{className:"d-flex flex-items-center",full:!0,variant:"warning",children:[n,r,(0,i.jsx)(D.Q,{className:"ml-4 float-right",onClick:d,size:"small",style:l,children:u})]}),s[4]=u,s[5]=d,s[6]=a):a=s[6],a}function t6(){return g.cg}try{t4.displayName||(t4.displayName="HiddenUnicodeBanner")}catch{}function t8({diffAnchor:e,children:t}){return(0,i.jsx)("div",{className:"fgColor-muted p-2","data-diff-anchor":e,children:t})}let t5=(0,l.memo)(function({searchResults:e,diffContext:t="pr",focusedSearchResult:n,diffEntryData:r,diffLinesManuallyUnhidden:l,baseHelpUrl:a,onHandleLoadDiff:s,copilotChatReference:o,hasExpandedAllRanges:d,...c}){let f=`diff-${r.pathDigest}`;if(r.isBinary)return(0,i.jsx)(t8,{diffAnchor:f,children:"Binary file not shown."});if((0,u.dK)(r))return(0,i.jsx)(t8,{diffAnchor:f,children:"File renamed without changes."});if((0,u.Jc)(r))return(0,i.jsx)(t8,{diffAnchor:f,children:"File copied without changes."});if((0,u.Sn)(r,r.status,r.oldTreeEntry?.mode,r.newTreeEntry?.mode))return(0,i.jsx)(t8,{diffAnchor:f,children:"File mode changed."});if(!l&&(0,u.HI)(r))return(0,i.jsx)(_,{diffAnchor:f,onLoadDiff:s,children:(0,u.l_)(r.truncatedReason)});if((0,u.s8)(r))return(0,i.jsx)(t8,{diffAnchor:f,children:"Whitespace-only changes."});if(!l&&(0,u.lO)(r))return(0,i.jsx)(_,{diffAnchor:f,onLoadDiff:s,children:"This file was deleted."});if(!l&&(0,u.xW)(r))return(0,i.jsxs)(_,{diffAnchor:f,helpText:"customizing how changed files appear on GitHub.",helpUrl:`${a}/github/administering-a-repository/customizing-how-changed-files-appear-on-github`,onLoadDiff:s,children:["Some generated files are not rendered by default. Learn more about"," "]});if(r.isTooBig&&0===r.diffLines.length)if(l)return(0,i.jsxs)(t8,{diffAnchor:f,children:["Diff is too big to render. To view,"," ",(0,i.jsx)(h.A,{inline:!0,href:`${a}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`,children:"check out this pull request locally."})]});else return(0,i.jsx)(_,{diffAnchor:f,onLoadDiff:s,children:"Large diffs are not rendered by default."});return r.diffLines?(0,i.jsx)(eP,{...c,children:(0,i.jsx)(k,{children:(0,i.jsx)(t9,{diffAnchor:f,diffContext:t,diffEntryData:r,viewerData:c.viewerData,focusedSearchResult:n,searchResults:e,copilotChatReference:o,hasExpandedAllRanges:d})})}):null});function t9({diffAnchor:e,viewerData:t,diffEntryData:n,searchResults:r,focusedSearchResult:a,copilotChatReference:s,diffContext:o,hasExpandedAllRanges:d}){let c=(0,l.useRef)(null),[u,h]=(0,l.useState)(!0),[p,x]=(0,l.useState)(null),[y,v]=(0,l.useState)(!1),C=n.newTreeEntry?.lineCount??n.oldTreeEntry?.lineCount??0,N=(0,l.useMemo)(()=>{let e=n.diffLines[n.diffLines.length-1];return e?.blobLineNumber&&e.blobLineNumber<C?n.diffLines.concat({__id:A.finalLineId,blobLineNumber:e.blobLineNumber+1,left:null,right:null,type:"HUNK",html:"",text:""}):n.diffLines},[n.diffLines,C]),{diffViewPreference:j,lineSpacingPreference:w,tabSizePreference:S}=t,{selectedDiffRowRange:k,replaceSelectedDiffRowRange:D,replaceSelectedDiffRowRangeFromGridCells:E,clearSelectedDiffRowRange:R,updateDiffLines:_,updateSelectedDiffRowRange:T}=L(),M=(0,l.useCallback)(e=>{if(!c.current||!e.target)return;let t=e.target,n=t.closest("td.diff-line-number"),i=c.current.contains(t);n&&!i&&(R(),B.current=null)},[R,c]);(0,l.useEffect)(()=>(g.XC?.addEventListener("mousedown",M),()=>{g.XC?.removeEventListener("mousedown",M)}),[M]);let O=e===k?.diffAnchor,P=(0,l.useMemo)(()=>{let e,t=n.status,i=n.oldTreeEntry?.path,r=n.newTreeEntry?.path;if(i||r)return e="RENAMED"===t?`${i} renamed to ${r}`:"DELETED"===t||"REMOVED"===t?i:r,`Diff for: ${e}`},[n]);(0,l.useEffect)(()=>{if(!O)return;let e=(0,b.On)(k,N);e&&e!==k&&D(e)},[N,k,O,D]);let $=g.cg?.location.search,F=(0,l.useMemo)(()=>"split"===new URLSearchParams($).get("diff")||"split"===j,[$,j]),U=(0,m.c7)(N),H=(0,l.useCallback)(e=>{x(e)},[x]),B=(0,l.useRef)(null),z=(0,l.useCallback)(e=>{if(e.shiftKey&&e.metaKey&&"ArrowLeft"===e.key&&!d&&u&&e.target?.getAttribute("role")==="gridcell"){let e=document.querySelector(`.js-expand-all-difflines-button[data-file-path="${n.path}"]`);e?.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0}))}},[d,u,n.path]),G=(0,l.useCallback)((t,n,i,r,l)=>{!function(e){let t=document.getElementById("__primerPortalRoot__");return!!t&&!!e&&t.contains(e)}(t.target)&&!t.defaultPrevented&&l&&T(e,n,i,r,l)},[e,T]),V=(0,l.useCallback)(e=>{let t=document.getSelection();if(t){let n=[];for(let e=0;e<t.rangeCount;e++){let i=t.getRangeAt(e).cloneContents();if(i.querySelectorAll("td").length){let e=`td.diff-line-number, span.diff-text-marker${F?`, ${"left"===p?"td.left-side-diff-cell":"td.right-side-diff-cell"}`:""}`;for(let t of i.querySelectorAll(e))t.parentNode&&t.parentNode.removeChild(t);for(let e of i.children){let t=e.textContent;`
`===t?n.push(""):n.push(t)}}else 1===t.rangeCount?n.push(t.toString()):n.push(i.textContent)}e.clipboardData.setData("text/plain",n.join(`
`)),e.preventDefault()}},[p,F]),W=(0,l.useMemo)(()=>N.some(e=>(0,tQ.Y)(e.text)),[N]),K={searchResults:r,diffContext:o,focusedSearchResult:a,clearSelectedDiffRowRange:R,diffEntryId:n.objectId,diffHasHiddenUnicodeCharacters:W,diffLines:N,fileAnchor:e,fileLineCount:C,filePath:n.path,handleDiffRowClick:G,handleDiffSideCellSelectionBlocking:H,replaceSelectedDiffRowRangeFromGridCells:E,selectedDiffRowRange:O?k:null,showHiddenUnicode:y,tableRef:c,updateDiffLines:_,updateSelectedDiffRowRange:T,copilotChatReference:s,setInGridMode:h,inGridMode:u,firstLineNumberSelection:B};return(0,i.jsxs)(i.Fragment,{children:[W&&(0,i.jsx)(t4,{isShown:y,toggleShowHiddenCharacters:()=>v(!y)}),(0,i.jsx)("table",{"aria-label":P,onKeyDown:z,ref:c,className:(0,I.$)("tab-size","width-full",t2.tableLayoutFixed,{[t2.compact]:"compact"===w}),"data-block-diff-cell-selection":p,"data-diff-anchor":e,"data-tab-size":S,"data-paste-markdown-skip":!0,onCopy:V,role:"grid",style:{"--line-number-cell-width":`${U}px`,"--line-number-cell-width-unified":`${2*parseFloat(U)}px`},children:F?(0,i.jsx)(f.wj,{lineWidth:U,children:(0,i.jsx)(t0,{...K})}):(0,i.jsx)(f.Qe,{lineWidth:U,children:(0,i.jsx)(t1,{...K})})})]})}try{t8.displayName||(t8.displayName="PlainTextStatus")}catch{}try{t5.displayName||(t5.displayName="DiffLines")}catch{}try{t9.displayName||(t9.displayName="CodeDiffLines")}catch{}var t7=n(60281),ne=n(46309),nt=n(58990);let nn={filesActionList:"SubmoduleDiff-module__filesActionList--Uek7G",fileRowLinkItem:"SubmoduleDiff-module__fileRowLinkItem--ebKNW",path:"SubmoduleDiff-module__path--GK9U6",fileRow:"SubmoduleDiff-module__fileRow--ohBMr",linesAdded:"SubmoduleDiff-module__linesAdded--jgi_y",linesDeleted:"SubmoduleDiff-module__linesDeleted--C3uEX"};function ni({submodule:e}){let{basePath:t,changedFiles:n,contentsUrl:r,newCommitOid:a,oldCommitOid:s,status:o,submoduleUrl:d}=e,c=e.summary.length>0&&e.contentsUrl&&"MODIFIED"===o,u=(0,l.useMemo)(()=>{switch(o){case"ADDED":return(0,i.jsx)(na,{commitOid:a,contentsUrl:r,type:"added"});case"DELETED":case"REMOVED":return(0,i.jsx)(na,{commitOid:s,contentsUrl:r,type:"deleted"});default:return(0,i.jsx)(ns,{newCommitOid:a,oldCommitOid:s,changedFiles:n,contentsUrl:r})}},[a,s,o,n,r]);return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:`px-3 py-2 ${c?"border-bottom bgColor-muted":""}`,children:[(0,i.jsx)(R.FileSubmoduleIcon,{className:"fgColor-muted mr-2",size:16}),(0,i.jsx)(nr,{basePath:t,submoduleUrl:d}),u]}),c&&(0,i.jsx)(eA.l,{className:nn.filesActionList,showDividers:!0,variant:"full",children:e.summary.map(e=>(0,i.jsx)(no,{compareUrl:`${r}/compare/${s}...${a}`,linesAdded:e.linesAdded,linesDeleted:e.linesDeleted,path:e.path,pathDigest:e.pathDigest,status:e.status},e.pathDigest))})]})}function nr({basePath:e,submoduleUrl:t}){return(0,i.jsxs)(i.Fragment,{children:["Submodule"," ",t?(0,i.jsx)(h.A,{inline:!0,href:t,children:e}):e," "]})}function nl(e){return e.slice(0,7)}function na({commitOid:e="",contentsUrl:t,type:n}){let r="added"===n?"added at":"deleted from";return t?(0,i.jsxs)(i.Fragment,{children:[r," ",(0,i.jsx)(h.A,{inline:!0,href:`${t}/tree/${e}`,children:nl(e)})]}):(0,i.jsxs)(i.Fragment,{children:[r," ",nl(e)]})}function ns({newCommitOid:e="",oldCommitOid:t="",changedFiles:n=0,contentsUrl:r}){let l=n>0&&r?`${n} ${1===n?"file":"files"}`:`from ${nl(t)} to ${nl(e)}`;return(0,i.jsxs)(i.Fragment,{children:["updated"," ",r?(0,i.jsx)(h.A,{inline:!0,href:`${r}/compare/${t}...${e}`,children:l}):l]})}function no({compareUrl:e,linesAdded:t,linesDeleted:n,path:l,pathDigest:a,status:s}){return(0,i.jsx)(eA.l.LinkItem,{href:`${e}#diff-${a}`,className:nn.fileRowLinkItem,children:(0,i.jsxs)(ne.B,{gap:"condensed",direction:"horizontal",align:"center",className:nn.fileRow,children:[(0,i.jsx)(nt.E,{status:s}),(0,i.jsxs)("div",{className:"d-flex gap-1 flex-justify-between width-full",children:[(0,i.jsx)("span",{className:nn.path,children:l}),(t>0||n>0)&&(0,i.jsxs)("div",{className:"d-flex flex-shrink-0 gap-1 flex-nowrap",children:[(0,i.jsx)("div",{className:nn.linesAdded,children:t>0&&(0,i.jsxs)(r.C,{isAddition:!0,children:["+",nd(t)]})}),(0,i.jsx)("div",{className:nn.linesDeleted,children:n>0&&(0,i.jsxs)(r.C,{isAddition:!1,children:["-",nd(n)]})})]})]})]})})}function nd(e){return e>999?`${(e/1e3).toFixed(1)}k`:e.toLocaleString()}try{ni.displayName||(ni.displayName="SubmoduleDiff")}catch{}try{nr.displayName||(nr.displayName="SubmodulePath")}catch{}try{na.displayName||(na.displayName="SubmoduleCommitChange")}catch{}try{ns.displayName||(ns.displayName="SubmoduleModified")}catch{}try{no.displayName||(no.displayName="SubmoduleFileRow")}catch{}var nc=n(96235);let nu=({hasCopilotAccess:e,isBinary:t,isSubmodule:n,path:i,repository:r,status:l})=>!!e&&!t&&!n&&!!i&&"DELETED"!==l&&"REMOVED"!==l&&!!r.id&&!!r.name&&!!r.ownerLogin&&!0,nf=({newCommitOid:e,newTreeEntry:t,oldCommitOid:n,oldTreeEntry:i,path:r,pathDigest:l,repository:a})=>{let s=n&&e?(0,nc.IO9)({repo:a,commitish:n,action:"raw",path:r}):"";return{baseFile:nm({path:i?.path,oid:n,repository:a}),headFile:nm({path:t?.path,oid:e,repository:a}),baseBranchRef:n,id:`#diff-${l}`,type:"file-diff",url:s}},nm=({path:e,oid:t,repository:n})=>e&&t?{type:"file",url:(0,nc.IO9)({repo:n,commitish:t,action:"raw",path:e}),path:e,repoID:n.id,repoName:n.name,repoOwner:n.ownerLogin,ref:t,commitOID:t}:null;function nh({batchPending:e,commentingImplementation:t,fileAnchor:n,filePath:r,thread:a,isFirstThread:s,ghostUser:o,manuallyUpdateCommentsWithThisThreadId:c,...u}){let{resolveThread:f,unresolveThread:m,resolvingEnabled:h}=t,p=(0,l.useRef)(null),g=(0,em.A)("localStorage"),x=a?.isResolved,[b,y]=(0,l.useState)(""),[v,C]=(0,l.useState)(x??!1);(0,l.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${a.id}`);null!==e?C(JSON.parse(e)):x&&C(!0)},[x,a.id]);let{sendAnalyticsEvent:N}=(0,eh.s)();if(!a||!(a.commentsData.comments.length>0))return null;let j=!!a.isResolved,w=h&&a.commentsData.comments.some(e=>e.state?.toUpperCase()!=="PENDING");return(0,i.jsx)(ef.t,{fallback:(0,i.jsx)(ey,{}),children:(0,i.jsxs)("div",{className:"rounded-2 bgColor-default",ref:p,children:[(0,i.jsxs)(tb.A,{sx:{display:"flex",flexDirection:"row",width:"100%",alignItems:"center",borderBottom:"1px solid",borderColor:"border.muted"},className:"px-1",children:[(0,i.jsx)(Z.K,{"aria-label":v?"Expand comment":"Collapse comment",icon:v?R.ChevronRightIcon:R.ChevronDownIcon,size:"small",variant:"invisible",onClick:()=>{window.requestAnimationFrame(()=>{g.setItem(`reviewThreadIsCollapsed_${a.id}`,JSON.stringify(!v))}),C(e=>!e)},"data-is-first-collapse-button":s}),(0,i.jsxs)(tb.A,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center",justifyContent:"right",flexGrow:1},children:[j&&(0,i.jsx)(ep.A,{variant:"secondary",children:"Resolved"}),w&&(0,i.jsx)(ex.m,{text:j?"Unresolve conversation":"Resolve conversation",type:"label",direction:"w",id:"resolve-conversation",children:(0,i.jsx)(Z.K,{"aria-labelledby":"resolve-conversation",icon:j?R.CheckCircleFillIcon:R.CheckCircleIcon,sx:{color:j?"var(--fgColor-done, var(--color-done-fg)) !important":void 0},variant:"invisible",onClick:j?()=>{a&&(m({threadId:a.id,onCompleted:()=>{C(!1),g.removeItem(`reviewThreadIsCollapsed_${a.id}`)},onError:()=>{y("Failed to unresolve thread")}}),N("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))}:()=>{a&&(f({threadId:a.id,onCompleted:()=>{C(!0),g.removeItem(`reviewThreadIsCollapsed_${a.id}`)},onError:()=>{y("Failed to resolve thread")}}),N("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))}})})]})]}),(0,i.jsxs)(l.Suspense,{fallback:(0,i.jsxs)(tb.A,{sx:{height:"90px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",color:"fg.muted",fontSize:0},children:[(0,i.jsx)(d.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),children:[b&&(0,i.jsxs)(eg.A,{variant:"danger",className:"m-2",children:[(0,i.jsx)(R.StopIcon,{className:"mr-2"}),b]}),!v&&(0,i.jsx)(eC.H,{batchPending:e,batchingEnabled:t.batchingEnabled,commentingImplementation:t,filePath:r,isInlineComment:!1,onRefreshThread:()=>{},thread:a,shouldLimitHeight:!1,...u,ghostUser:o})]})]})})}try{nh.displayName||(nh.displayName="FileReviewThread")}catch{}function np({batchPending:e,commentingImplementation:t,conversationListThreads:n,filePath:r,selectedThreadId:a,manuallyUpdateCommentsWithThisThreadId:s,ghostUser:o,...d}){let c=(0,l.useRef)(null),u=a||(n.length>0?n[0]?.id:null);return ei({containerRef:c,markers:n,disabled:!1,focusInStrategy:"closest",selectedMarkerId:u}),(0,i.jsx)("div",{className:"d-flex pt-1 pl-1",children:(0,i.jsx)("div",{className:eu.fileMarkersWrapper,ref:c,children:n.map((l,a)=>(0,i.jsx)("div",{className:(0,I.$)("mt-1 border rounded-2 color-border-default color-shadow-small",a===n.length-1?"mb-1":"mb-2"),"data-first-marker":0===a,"data-marker-id":`${l.id}`,tabIndex:0,children:(0,i.jsx)(nh,{batchPending:e,commentingImplementation:t,repositoryId:d.repositoryId,subjectId:d.subjectId,subject:d.subject,viewerData:d.viewerData,filePath:r,thread:l,ghostUser:o},l.id)},`review-thread-${l.id}`))})})}try{np.displayName||(np.displayName="FileMarkers")}catch{}let ng=(0,l.forwardRef)(function({collapsed:e,commentingEnabled:t,commentBatchPending:n,commentingImplementation:a,currentUser:s,diffContext:o,diffLines:d,diffManuallyExpanded:u,diffMatches:f,diffSize:m,focusedSearchResult:h,helpUrl:p,fileComments:g,isBinary:x,isSelected:b=!1,isSubmodule:y,isTooBig:v,leftSideContent:C,linesAdded:N,linesChanged:j,linesDeleted:w,initialExpandedThreadId:L,markerNavigationImplementation:S,newTreeEntry:k,newCommitOid:D,objectId:E,oldTreeEntry:R,oldCommitOid:_,onToggleCollapse:A,path:T,pathDigest:M,pullRequestGlobalRelayId:O,pullRequestState:P,repository:$,richDiff:F,rightSideContent:U,hasExpandedAllRanges:H,expandAllContextLines:B,canExpandOrCollapseLines:z,status:G,submodule:V,truncatedReason:W,addInjectedContextLines:K,loadDiff:q},X){let[J,Y]=(0,l.useState)(F?.defaultToRichDiff),Q=y&&!!V,Z=!Q&&!J,[ee,et]=(0,l.useState)(u),en=function({isBinary:e,isSubmodule:t,path:n,status:i,repository:r,newCommitOid:a,newTreeEntry:s,oldCommitOid:o,oldTreeEntry:d,pathDigest:c,hasCopilotAccess:u}){return(0,l.useMemo)(()=>{if(nu({isBinary:e,isSubmodule:t,path:n,status:i,repository:r,hasCopilotAccess:u}))return nf({newCommitOid:a,newTreeEntry:s,oldCommitOid:o,oldTreeEntry:d,path:n,pathDigest:c,repository:r})},[a,s,o,d,c,r,u,e,t,n,i])}({isBinary:x,isSubmodule:y,path:T,status:G,repository:$,newCommitOid:D,newTreeEntry:k,oldCommitOid:_,oldTreeEntry:R,pathDigest:M,hasCopilotAccess:s.hasCopilotAccess}),ei=async()=>{await q(),et(!0)},er=(0,l.useMemo)(()=>({avatarUrl:s?.avatarURL??"",diffViewPreference:s?.splitPreference,isSiteAdmin:!1,login:s?.login??"",lineSpacingPreference:s?.lineSpacing,tabSizePreference:s?.tabSize??8,viewerCanComment:s?.canComment,viewerCanApplySuggestion:s?.canApplySuggestion,commentsPreference:s?.commentsPreference}),[s]),el=(0,l.useId)(),ea=`heading-${el}`;return(0,i.jsxs)("div",{role:"region",ref:X,"aria-labelledby":ea,id:`diff-${M}`,className:(0,I.$)(t7.A.diffTargetable,t7.A.diff),"data-targeted":b,children:[(0,i.jsx)("div",{className:t7.A.diffHeaderWrapper,children:(0,i.jsx)(r.B,{headingId:ea,areLinesExpanded:H,canExpandOrCollapseLines:z,fileLinkHref:`#diff-${M}`,isCollapsed:e,isBinary:x,size:m,canToggleRichDiff:F?.canToggleRichDiff,linesAdded:N,linesChanged:j,linesDeleted:w,newMode:k?.mode,newPath:k?.path,oldMode:R?.mode,oldPath:R?.path,patchStatus:G,path:T,onToggleExpandAllLines:B,onToggleFileCollapsed:t=>A(t,!e),onToggleDiffDisplay:e=>Y(e),additionalLeftSideContent:C,rightSideContent:U,showRichDiff:J})}),e?null:(0,i.jsxs)("div",{className:"border position-relative rounded-bottom-2",children:[a&&g.length>0&&(0,i.jsx)(np,{batchPending:n,commentingImplementation:a,conversationListThreads:g,filePath:T,repositoryId:$.id.toString(),subject:{state:P},subjectId:O||""}),Q&&(0,i.jsx)(ni,{submodule:V}),J&&(0,i.jsx)(c,{loading:!1,proseDiffHtml:F?.proseDiffHtml,fileRendererInfo:F?.renderInfo,dependencyDiffPath:F?.dependencyDiffPath}),Z&&(0,i.jsx)(t5,{hasExpandedAllRanges:H,diffContext:o,copilotChatReference:en,searchResults:f,focusedSearchResult:h,diffEntryData:{diffLines:d,isBinary:x,isTooBig:v,linesChanged:j,newTreeEntry:k,newCommitOid:D,objectId:E,oldTreeEntry:R,oldCommitOid:_,path:T,pathDigest:M,status:G,truncatedReason:W},baseHelpUrl:p,commentBatchPending:n,repositoryId:$.id.toString(),subject:{state:P},subjectId:O||"",viewerData:er,newCommitOid:D,oldCommitOid:_,addInjectedContextLines:K,commentingEnabled:t||!1,commentingImplementation:a,initialExpandedThreadId:L,markerNavigationImplementation:S,diffLinesManuallyUnhidden:ee,onHandleLoadDiff:ei})]})]},`${M}_${d.length}`)});function nx({path:e,pathDigest:t,linesAdded:n,linesChanged:a,linesDeleted:s,oldTreeEntry:o,newTreeEntry:d,status:c}){let u=(0,l.useId)(),f=`heading-${u}`,[m,h]=(0,l.useState)(!1);return(0,i.jsxs)("div",{role:"region","aria-labelledby":f,id:`diff-${t}`,className:(0,I.$)(t7.A.diffTargetable,t7.A.diff),children:[(0,i.jsx)("div",{className:t7.A.diffHeaderWrapper,children:(0,i.jsx)(r.B,{headingId:f,isCollapsed:m,isBinary:!1,linesAdded:n,linesChanged:a,linesDeleted:s,newMode:d?.mode,newPath:d?.path,oldMode:o?.mode,oldPath:o?.path,patchStatus:c,path:e,onToggleFileCollapsed:()=>h(!m)})}),!m&&(0,i.jsx)("div",{className:"border position-relative rounded-bottom-2",children:(0,i.jsxs)(eb.E,{children:[(0,i.jsx)(eb.E.Visual,{children:(0,i.jsx)(R.AlertIcon,{size:"medium",className:"fgColor-muted"})}),(0,i.jsx)(eb.E.Heading,{as:"h4",children:"There was an issue loading this file"}),(0,i.jsxs)(eb.E.Description,{children:[" ","Try refreshing the page or if the problem persists"," ",(0,i.jsx)("a",{className:"fgColor-muted",href:"https://support.github.com/",children:(0,i.jsx)("u",{children:"contact support"})}),"."]})]})})]},`${t}_error`)}let nb=(0,l.memo)(ng);try{ng.displayName||(ng.displayName="DiffUnmemoized")}catch{}try{nx.displayName||(nx.displayName="DiffErrorFallback")}catch{}try{nb.displayName||(nb.displayName="Diff")}catch{}var ny=n(9591);let nv={defaultStyles:"DiffFind-module__defaultStyles--gxyWR"};var nC=n(42080);let nN=(0,l.memo)(function({currentPathDigestIndex:e,searchTerm:t,searchResults:n,setSearchTerm:r,focusedSearchResult:a,currentIndex:s,setCurrentIndex:o,setFocusedSearchResult:d,scrollDiffCellIntoView:c}){let u=(0,l.useRef)([]),f=(0,l.useRef)(0),m=()=>{r(""),d(void 0),e.current=0},h=(0,i.jsxs)("div",{className:"d-flex flex-row flex-justify-center flex-items-center",children:[t&&(0,i.jsxs)("span",{className:"text-small fgColor-subtle mx-2 text-center",children:[0===n.size||void 0===a?0:s+1,"/",f.current]}),!t&&(0,i.jsx)("span",{className:"text-small fgColor-subtle mx-2 text-center pr-4",children:"\xa0"}),t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Z.K,{size:"small",variant:"invisible",onClick:()=>{p(-1)},icon:R.ChevronUpIcon,"aria-label":"Up","data-testid":"up-search"}),(0,i.jsx)(Z.K,{size:"small",variant:"invisible",onClick:()=>{p(1)},icon:R.ChevronDownIcon,"aria-label":"Down","data-testid":"down-search"})]})]}),p=t=>{if(void 0===a||""===a.pathDigest){e.current=0,d({pathDigest:u.current[0]??"",indexWithinDigest:0});return}1===t?(o(s===f.current-1?0:s+1),a.indexWithinDigest===n.get(a.pathDigest).length-1?(e.current=e.current+1,e.current===u.current.length&&(e.current=0),a.pathDigest=u.current[e.current]??"",a.indexWithinDigest=0):a.indexWithinDigest=a.indexWithinDigest+1):(o(0===s?f.current-1:s-1),0===a.indexWithinDigest?(e.current=e.current-1,-1===e.current&&(e.current=u.current.length-1),a.pathDigest=u.current[e.current]??"",a.indexWithinDigest=n.get(a.pathDigest).length-1):a.indexWithinDigest=a.indexWithinDigest-1),d(a)};return(0,l.useEffect)(()=>{u.current=Array.from(n.keys()),e.current=0,d({pathDigest:u.current[0]??"",indexWithinDigest:0});let t=0;for(let e of n.values())t+=e.length;f.current=t},[e,n,n.size,d]),(0,l.useEffect)(()=>{n.size>0&&void 0!==a&&c(a)},[n,a,s]),(0,i.jsxs)("div",{className:nv.defaultStyles,children:[(0,i.jsx)(nC.ak,{commands:{"pull-requests-diff-view:jump-to-next-result-alternate":()=>p(1),"pull-requests-diff-view:jump-to-previous-result-alternate":()=>p(-1)}}),(0,i.jsx)(nC.tL,{commands:{"pull-requests-diff-view:jump-to-next-result":()=>p(1),"pull-requests-diff-view:jump-to-previous-result":()=>p(-1)},children:(0,i.jsx)(ny.A,{className:"border-0 box-shadow-none",style:{width:"100%"},validationStatus:f.current>1e3?"error":void 0,type:"text",leadingVisual:()=>(0,i.jsx)(ty.A,{icon:R.SearchIcon,"aria-hidden":"true"}),autoComplete:"off",name:"Find in commit input","aria-label":"Search within code",placeholder:"Search within code",value:t,onChange:e=>{e.target.value?(r(e.target.value),o(0)):m()},block:!0,trailingAction:h})})]})});try{nN.displayName||(nN.displayName="DiffFind")}catch{}let nj=(0,l.createContext)({diffFindOpen:!1,setDiffFindOpen:()=>void 0});function nw({children:e,searchTerm:t,setSearchTerm:n}){let r=(0,l.useRef)(""),[a,s]=(0,l.useState)(!1),o=(0,l.useCallback)(e=>{e&&""===t&&""!==r.current?n(r.current):e||""===t||(r.current=t,n("")),s(e)},[t,n]),d=(0,l.useMemo)(()=>({diffFindOpen:a,setDiffFindOpen:o}),[a,o]);return(0,i.jsx)(nj.Provider,{value:d,children:e})}try{nj.displayName||(nj.displayName="DiffFindOpenContext")}catch{}try{nw.displayName||(nw.displayName="DiffFindOpenProvider")}catch{}var nL=n(89276),nS=n(17264);function nk({data:e}){let{query:t,diffEntryInfo:n,currentDiffEntryData:i}=e,r=new Map;return{matchingDiffs:i?function(e,t,n){if(0===n.size)return new Map;let i=n.size>=200,r={},l=e.reduce((n,i,l)=>{if(r[l])return n;r[l]=!0;let a=nE(t,[e[l]]),s=a.next();for(;!s.done&&n.size<200;){let{resultsWithinDiff:t}=s.value;n.set(e[l]?.pathDigest??"",t),s=a.next()}return n},new Map);if(l.size<200&&i){let n=nE(t,e,l.size),i=n.next();for(;!i.done&&l.size<200;){let{resultsWithinDiff:t,diff:r}=i.value;l.set(e[r]?.pathDigest??"",t),i=n.next()}}return l}(n,nD(t),i):function(e,t){let n=new Map,i=nE(t,e),r=i.next();for(;!r.done&&n.size<200;){let{resultsWithinDiff:t,diff:l}=r.value;n.set(e[l]?.pathDigest??"",t),r=i.next()}return n}(n,nD(t)),query:t}}let nI={Text:"Text"};function nD(e){let t=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{kind:nI.Text,regexp:RegExp(t,"gi")}}function*nE(e,t,n=0){for(let i=n;i<t.length;i++){let n=t[i],r=[],l=0;for(let a=0;a<n.diffLines.length;a++){let s,o;s=t[i]?.diffLines[a]?.type==="HUNK"?n.diffLines[a]?.text:n.diffLines[a]?.text?.substring(1);let d=n.diffLines[a];for(;s&&null!==(o=e.regexp.exec(s));){let e=o[0],t=o.index;r.push({pathDigest:n.pathDigest,indexWithinPathDigest:l,matchContent:e,column:t,diffLineNumIndex:a,isHunk:d?.type==="HUNK",hunkLineNumber:d?.blobLineNumber??-1,leftLineNumber:d?.type!=="ADDITION"?d?.left??-1:-1,rightLineNumber:d?.type!=="DELETION"?d?.right??-1:-1,columnEnd:t+e.length,text:s}),l++}}0!==r.length&&(yield{diff:i,resultsWithinDiff:r})}}function nR(e,t,n,i){let[r,a]=(0,l.useState)(new Map),[s,o]=(0,l.useState)(void 0),[d,c]=(0,l.useState)(0),u=l.useRef();!u.current&&t&&(u.current=new nS.N(new nL.z(n,nk),200,e=>1!==e.query.length));let f=(0,l.useRef)(t);f.current=t;let m=(0,l.useRef)("");(0,l.useEffect)(()=>function(){u.current?.terminate()},[]);let h=(0,l.useRef)([]);return u.current&&e!==h.current&&(u.current.onResponse=e=>{e.query===f.current&&(a(e.matchingDiffs),m.current=f.current)},h.current=e),(0,l.useEffect)(()=>{if(!e||!u.current||!m.current||""===m.current){a(new Map),o(void 0);return}a(new Map),o(void 0),u.current.post({query:m.current,diffEntryInfo:e,currentDiffEntryData:void 0})},[e?.length,e]),(0,l.useEffect)(()=>{if(e&&u.current)if(""===t)a(new Map),o(void 0),c(0),m.current="";else{var n;if(!((n=t).length>0&&n.length<=1e3))return;let i=m.current.length>0&&t.startsWith(m.current);u.current.post({query:t,diffEntryInfo:e,currentDiffEntryData:i?r:void 0}),c(0)}},[t,i]),{focusedSearchResult:s,setFocusedSearchResult:o,searchResults:r,currentIndex:d,setCurrentIndex:c}}},67486:(e,t,n)=>{n.d(t,{Dd:()=>c,ZD:()=>u,i8:()=>f,j$:()=>m,jU:()=>d,o9:()=>h,pd:()=>s,yI:()=>o});var i=n(66871),r=n(96679);function l(e){let t=e.match(/^#?(diff-[a-f0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);if(null!=t&&6===t.length)return t;let n=e.match(/^#?(discussion-diff-[0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);return null!=n&&6===n.length?n:null}function a(e,t){return`${"left"===t?"L":"R"}${e}`}function s(e){let t=e.match(/^#?(diff-[a-f0-9]+)/);return t?.[1]}function o(e){return!!(l(e)||l(`diff-${e}`))&&(e.includes("R")||e.includes("L"))}function d(e){if(!(s(e)||s(`diff-${e}`)))return;let t=e.replace("#","").replace("diff-","");return t.includes("-")&&(t=t.split("-")[0]??""),t.includes("L")&&(t=t.split("L")[0]??""),t.includes("R")&&(t=t.split("R")[0]??""),t}function c(e){let t=e.match(/^#?(r\d+)/),n=t?.[1];return n?parseInt(n.slice(1)):void 0}function u(e){let t=l(e);if(t){let e=t[1],n=t[2]?"L"===t[2]?"left":"right":void 0,i=t[3]?parseInt(t[3]):void 0;if(!e||!n||void 0===i)return;return{diffAnchor:e,startOrientation:n,startLineNumber:i,endOrientation:(t[4]?"L"===t[4]?"left":"right":void 0)??n,endLineNumber:(t[5]?parseInt(t[5]):void 0)??i,firstSelectedLineNumber:i,firstSelectedOrientation:n}}}function f(e){!function(e){let t=`#${e}`;if(t===window.location.hash)return;let n=window.location.href;(0,i.Zu)(t),window.dispatchEvent(new HashChangeEvent("hashchange",{newURL:window.location.href,oldURL:n}))}(m(e))}function m(e){let t=a(e.startLineNumber,e.startOrientation),n=`${e.diffAnchor}${t}`;if(e.endLineNumber!==e.startLineNumber||e.endOrientation!==e.startOrientation){let t=a(e.endLineNumber,e.endOrientation);n+=`-${t}`}return n}function h(){let e=l(r.fV.hash??"")??"",t="";return(""===e?s(r.fV.hash??"")??"":e?.[0]??"").replace("#","").replace("diff-","")}},72086:(e,t,n)=>{n.d(t,{j2:()=>N,S4:()=>w,u6:()=>f,Av:()=>E,oE:()=>L,Ls:()=>I,pI:()=>j,Yf:()=>R,Mk:()=>y,Ji:()=>p,qK:()=>h,Po:()=>m,a1:()=>k,dT:()=>D,a2:()=>d,On:()=>c,ZC:()=>v,qX:()=>u,x_:()=>x,dv:()=>g});var i=n(87591);let r={Addition:"ADDITION",Context:"CONTEXT",Deletion:"DELETION",Hunk:"HUNK",InjectedContext:"INJECTED_CONTEXT",Empty:"EMPTY"},l={[r.Addition]:"+",[r.Deletion]:"-",[r.Context]:" ",[r.Hunk]:"@",[r.InjectedContext]:"~"};var a=n(55463),s=n(54725),o=n(67486);function d(e,t,n){return"left"===n?!m(e)&&e.left===t:!m(e)&&(0,i.XU)(e.type)===n&&e.right===t}function c(e,t){if(!e)return;if(!t)return e;let n=!1,i=!1,r=!1;for(let l of t)if(l&&(i||(i=d(l,e.startLineNumber,e.startOrientation)),r||(r=d(l,e.endLineNumber,e.endOrientation)),(n=r&&!i)||i&&r))break;return n?{...e,startLineNumber:e.endLineNumber,startOrientation:e.endOrientation,endLineNumber:e.startLineNumber,endOrientation:e.startOrientation}:e}function u(e,t,n){let i=`-${m(t)||"number"!=typeof t.left?"empty":t.left}`,r=n?`-${m(n)||"number"!=typeof n.right?"empty":n.right}`:"";return`${e}${i}${r}`}function f(e,t){return`${e}-${t}`}function m(e){return!!e&&e===s.V}function h(e){return!!e&&e!==s.V}function p(e){return"CONTEXT"===e.type}function g(e,t){return t===r.Empty||t===r.Hunk?[e,void 0]:b(e,l[t])}function x(e,t){let n;switch(t){case r.Addition:n=l[r.Addition];break;case r.Deletion:n=l[r.Deletion];break;case r.Context:case r.InjectedContext:n=l[r.Context]}return b(e,n)}function b(e,t){if(!t||!e.startsWith(t))return[e,void 0];let n=e[0];return[e.substring(1),n]}function y(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(s.V);for(;n.length<t.length;)n.push(s.V)};for(let r of e)switch(r.type){case"ADDITION":n.push(r);break;case"DELETION":t.push(r);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":i(),t.push(r),n.push(r)}return i(),{leftLines:t,rightLines:n}}function v(e){return new DOMParser().parseFromString(e,"text/html").documentElement.textContent||""}function C(e){return["HUNK","CONTEXT","INJECTED_CONTEXT","DELETION"].includes(e.type)}function N({line:e,range:t,fileAnchor:n}){let i,{origin:r,pathname:l}=window.location;if(e){let r=C(e)?e.left:e.right;i=t&&r&&t.startLineNumber<=r&&t.endLineNumber>=r?(0,o.j$)(t):function(e,t){let n=C(e),i=n?e.left:e.right,r=n?"left":"right";if(null!==i)return(0,o.j$)({diffAnchor:t,endLineNumber:i,endOrientation:r,startLineNumber:i,startOrientation:r,firstSelectedLineNumber:i,firstSelectedOrientation:r})}(e,n)}else t&&(i=(0,o.j$)(t));if(i)return`${r}${l}#${i}`}function j({includeControlKey:e=!0,includeShiftKey:t,includeOptionKey:n,key:i}){let r=e?`${(0,a.U0)()?"\u2318":"Ctrl + "}`:"";return n&&(r+=`${(0,a.U0)()?"\u2325":"Alt + "}`),t&&(r+=`${(0,a.U0)()?"\u21E7":"Shift + "}`),r+=i}function w({hasThreads:e}){return e?"80px":"24px"}function L({includeControlKey:e=!0,includeShiftKey:t,includeOptionKey:n,key:i}){let r="";return e&&(r+=(0,a.U0)()?"Command+":"Control+"),n&&(r+=(0,a.U0)()?"Option+":"Alt+"),t&&(r+="Shift+"),r+=i}let S=["ADDITION","DELETION","CONTEXT"],k=(e,t)=>{if(!e)return!1;let n=t.leftLines.concat(t.rightLines);return n.length>0&&n.includes(e)?n.every(e=>!m(e)&&S.includes(e.type)):!m(e)&&S.includes(e.type)},I=e=>e?e.filter(e=>!m(e)).map(e=>{let[t]=x(v(e.html),e.type);return t}).join(`
`):"";function D(e){return!!(e.text.length<1&&("CONTEXT"===e.type||"INJECTED_CONTEXT"===e.type)||("DELETION"===e.type||"ADDITION"===e.type)&&1===e.text.length&&["+","-"].includes(e.text.charAt(0)))}let E=(e,t,n,i)=>{let r;if(e)return e;if(!m(t)){let e=(n?t.left:t.right)??0,l=n?"left":"right";r={startOrientation:l,endOrientation:l,startLineNumber:e,endLineNumber:e,firstSelectedLineNumber:e,firstSelectedOrientation:l,diffAnchor:i}}return r};function R(e,t=!1,n=!1){let i;switch(e){case"ADDITION":i=t?"var(--diffBlob-additionNum-bgColor, var(--diffBlob-addition-bgColor-num))":"var(--diffBlob-additionLine-bgColor, var(--diffBlob-addition-bgColor-line))";break;case"DELETION":i=t?"var(--diffBlob-deletionNum-bgColor, var(--diffBlob-deletion-bgColor-num))":"var(--diffBlob-deletionLine-bgColor, var(--diffBlob-deletion-bgColor-line))";break;case"HUNK":i=t?"var(--diffBlob-hunkNum-bgColor-rest, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-hunkLine-bgColor, var(--bgColor-accent-muted))";break;case"EMPTY":i=t?"var(--diffBlob-emptyNum-bgColor, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-emptyLine-bgColor, var(--bgColor-accent-muted))";break;default:i="var(--bgColor-default)"}return n?`color-mix(in oklab, var(--bgColor-accent-emphasis) 8%, ${i})`:i}},11751:(e,t,n)=>{n.d(t,{U:()=>a,l:()=>s});var i=n(96540),r=n(67486),l=n(96679);function a(){let[e,t]=(0,i.useState)(""),n=(0,i.useCallback)(()=>{t(((0,r.pd)(l.fV.hash??"")??"").replace("diff-",""))},[]);return(0,i.useEffect)(()=>(window.addEventListener("hashchange",n),n(),()=>{window.removeEventListener("hashchange",n)}),[n]),e}function s(){let[e,t]=(0,i.useState)(""),n=(0,i.useCallback)(()=>{t((0,r.o9)())},[]);return(0,i.useEffect)(()=>(window.addEventListener("hashchange",n),n(),()=>{window.removeEventListener("hashchange",n)}),[n]),e}},54725:(e,t,n)=>{n.d(t,{V:()=>i});let i="empty-diff-line"},4203:(e,t,n)=>{n.d(t,{U:()=>d});var i=n(21728),r=n(60039),l=n(97665),a=n(94747),s=n(80804),o=n(7799);function d(e){let t,n,r,o,d=(0,i.c)(10),{onSuccess:u,onError:f}=e,m=(0,l.jE)();return d[0]!==m?(t=async e=>{m.setQueryData((0,s.nZ)(),t=>({...t,...e}))},d[0]=m,d[1]=t):t=d[1],d[2]!==u?(n=()=>{u()},d[2]=u,d[3]=n):n=d[3],d[4]!==f?(r=e=>{f(e)},d[4]=f,d[5]=r):r=d[5],d[6]!==t||d[7]!==n||d[8]!==r?(o={mutationFn:c,onMutate:t,onSuccess:n,onError:r},d[6]=t,d[7]=n,d[8]=r,d[9]=o):o=d[9],(0,a.n)(o)}async function c(e){let{commentsPreference:t,lineSpacing:n,splitPreference:i}=e;if(!(0,o.M3)())return;let l={};t&&(l={...l,commentsPreference:t}),n&&(l={...l,lineSpacing:n}),i&&(l={...l,diff:i});let a=await (0,r.Sr)("/users/diffview",{method:"POST",headers:{Accept:"application/json"},body:l}),s=await a.json();if(a.ok)return s;throw Error(s.error||"Unknown error occurred",{cause:a.status})}},80804:(e,t,n)=>{n.d(t,{C0:()=>m,Pe:()=>u,Qn:()=>h,bJ:()=>f,in:()=>d,nZ:()=>c,sI:()=>o});var i=n(21728),r=n(60826),l=n(97286),a=n(26807),s=n(66871);let o={Visible:"visible",Collapsed:"collapsed"},d={hideWhitespace:!1,splitPreference:"split",lineSpacing:"relaxed",commentsPreference:o.Visible};function c(){return[r.u.diffViewUserSettings]}function u(e){let t,n,r,a=(0,i.c)(6);a[0]===Symbol.for("react.memo_cache_sentinel")?(t=c(),a[0]=t):t=a[0];let s=t;return a[1]!==e?(n=async()=>e||d,a[1]=e,a[2]=n):n=a[2],a[3]!==e||a[4]!==n?(r={queryKey:s,queryFn:n,initialData:e,staleTime:1/0},a[3]=e,a[4]=n,a[5]=r):r=a[5],(0,l.I)(r)}function f(e,t){let n=new URL(window.location.href,window.location.origin);if(t){let i=encodeURIComponent(t);n.searchParams.set(e,i)}else n.searchParams.delete(e);(0,s.bj)(n.toString())}function m(e){let t,n=(0,i.c)(2),r=e,[l]=(0,a.o)();n[0]!==l?(t=l.get("diff"),n[0]=l,n[1]=t):t=n[1];let s=t;return("split"===s||"unified"===s)&&(r=s),r}function h(e){let t=e,[n]=(0,a.o)(),i=n.get("w");return"1"===i?t=!0:"0"===i&&(t=!1),t}},39419:(e,t,n)=>{n.d(t,{sI:()=>i});let i={Visible:"visible",Collapsed:"collapsed"}},83829:(e,t,n)=>{n.d(t,{A0:()=>a,TA:()=>d,Y:()=>c,_n:()=>u,rE:()=>s,t6:()=>o});let i=/[\u202A-\u202E]|[\u2066-\u2069]|\u{E0001}|\u{E007F}/u,r=/[\u202A-\u202E]|[\u2066-\u2069]|\u{E0001}|\u{E007F}/gu,l=/([\u202A-\u202E]|[\u2066-\u2069]|\u{E0001}|\u{E007F})/gu,a=new Map(Object.entries({"\u202A":"U+202A","\u202B":"U+202B","\u202C":"U+202C","\u202D":"U+202D","\u202E":"U+202E","\u2066":"U+2066","\u2067":"U+2067","\u2068":"U+2068","\u2069":"U+2069","\u{E0001}":"U+E0001","\u{E007F}":"U+E007F"}));function s(e){return`<span class="hidden-unicode-replacement" data-code-text="${e}"></span>`}function o(e){return e.split(l)}function d(e){return c(e)?e.replaceAll(r,e=>a.get(e)??""):e}function c(e){return i.test(e)}function u(e){return a.get(e)}},60826:(e,t,n)=>{n.d(t,{u:()=>i});let i={codeButton:"code_button",codeowners:"codeowners",commits:"commits",diffEntries:"diff_entries",diffstat:"diffstat",header:"header",mergeBox:"merge_box",mergeInstructions:"merge_instructions",pendingReview:"pending_review",statusChecks:"status_checks",tabCounts:"tab_counts",threadPreviews:"thread_previews",viewedFilesCount:"viewed_files_count",viewedFilesCount2:"viewed_files_count2",diffSummaries:"diff_summaries",diffViewUserSettings:"user_diff_view_settings",tableOfContents:"table_of_contents",markers:"markers",diffCollapsedStatus:"diff_collapsed_status",diffContextLines:"diff_entry_lines",abandonReview:"abandon_review",addCommentReaction:"add_comment_reaction",changeBase:"change_base",cleanupCodespaces:"cleanup_codespaces",createReviewComment:"create_review_comment",deleteHeadRef:"delete_head_ref",dequeuePullRequest:"dequeue_pull_request",disableAutoMerge:"disable_auto_merge",enableAutoMerge:"enable_auto_merge",dismissReview:"dismiss_review",markReadyForReview:"mark_ready_for_review",merge:"merge",removeCommentReaction:"remove_comment_reaction",reRequestReviewFromUser:"re_request_review_from_user",restoreHeadRef:"restore_head_ref",resolveThread:"resolve_thread",runActionRequiredWorkflows:"run_action_required_workflows",submitReview:"submit_review",unresolveThread:"unresolve_thread",updateReviewComment:"update_review_comment",updatePullRequestBranch:"update_pull_request_branch",updateTitle:"update_title",updateDiffViewUserSettings:"update_diff_view_user_settings",updateViewedFiles:"update_viewed_files",updateMergeBoxUserPreference:"update_merge_box_user_preference",hideComment:"hide_comment",unhideComment:"unhide_comment",submitSuggestedChanges:"apply_suggestions"}},11251:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(96540);function r({focusRowRef:e,mouseRowRef:t}){let[n,r]=i.useState(!1);return i.useEffect(()=>{if(e.current&&t.current){let n=()=>{let t=e.current?.querySelector(".PRIVATE_TreeView-item-content-text");t?.scrollWidth!==t?.offsetWidth&&r(!0)};e.current.onfocus=()=>{n()},e.current.onblur=()=>{r(!1)},t.current.onmouseenter=()=>{n()},t.current.onmouseleave=()=>{r(!1)}}},[e,t]),n}},14103:(e,t,n)=>{n.d(t,{L:()=>r});var i=n(96540);function r(e){(0,i.useEffect)(()=>{if(!e)return;let t=document.querySelector(".footer");if(t)return t.hidden=!0,()=>{t.hidden=!1}},[e])}},321:(e,t,n)=>{n.d(t,{q:()=>m});var i=n(74848),r=n(63869),l=n(68415),a=n(80663),s=n(96540),o=n(96235),d=n(60039);async function c(e,t){if(!t)return;let n=new FormData;n.set("file_tree_visible",e?"true":"false"),(0,d.DI)((0,o.h6D)(t),{method:"PUT",body:n,headers:{Accept:"application/json"}})}let u={sm:l.Gy.small,md:l.Gy.medium,lg:l.Gy.large},f={size:"medium",mobileBreakpoint:"md"};function m(e,t,n,o){let d={...f,...o},[m]=(0,a.I)(()=>!1,!0,[]),h=(0,s.useRef)(null),p=(0,s.useRef)(null),g=u[d.mobileBreakpoint??"md"],[x,b]=(0,s.useState)(t),[y,v]=(0,s.useState)(!1),C=(0,s.useCallback)(()=>{(0,l.nn)(window.innerWidth)<=g?(v(!0),requestAnimationFrame(()=>p.current?.focus())):(b(!0),c(!0,n),requestAnimationFrame(()=>h.current?.focus()))},[g,n]),N=(0,s.useCallback)(()=>{(0,l.nn)(window.innerWidth)<=g?(v(!1),requestAnimationFrame(()=>p.current?.focus())):(b(!1),c(!1,n),requestAnimationFrame(()=>h.current?.focus()))},[g,n]),j=(0,s.useMemo)(()=>(0,i.jsx)(r.L,{expanded:x,alignment:"left",ariaLabel:x?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:h,onToggleExpanded:()=>{x?N():C()},className:`d-none d-${d.mobileBreakpoint}-flex position-relative`,size:d.size}),[x,e,d.mobileBreakpoint,d.size,N,C]),w=(0,s.useMemo)(()=>(0,i.jsx)(r.L,{expanded:y,alignment:"left",ariaLabel:y?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:p,onToggleExpanded:()=>{y?N():C()},className:`d-${d.mobileBreakpoint}-none position-relative`,size:d.size}),[y,e,d.mobileBreakpoint,d.size,N,C]);return{splitPagePaneHidden:m&&!t,splitPageContentHidden:{narrow:y,regular:!1},isTreeExpanded:x,isMobileTreeExpanded:y,expandTree:C,collapseTree:N,treeToggleElement:(0,s.useMemo)(()=>(0,i.jsxs)(i.Fragment,{children:[w,j]}),[w,j]),treeToggleRef:h}}},48280:(e,t,n)=>{n.d(t,{Y:()=>p});var i=n(74848),r=n(39459),l=n(42083),a=n(38621),s=n(52464),o=n(30631),d=n(55847),c=n(34164),u=n(55238);let f={annotation:"Annotation-module__annotation--YCi6_",annotationSource:"Annotation-module__annotationSource--dVVXf",annotationMessage:"Annotation-module__annotationMessage--SE4MR"};var m=n(27455);let h={[u.U.Failure]:(0,i.jsx)(a.StopIcon,{className:"fgColor-danger"}),[u.U.Warning]:(0,i.jsx)(a.AlertIcon,{className:"fgColor-attention"}),[u.U.Notice]:(0,i.jsx)(a.InfoIcon,{className:"fgColor-muted"})};function p({annotation:e}){return(0,i.jsxs)("div",{className:(0,c.$)("p-3 bgColor-default",m.GF[e.annotationLevel].borderColor,f.annotation),children:[(0,i.jsxs)("div",{className:"d-flex flex-items-center mb-2",children:[h[e.annotationLevel],(0,i.jsx)(s.A,{weight:"semibold",className:"fgColor-muted pl-2",size:"small",children:m.GF[e.annotationLevel].ariaLabel})]}),(0,i.jsx)("div",{className:"ml-4",children:e.title&&(0,i.jsx)(s.A,{weight:"semibold",size:"medium",className:m.GF[e.annotationLevel].primaryColorClass,children:e.title})}),(0,i.jsxs)("h2",{className:"sr-only",children:[m.GF[e.annotationLevel].ariaLabel,": ",e.title]}),(0,i.jsx)("div",{className:"mb-3 mt-1 ml-4",children:e.message&&(0,i.jsx)(l.mo,{html:e.message,className:f.annotationMessage})}),(0,i.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between ml-4",children:[(0,i.jsxs)("div",{className:f.annotationSource,children:[(0,i.jsx)(r.r,{src:e.appAvatarUrl,alt:e.appAvatarAltText}),(0,i.jsxs)(o.A,{className:"ml-2",maxWidth:"300px",inline:!0,title:`${e.checkSuiteName} / ${e.checkRun.name}`,children:[(0,i.jsx)(s.A,{weight:"semibold",size:"small",children:e.checkSuiteName})," ","/ ",(0,i.jsx)(s.A,{size:"small",children:e.checkRun.name})]})]}),e.checkRun.detailsUrl&&(0,i.jsx)(d.Q,{as:"a",href:e.checkRun.detailsUrl,size:"small",children:"View details"})]})]})}try{p.displayName||(p.displayName="Annotation")}catch{}},27455:(e,t,n)=>{n.d(t,{GF:()=>d,S:()=>o,Xh:()=>a});var i=n(74848),r=n(38267),l=n(55238);function a({annotationLevel:e,...t}){let{icon:n,...r}=d[e];return function({fill:e,stroke:t,ariaLabel:n,svgHtml:r,className:l}){return(0,i.jsx)("svg",{"aria-label":n,className:l,fill:e,height:"24",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",style:{boxShadow:"none"},viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:r})}({...n,...r,...t})}let s=(0,r.i7)(["0%{opacity:0;}100%{opacity:1;}"]),o=(0,r.Ay)(a).withConfig({displayName:"AnnotationIcon__AnimatedAnnotationIcon",componentId:"sc-5b4ebd36-0"})(["animation:"," 0.1s ease-in;"],s),d={[l.U.Failure]:{priority:1,ariaLabel:"Check failure",primaryColor:"danger.fg",primaryColorClass:"fgColor-danger",borderColor:"borderColor-danger-emphasis",icon:{fill:"var(--bgColor-danger-emphasis, var(--color-danger-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"15",x2:"9",y1:"9",y2:"15"}),(0,i.jsx)("line",{x1:"9",x2:"15",y1:"9",y2:"15"})]})}},[l.U.Warning]:{priority:2,ariaLabel:"Check warning",primaryColor:"attention.fg",primaryColorClass:"fgColor-attention",borderColor:"borderColor-attention-emphasis",icon:{fill:"var(--bgColor-attention-emphasis, var(--color-attention-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"16"})]})}},[l.U.Notice]:{priority:3,ariaLabel:"Check notice",primaryColor:"fg.muted",primaryColorClass:"fgColor-muted",borderColor:"fgColor-muted",icon:{fill:"var(--bgColor-neutral-emphasis, var(--color-neutral-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"8"})]})}}};try{a.displayName||(a.displayName="AnnotationIcon")}catch{}try{o.displayName||(o.displayName="AnimatedAnnotationIcon")}catch{}},54779:(e,t,n)=>{n.d(t,{$:()=>s});var i=n(74848),r=n(38621),l=n(15385),a=n(64979);let s=e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.l.Divider,{}),(0,i.jsx)(a.t,{eventContext:{prx:!0},leadingVisual:(0,i.jsx)(r.CopilotIcon,{}),fileDiffReference:e.copilotChatReference})]});try{s.displayName||(s.displayName="CopilotDiffChatBlobActionsMenuItems")}catch{}},6698:(e,t,n)=>{n.d(t,{i:()=>o});var i=n(74848),r=n(29943),l=n(38007),a=n(99543),s=n(15385);let o=({fileDiffReference:e,eventContext:t,afterSelect:n})=>{let{addToast:o}=(0,a.Y6)();return(0,i.jsx)(s.l.Item,{onSelect:()=>{(0,r.Oc)(e),o({message:"Reference added to thread",type:"success"}),(0,l.BI)("copilot.file-diff.add",t),n?.()},children:"Attach to current thread"})};try{o.displayName||(o.displayName="DiffLinesAttachMenuItem")}catch{}},64979:(e,t,n)=>{n.d(t,{t:()=>o});var i=n(74848),r=n(29943),l=n(99377),a=n(38007),s=n(15385);let o=({fileDiffReference:e,leadingVisual:t,eventContext:n,afterSelect:o})=>(0,i.jsxs)(s.l.Item,{onSelect:()=>{(0,r.qR)({intent:l.wh.conversation,references:[e]}),(0,a.BI)("copilot.file-diff.discuss",n),o?.()},children:[t&&(0,i.jsx)(s.l.LeadingVisual,{children:t}),"Ask about this diff"]});try{o.displayName||(o.displayName="DiffLinesDiscussMenuItem")}catch{}},10048:(e,t,n)=>{n.d(t,{e:()=>o});var i=n(74848),r=n(29943),l=n(99377),a=n(38007),s=n(15385);let o=({fileDiffReference:e,eventContext:t,afterSelect:n})=>(0,i.jsx)(s.l.Item,{onSelect:()=>{(0,r.qR)({content:"Explain",intent:l.wh.explainFileDiff,references:[e]}),(0,a.BI)("copilot.file-diff.explain",t),n?.()},children:"Explain"});try{o.displayName||(o.displayName="DiffLinesExplainMenuItem")}catch{}},92032:(e,t,n)=>{n.d(t,{oj:()=>C,ZH:()=>x});var i=n(74848),r=n(21728),l=n(38621),a=n(96540),s=n(61003),o=n(34614),d=n(99987),c=n(73435),u=n(58990),f=n(11251),m=n(67486),h=n(96679);let p={"file-tree-row":"DiffFileTree-module__file-tree-row--yr73E"},g=(0,a.memo)(function(e){let t,n=(0,r.c)(2),{changeType:l}=e;return n[0]!==l?(t=(0,i.jsx)(u.E,{status:l}),n[0]=l,n[1]=t):t=n[1],t});g.displayName="FileStatusIconItem";let x=(0,a.memo)(function(e){let t,n,c,u,m,x,b,y,v,C,N=(0,r.c)(44),{file:j,depth:w,hash:L,onSelect:S}=e,k=(0,a.useRef)(null),I=(0,a.useRef)(null),D=`#diff-${j.diff.pathDigest}`;N[0]===Symbol.for("react.memo_cache_sentinel")?(t={focusRowRef:k,mouseRowRef:k},N[0]=t):t=N[0];let E=(0,f.Z)(t),R=j.diff.totalCommentsCount??0,_=j.diff.highestAnnotationLevel,A=null,T=null;switch(_){case"WARNING":{let e,t,n=R>0?"and ":"";N[1]!==n?(e=(0,i.jsxs)("span",{className:"sr-only",children:[n," has warning annotations"]}),N[1]=n,N[2]=e):e=N[2],T=e,N[3]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("div",{className:"pl-1 fgColor-attention",children:(0,i.jsx)(l.AlertIcon,{})}),N[3]=t):t=N[3],A=t;break}case"NOTICE":{let e,t,n=R>0?"and ":"";N[4]!==n?(e=(0,i.jsxs)("span",{className:"sr-only",children:[n," has notice annotations"]}),N[4]=n,N[5]=e):e=N[5],T=e,N[6]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("div",{className:"pl-1 fgColor-default",children:(0,i.jsx)(l.InfoIcon,{})}),N[6]=t):t=N[6],A=t;break}case"FAILURE":{let e,t,n=R>0?"and ":"";N[7]!==n?(e=(0,i.jsxs)("span",{className:"sr-only",children:[n," has failure annotations"]}),N[7]=n,N[8]=e):e=N[8],T=e,N[9]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("div",{className:"pl-1 fgColor-danger",children:(0,i.jsx)(l.XCircleFillIcon,{})}),N[9]=t):t=N[9],A=t}}N[10]!==j.diff.pathDigest||N[11]!==L?(n=()=>{if(k.current&&j.diff.pathDigest===L){let e=window.setTimeout(()=>{let e=h.XC?.getElementById("diff_file_tree")?.parentElement,t=k.current.offsetTop,n=h.cg?.innerHeight??0;e&&(e.scrollTop=t-n/2)},0);return()=>{window.clearTimeout(e)}}},c=[j.diff.pathDigest,L],N[10]=j.diff.pathDigest,N[11]=L,N[12]=n,N[13]=c):(n=N[12],c=N[13]),(0,a.useEffect)(n,c),N[14]!==D||N[15]!==j.diff||N[16]!==S?(u=e=>{if(e.nativeEvent instanceof KeyboardEvent){if(k?.current!==document.activeElement)return void e.preventDefault();if("Enter"===e.key||" "===e.key){e.preventDefault(),S?.(j.diff),I?.current?.click();return}}if(e.nativeEvent instanceof MouseEvent){if(e.metaKey||e.ctrlKey||1===e.button){e.preventDefault(),window.open(D,"_blank");return}S?.(j.diff),I?.current?.click()}},N[14]=D,N[15]=j.diff,N[16]=S,N[17]=u):u=N[17];let M=u,O=j.diff.pathDigest===L;return N[18]!==j.diff.changeType?(m=(0,i.jsx)(s.G.LeadingVisual,{children:(0,i.jsx)(g,{changeType:j.diff.changeType})}),N[18]=j.diff.changeType,N[19]=m):m=N[19],N[20]!==D||N[21]!==j.fileName?(x=(0,i.jsx)(o.A,{href:D,muted:!0,ref:I,role:"presentation",className:"fgColor-default",tabIndex:-1,children:j.fileName}),N[20]=D,N[21]=j.fileName,N[22]=x):x=N[22],N[23]!==j.fileName||N[24]!==E?(b=E&&(0,i.jsx)(d.m,{"data-testid":`${j.fileName}-item-tooltip`,id:`${j.fileName}-item-tooltip`,contentRef:k,"aria-label":j.fileName,open:!0,direction:"ne"}),N[23]=j.fileName,N[24]=E,N[25]=b):b=N[25],N[26]!==R?(y=!!R&&(0,i.jsxs)("span",{className:"sr-only",children:["has ",R<10?R:"9+"," ",R>1?"comments":"comment"]}),N[26]=R,N[27]=y):y=N[27],N[28]!==A||N[29]!==_||N[30]!==R?(v=(!!R||_)&&(0,i.jsx)(s.G.TrailingVisual,{children:(0,i.jsxs)("div",{className:"d-flex flex-items-center flex-row",children:[!!R&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.CommentIcon,{}),(0,i.jsx)("div",{className:"ml-1 text-bold fgColor-default f6",children:R<10?R:"9+"})]}),A]})}),N[28]=A,N[29]=_,N[30]=R,N[31]=v):v=N[31],N[32]!==T||N[33]!==w||N[34]!==j.diff.path||N[35]!==j.diff.pathDigest||N[36]!==M||N[37]!==v||N[38]!==O||N[39]!==m||N[40]!==x||N[41]!==b||N[42]!==y?(C=(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(s.G.Item,{defaultExpanded:!0,"aria-level":w,current:O,id:j.diff.path,onSelect:M,ref:k,className:p["file-tree-row"],children:[m,x,b,y,T,v]},j.diff.pathDigest)}),N[32]=T,N[33]=w,N[34]=j.diff.path,N[35]=j.diff.pathDigest,N[36]=M,N[37]=v,N[38]=O,N[39]=m,N[40]=x,N[41]=b,N[42]=y,N[43]=C):C=N[43],C});function b(e){let t,n,l,o,c,u,m,h,p,g,x,C,N=(0,r.c)(43);N[0]!==e?({directory:t,renderPattern:l,depth:o,leadingPath:c,...n}=e,N[0]=e,N[1]=t,N[2]=n,N[3]=l,N[4]=o,N[5]=c):(t=N[1],n=N[2],l=N[3],o=N[4],c=N[5]);let j=void 0===o?0:o,w=void 0===c?"":c,L=w?`${w}/`:"",S=a.useRef(null),k=a.useRef(null);N[6]===Symbol.for("react.memo_cache_sentinel")?(u={focusRowRef:k,mouseRowRef:S},N[6]=u):u=N[6];let I=(0,f.Z)(u);if(!t.files.length&&1===t.directories.length){let e,r;if(N[7]!==j||N[8]!==t.directories||N[9]!==t.name||N[10]!==n||N[11]!==L||N[12]!==l){let r;N[14]!==j||N[15]!==t.name||N[16]!==n||N[17]!==L||N[18]!==l?(r=e=>(0,i.jsx)(b,{depth:0===j?1:j,directory:e,leadingPath:`${L}${t.name}`,renderPattern:l,...n},e.path),N[14]=j,N[15]=t.name,N[16]=n,N[17]=L,N[18]=l,N[19]=r):r=N[19],e=t.directories.map(r),N[7]=j,N[8]=t.directories,N[9]=t.name,N[10]=n,N[11]=L,N[12]=l,N[13]=e}else e=N[13];return N[20]!==e?(r=(0,i.jsx)(i.Fragment,{children:e}),N[20]=e,N[21]=r):r=N[21],r}N[22]!==j||N[23]!==t||N[24]!==n||N[25]!==l?(m=function(){return"traditional"===l?(0,i.jsx)(y,{directory:t,depth:j,renderPattern:l,...n}):(0,i.jsx)(v,{directory:t,depth:j,renderPattern:l,...n})},N[22]=j,N[23]=t,N[24]=n,N[25]=l,N[26]=m):m=N[26];let D=m;if(0===j){let e;return N[27]!==D?(e=D(),N[27]=D,N[28]=e):e=N[28],e}N[29]===Symbol.for("react.memo_cache_sentinel")?(h=(0,i.jsx)(s.G.LeadingVisual,{children:(0,i.jsx)(s.G.DirectoryIcon,{})}),N[29]=h):h=N[29];let E=`${L}${t.name}`;return N[30]!==E?(p=(0,i.jsx)("span",{ref:S,children:E}),N[30]=E,N[31]=p):p=N[31],N[32]!==t.name||N[33]!==L||N[34]!==I?(g=I&&(0,i.jsx)(d.m,{"data-testid":`${t.name}-directory-item-tooltip`,id:`${t.name}-directory-item-tooltip`,contentRef:k,"aria-label":`${L}${t.name}`,open:!0,direction:"ne"}),N[32]=t.name,N[33]=L,N[34]=I,N[35]=g):g=N[35],N[36]!==D?(x=(0,i.jsx)(s.G.SubTree,{children:D()}),N[36]=D,N[37]=x):x=N[37],N[38]!==t.path||N[39]!==p||N[40]!==g||N[41]!==x?(C=(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(s.G.Item,{ref:k,defaultExpanded:!0,id:t.path,children:[h,p,g,x]},t.path)}),N[38]=t.path,N[39]=p,N[40]=g,N[41]=x,N[42]=C):C=N[42],C}let y=(0,a.memo)(function(e){let t,n,l,a,s,o,d,c=(0,r.c)(20);c[0]!==e?({directory:t,fileNodeRenderer:n,renderPattern:a,depth:s,...l}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=l,c[4]=a,c[5]=s):(t=c[1],n=c[2],l=c[3],a=c[4],s=c[5]);let u=void 0===s?0:s;if(c[6]!==u||c[7]!==t.directories||c[8]!==t.files||c[9]!==n||c[10]!==l||c[11]!==a){let e,r=t.files.map(N).concat(t.directories.map(j));r.sort(w),c[13]!==u||c[14]!==n||c[15]!==l||c[16]!==a?(e=e=>"file"!==e.pathType?(0,i.jsx)(b,{depth:u+1,directory:e.node,fileNodeRenderer:n,renderPattern:a,...l},e.path):n?n({...l,file:e.node,depth:u+1}):(0,i.jsx)(x,{depth:u+1,file:e.node,...l},e.path),c[13]=u,c[14]=n,c[15]=l,c[16]=a,c[17]=e):e=c[17],o=r.map(e),c[6]=u,c[7]=t.directories,c[8]=t.files,c[9]=n,c[10]=l,c[11]=a,c[12]=o}else o=c[12];return c[18]!==o?(d=(0,i.jsx)(i.Fragment,{children:o}),c[18]=o,c[19]=d):d=c[19],d});function v(e){let t,n,l,a,s,o,d=(0,r.c)(21);d[0]!==e?({directory:t,depth:l,...n}=e,d[0]=e,d[1]=t,d[2]=n,d[3]=l):(t=d[1],n=d[2],l=d[3]);let c=void 0===l?0:l;if(d[4]!==c||d[5]!==t.files||d[6]!==n){let e;d[8]!==c||d[9]!==n?(e=e=>(0,i.jsx)(x,{depth:c+1,file:e,...n},e.filePath),d[8]=c,d[9]=n,d[10]=e):e=d[10],a=t.files.map(e),d[4]=c,d[5]=t.files,d[6]=n,d[7]=a}else a=d[7];if(d[11]!==c||d[12]!==t.directories||d[13]!==n){let e;d[15]!==c||d[16]!==n?(e=e=>(0,i.jsx)(b,{depth:c+1,directory:e,...n},e.path),d[15]=c,d[16]=n,d[17]=e):e=d[17],s=t.directories.map(e),d[11]=c,d[12]=t.directories,d[13]=n,d[14]=s}else s=d[14];return d[18]!==a||d[19]!==s?(o=(0,i.jsxs)(i.Fragment,{children:[a,s]}),d[18]=a,d[19]=s,d[20]=o):o=d[20],o}let C=(0,a.memo)(function(e){let t,n,l,o,d,u,f,p,g,x,y,v=(0,r.c)(20);v[0]!==e?({diffs:n,fileNodeRenderer:l,renderPattern:d,className:t,...o}=e,v[0]=e,v[1]=t,v[2]=n,v[3]=l,v[4]=o,v[5]=d):(t=v[1],n=v[2],l=v[3],o=v[4],d=v[5]),v[6]!==n?(u=(0,c.xY)(n),v[6]=n,v[7]=u):u=v[7];let C=u,[N,j]=a.useState("");v[8]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{j(((0,m.pd)(h.fV.hash??"")??"").replace("diff-",""))},v[8]=f):f=v[8];let w=f;return v[9]===Symbol.for("react.memo_cache_sentinel")?(p=()=>(window.addEventListener("hashchange",w),w(),()=>{window.removeEventListener("hashchange",w)}),g=[w],v[9]=p,v[10]=g):(p=v[9],g=v[10]),(0,a.useEffect)(p,g),v[11]!==l||v[12]!==o||v[13]!==C||v[14]!==N||v[15]!==d?(x=(0,i.jsx)(b,{directory:C,fileNodeRenderer:l,renderPattern:d,...o,hash:N}),v[11]=l,v[12]=o,v[13]=C,v[14]=N,v[15]=d,v[16]=x):x=v[16],v[17]!==t||v[18]!==x?(y=(0,i.jsx)(s.G,{"aria-label":"File Tree",className:t,children:x}),v[17]=t,v[18]=x,v[19]=y):y=v[19],y});try{x.displayName||(x.displayName="File")}catch{}try{b.displayName||(b.displayName="Directory")}catch{}try{y.displayName||(y.displayName="TraditionalDirectoryRendering")}catch{}try{v.displayName||(v.displayName="GroupedDirectoryRendering")}catch{}try{C.displayName||(C.displayName="DiffFileTree")}catch{}function N(e){return{path:e.filePath,pathType:"file",node:e}}function j(e){return{path:e.path,pathType:"directory",node:e}}function w(e,t){return(0,c.wH)(e.path,t.path)}},26940:(e,t,n)=>{n.d(t,{kF:()=>g,F7:()=>p});var i,r=n(74848),l=n(21728),a=n(38621),s=n(9591),o=n(89323),d=n(87330),c=n(63867),u=n(15385),f=n(96540),m=n(34164);let h={filterLoadingHeight:"FileFilter-module__filterLoadingHeight--cW8BP",filterMaxHeight:"FileFilter-module__filterMaxHeight--TgM5t"},p="No extension";function g({filterSize:e="medium",filterText:t,onFilterTextChange:n,fileExtensions:i,unselectedFileExtensions:l,onFilterChange:c,additionalFilterGroups:g}){i=i??{},l=l??new Set;let[x,b]=(0,f.useState)(t),y=(e,t)=>{c?.(e?"selectFileExtension":"unselectFileExtension",{extension:t})},v=Object.keys(i).filter(e=>e!==p).sort(),C=e=>!l.has(e),N=!!i[p];return(0,r.jsxs)("div",{className:"d-flex flex-nowrap gap-2",children:[(0,r.jsx)(s.A,{block:!0,"aria-label":"Filter files\u2026",leadingVisual:a.SearchIcon,placeholder:"Filter files\u2026",size:e,className:(0,m.$)("small"===e&&h.filterMaxHeight),value:x,onChange:e=>{b(e.target.value),n?.(e.target.value)}}),(0,r.jsxs)(o.W,{children:[(0,r.jsx)(o.W.Anchor,{children:(0,r.jsx)(d.K,{"aria-label":"Filter options",icon:a.SlidersIcon,className:"flex-shrink-0",size:e})}),(0,r.jsx)(o.W.Overlay,{children:(0,r.jsxs)(u.l,{children:[(0,r.jsxs)(u.l.Group,{selectionVariant:"multiple",children:[(0,r.jsx)(u.l.GroupHeading,{children:"File extensions"}),v.map(e=>{let t=C(e);return(0,r.jsx)(u.l.Item,{selected:t,onSelect:()=>y(!t,e),children:`${e} (${i[e]})`},e)}),N&&(0,r.jsx)(u.l.Item,{selected:C(p),onSelect:()=>y(!C(p),p),children:`${p} (${i[p]})`},p)]}),g]})})]})]})}try{(i=function(e){let t,n,i,u,f,p=(0,l.c)(9),{filterText:g,onFilterTextChange:x}=e;return p[0]!==x?(t=e=>x?.(e.target.value),p[0]=x,p[1]=t):t=p[1],p[2]!==g||p[3]!==t?(n=(0,r.jsx)(s.A,{block:!0,"aria-label":"Filter files\u2026",leadingVisual:a.SearchIcon,placeholder:"Filter files\u2026",value:g,onChange:t}),p[2]=g,p[3]=t,p[4]=n):n=p[4],p[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.jsx)(o.W.Anchor,{children:(0,r.jsx)(d.K,{"aria-label":"Filter options",icon:a.SlidersIcon,className:"flex-shrink-0"})}),p[5]=i):i=p[5],p[6]===Symbol.for("react.memo_cache_sentinel")?(u=(0,r.jsxs)(o.W,{children:[i,(0,r.jsx)(o.W.Overlay,{className:(0,m.$)(h.filterLoadingHeight),children:(0,r.jsx)("div",{className:(0,m.$)("d-flex","flex-column","flex-justify-center","flex-items-center",h.filterLoadingHeight),children:(0,r.jsx)(c.A,{size:"medium"})})})]}),p[6]=u):u=p[6],p[7]!==n?(f=(0,r.jsxs)("div",{className:"d-flex flex-nowrap gap-2",children:[n,u]}),p[7]=n,p[8]=f):f=p[8],f}).displayName||(i.displayName="FileFilterLoading")}catch{}try{g.displayName||(g.displayName="FileFilterShared")}catch{}},58990:(e,t,n)=>{n.d(t,{E:()=>a});var i=n(74848),r=n(21728),l=n(38621);function a(e){let t=(0,r.c)(4),{status:n}=e;switch(n){case"ADDED":case"COPIED":{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(l.FileAddedIcon,{size:16,className:"fgColor-success"}),t[0]=e):e=t[0],e}case"DELETED":case"REMOVED":{let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(l.FileRemovedIcon,{size:16,className:"fgColor-danger"}),t[1]=e):e=t[1],e}case"RENAMED":{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(l.FileMovedIcon,{size:16,className:"fgColor-attention"}),t[2]=e):e=t[2],e}default:{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(l.FileDiffIcon,{size:16,className:"fgColor-muted"}),t[3]=e):e=t[3],e}}}try{a.displayName||(a.displayName="FileStatusIcon")}catch{}},86388:(e,t,n)=>{n.d(t,{G:()=>O});var i=n(74848),r=n(21728),l=n(38621),a=n(89323),s=n(15385),o=n(34164),d=n(84217),c=n(55847),u=n(98939),f=n(96540),m=n(7799),h=n(96235),p=n(25772),g=n(60039);function x(e){return!e.dismissed}function b(e){return 0===(function(){let e,t,n=(0,r.c)(5),i=(0,p.B)();if(!i){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],n[0]=e):e=n[0],e}n[1]!==i.userNotices?(e=i.userNotices??[],n[1]=i.userNotices,n[2]=e):e=n[2];let l=e;return n[3]!==l?(t=l.filter(x),n[3]=l,n[4]=t):t=n[4],t})().filter(t=>t.name===e).length}var y=n(4203);let v="compact_diff_lines";function C(){let e,t,n,l,a,s,o,p,x,C,w,L,S,k=(0,r.c)(22),I=b(v),{dismissNotice:D}=function(e){let t,n,i=(0,r.c)(5),l=b(e);i[0]!==l||i[1]!==e?(t=()=>{(0,m.M3)()&&!l&&(0,g.DI)((0,h.VB1)({noticeName:e}),{method:"POST"})},i[0]=l,i[1]=e,i[2]=t):t=i[2];let a=t;return i[3]!==a?(n={dismissNotice:a},i[3]=a,i[4]=n):n=i[4],n}(v);k[0]===Symbol.for("react.memo_cache_sentinel")?(e={onSuccess:j,onError:N},k[0]=e):e=k[0];let{mutate:E}=(0,y.U)(e),[R,_]=(0,f.useState)(!0);k[1]!==D||k[2]!==E?(t=()=>{E({lineSpacing:"compact"}),_(!1),D()},k[1]=D,k[2]=E,k[3]=t):t=k[3];let A=t;k[4]!==D?(n=()=>{_(!1),D()},k[4]=D,k[5]=n):n=k[5];let T=n;return I?null:(k[6]===Symbol.for("react.memo_cache_sentinel")?(l={top:"60px",right:"-4px"},k[6]=l):l=k[6],k[7]===Symbol.for("react.memo_cache_sentinel")?(a={minWidth:"260px",width:"40%"},k[7]=a):a=k[7],k[8]===Symbol.for("react.memo_cache_sentinel")?(s=(0,i.jsx)(d.A,{sx:{fontSize:2},as:"h2",children:"Customizable line height"}),o=(0,i.jsx)("p",{children:"The default line height has been increased for improved accessibility. You can choose to enable a more compact line height from the view settings menu."}),k[8]=s,k[9]=o):(s=k[8],o=k[9]),k[10]===Symbol.for("react.memo_cache_sentinel")?(p={flexShrink:0,flexGrow:1},k[10]=p):p=k[10],k[11]!==A?(x=(0,i.jsx)(c.Q,{onClick:A,sx:p,children:"Enable compact line height"}),k[11]=A,k[12]=x):x=k[12],k[13]===Symbol.for("react.memo_cache_sentinel")?(C={color:"accent.fg",flexGrow:1},k[13]=C):C=k[13],k[14]!==T?(w=(0,i.jsx)(c.Q,{onClick:T,variant:"invisible",sx:C,alignContent:"center",children:"Dismiss"}),k[14]=T,k[15]=w):w=k[15],k[16]!==w||k[17]!==x?(L=(0,i.jsxs)(u.A.Content,{className:"d-flex flex-column gap-2",sx:a,children:[s,o,(0,i.jsxs)("div",{className:"d-flex gap-2 flex-row w-full flex-wrap",children:[x,w]})]}),k[16]=w,k[17]=x,k[18]=L):L=k[18],k[19]!==R||k[20]!==L?(S=(0,i.jsx)(u.A,{open:R,caret:"top-right",sx:l,children:L}),k[19]=R,k[20]=L,k[21]=S):S=k[21],S)}function N(){}function j(){}try{C.displayName||(C.displayName="DiffCompactLinesPopover")}catch{}var w=n(80804),L=n(97665);function S(e){let t,n,l,a,o,d=(0,r.c)(16),{lineSpacingPreferenceAvailable:c,onUpdateWhitespace:u,reloadOnChange:f}=e,m=void 0===c||c,h=void 0!==f&&f,{data:p}=(0,w.Pe)();d[0]===Symbol.for("react.memo_cache_sentinel")?(t={onSuccess:I,onError:k},d[0]=t):t=d[0];let{mutate:g}=(0,y.U)(t),x=(0,L.jE)();d[1]!==p||d[2]!==u||d[3]!==x||d[4]!==h?(n=()=>{p&&(x.setQueryData((0,w.nZ)(),e=>({...e,hideWhitespace:!p.hideWhitespace})),(0,w.bJ)("w",p.hideWhitespace?"0":"1"),h?window.location.reload():u?.(!p.hideWhitespace))},d[1]=p,d[2]=u,d[3]=x,d[4]=h,d[5]=n):n=d[5];let b=n;return p?(d[6]!==p.hideWhitespace||d[7]!==b?(l=(0,i.jsx)(s.l.Item,{selected:p.hideWhitespace,onSelect:b,children:"Hide whitespace"}),d[6]=p.hideWhitespace,d[7]=b,d[8]=l):l=d[8],d[9]!==p.lineSpacing||d[10]!==m||d[11]!==g?(a=m&&(0,i.jsx)(s.l.Item,{selected:"compact"===p.lineSpacing,onSelect:()=>g({lineSpacing:"compact"===p.lineSpacing?"relaxed":"compact"}),children:"Compact line height"}),d[9]=p.lineSpacing,d[10]=m,d[11]=g,d[12]=a):a=d[12],d[13]!==l||d[14]!==a?(o=(0,i.jsxs)(s.l.Group,{"aria-label":"Format",selectionVariant:"multiple",variant:"subtle",children:[l,a]}),d[13]=l,d[14]=a,d[15]=o):o=d[15],o):null}function k(){}function I(){}try{S.displayName||(S.displayName="DiffLinePresentationToggles")}catch{}function D(e){let t,n,l,a,o,d,c,u=(0,r.c)(17),{reloadOnChange:f}=e,m=void 0!==f&&f,{data:h}=(0,w.Pe)(),p=h?.splitPreference;u[0]===Symbol.for("react.memo_cache_sentinel")?(t={onSuccess:R,onError:E},u[0]=t):t=u[0];let{mutate:g}=(0,y.U)(t);u[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(s.l.GroupHeading,{children:"Layout"}),u[1]=n):n=u[1];let x="unified"===p;u[2]!==m||u[3]!==g?(l=()=>{g({splitPreference:"unified"}),(0,w.bJ)("diff","unified"),m&&window.location.reload()},u[2]=m,u[3]=g,u[4]=l):l=u[4],u[5]!==x||u[6]!==l?(a=(0,i.jsx)(s.l.Item,{selected:x,onSelect:l,children:"Unified"}),u[5]=x,u[6]=l,u[7]=a):a=u[7];let b="split"===p;return u[8]!==m||u[9]!==g?(o=()=>{g({splitPreference:"split"}),(0,w.bJ)("diff","split"),m&&window.location.reload()},u[8]=m,u[9]=g,u[10]=o):o=u[10],u[11]!==b||u[12]!==o?(d=(0,i.jsx)(s.l.Item,{selected:b,onSelect:o,children:"Split"}),u[11]=b,u[12]=o,u[13]=d):d=u[13],u[14]!==a||u[15]!==d?(c=(0,i.jsxs)(s.l.Group,{selectionVariant:"single",children:[n,a,d]}),u[14]=a,u[15]=d,u[16]=c):c=u[16],c}function E(){}function R(){}try{D.displayName||(D.displayName="DiffViewPreferenceToggle")}catch{}var _=n(39419);function A(){let e,t,n,l,a=(0,r.c)(8),{data:o}=(0,w.Pe)();a[0]===Symbol.for("react.memo_cache_sentinel")?(e={onSuccess:M,onError:T},a[0]=e):e=a[0];let{mutate:d}=(0,y.U)(e);if(!o)return null;let c=o.commentsPreference===_.sI.Collapsed;return a[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(s.l.Divider,{}),a[1]=t):t=a[1],a[2]!==c||a[3]!==d?(n=()=>d({commentsPreference:c?_.sI.Visible:_.sI.Collapsed}),a[2]=c,a[3]=d,a[4]=n):n=a[4],a[5]!==c||a[6]!==n?(l=(0,i.jsxs)(i.Fragment,{children:[t,(0,i.jsx)(s.l.Group,{"aria-label":"Comments",selectionVariant:"single",children:(0,i.jsx)(s.l.Item,{role:"menuitemcheckbox",selected:c,onSelect:n,children:"Minimize comments"})})]}),a[5]=c,a[6]=n,a[7]=l):l=a[7],l}function T(){}function M(){}try{A.displayName||(A.displayName="DiffCommentsPreferenceToggle")}catch{}function O(e){let t,n,d,c,u,f,m,h,p,g,x,b=(0,r.c)(23),{invisible:y,lineSpacingPreferenceAvailable:v,onUpdateWhitespace:N,reloadOnSplitPreferenceChange:j,reloadOnWhitespaceChange:w,small:L}=e,k=void 0===v||v,I=void 0!==j&&j,E=void 0!==w&&w,R=void 0===y||y?"Button--invisible":"Button--secondary",_=L&&"Button--small";return b[0]!==R||b[1]!==_?(t=(0,o.$)("Button Button--iconOnly",R,_),b[0]=R,b[1]=_,b[2]=t):t=b[2],b[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(l.GearIcon,{}),b[3]=n):n=b[3],b[4]!==t?(d=(0,i.jsx)(a.W.Anchor,{children:(0,i.jsx)("button",{className:t,"aria-label":"Open diff view settings",children:n})}),b[4]=t,b[5]=d):d=b[5],b[6]!==I?(c=(0,i.jsx)(D,{reloadOnChange:I}),b[6]=I,b[7]=c):c=b[7],b[8]===Symbol.for("react.memo_cache_sentinel")?(u=(0,i.jsx)(A,{}),f=(0,i.jsx)(s.l.Divider,{}),b[8]=u,b[9]=f):(u=b[8],f=b[9]),b[10]!==k||b[11]!==N||b[12]!==E?(m=(0,i.jsx)(S,{lineSpacingPreferenceAvailable:k,onUpdateWhitespace:N,reloadOnChange:E}),b[10]=k,b[11]=N,b[12]=E,b[13]=m):m=b[13],b[14]!==c||b[15]!==m?(h=(0,i.jsx)(a.W.Overlay,{children:(0,i.jsxs)(s.l,{children:[c,u,f,m]})}),b[14]=c,b[15]=m,b[16]=h):h=b[16],b[17]!==h||b[18]!==d?(p=(0,i.jsxs)(a.W,{children:[d,h]}),b[17]=h,b[18]=d,b[19]=p):p=b[19],b[20]===Symbol.for("react.memo_cache_sentinel")?(g=(0,i.jsx)(C,{}),b[20]=g):g=b[20],b[21]!==p?(x=(0,i.jsxs)(i.Fragment,{children:[p,g]}),b[21]=p,b[22]=x):x=b[22],x}try{O.displayName||(O.displayName="DiffViewSettings")}catch{}},63869:(e,t,n)=>{n.d(t,{L:()=>o});var i=n(74848),r=n(21728),l=n(38621),a=n(87330),s=n(34164);let o=n(96540).forwardRef((e,t)=>{let n,o,d,c=(0,r.c)(17),{expanded:u,testid:f,ariaLabel:m,ariaControls:h,onToggleExpanded:p,alignment:g,dataHotkey:x,className:b,size:y,tooltipDirection:v,variant:C}=e,N=u?`collapse-${f}`:`expand-${f}`,j=u?"left"===g?l.SidebarExpandIcon:l.SidebarCollapseIcon:"left"===g?l.SidebarCollapseIcon:l.SidebarExpandIcon;c[0]!==p?(n=e=>{p(e)},c[0]=p,c[1]=n):n=c[1];let w=C??"invisible";return c[2]!==b?(o=(0,s.$)(b,"fgColor-muted"),c[2]=b,c[3]=o):o=c[3],c[4]!==h||c[5]!==m||c[6]!==x||c[7]!==u||c[8]!==t||c[9]!==y||c[10]!==N||c[11]!==j||c[12]!==n||c[13]!==w||c[14]!==o||c[15]!==v?(d=(0,i.jsx)(a.K,{"aria-label":m,tooltipDirection:v,ref:t,"data-testid":N,"aria-expanded":u,"aria-controls":h,icon:j,"data-hotkey":x,onClick:n,variant:w,size:y,className:o}),c[4]=h,c[5]=m,c[6]=x,c[7]=u,c[8]=t,c[9]=y,c[10]=N,c[11]=j,c[12]=n,c[13]=w,c[14]=o,c[15]=v,c[16]=d):d=c[16],d});o.displayName="ExpandButton"},11704:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var i=n(74848),r=n(80663),l=n(6869),a=n(75177),s=n(63867),o=n(96540);let d={ERROR:"ERROR",LOADING:"LOADING",LOADED:"LOADED",READY:"READY"};function c(e){e&&(e.load=e.hello=null,e.helloTimer&&(clearTimeout(e.helloTimer),e.helloTimer=null),e.loadTimer&&(clearTimeout(e.loadTimer),e.loadTimer=null))}function u(e,t){e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")}let f={FileRendererWrapper:"FileRendererBlob-module__FileRendererWrapper--PLJ7W",FileRendererViewport:"FileRendererBlob-module__FileRendererViewport--WwSdq",loadingIndicator:"FileRendererBlob-module__loadingIndicator--P3luP",fileContentFrame:"FileRendererBlob-module__fileContentFrame--tPzAR",errorMessageHeading:"FileRendererBlob-module__errorMessageHeading--omRNb"};function m({identityUuid:e,size:t,type:n,url:m}){let[p]=(0,r.I)(()=>window.location.origin,"https://www.github.com",[]),g=new URL(m,p).origin,{renderState:x,errorMsg:b,iFrameRef:y,containerRef:v}=function(e){let[t,n]=function(e){let[t,n]=(0,o.useState)(e),i=(0,o.useRef)(t);return[i,e=>{i.current=e,n(e)}]}(d.LOADING),i=(0,o.useRef)(null),r=(0,o.useRef)(null),l=(0,o.useRef)(null),a=(0,o.useRef)({untimed:!0}),s=(0,o.useCallback)(t=>(function(e,t,n,i,r,l,a){if(e.origin!==t)return;let s=function(e){var t;let n=e.data;if(!n)return null;if("string"==typeof n)try{n=JSON.parse(n)}catch{return null}return"object"==typeof(t=n)&&t&&"render"===t.type&&"string"==typeof t.body&&"object"==typeof t.payload?n:null}(e);if(!s)return void l(d.ERROR);let o=s.body,c=null!=s.payload?s.payload:void 0,f=n.current?.contentWindow;switch(o){case"hello":(r.current??{untimed:!0}).hello=Date.now(),u(f,{type:"render:cmd",body:{cmd:"ack",ack:!0}}),u(f,{type:"render:cmd",body:{cmd:"branding",branding:!1}});break;case"error":case"error:fatal":case"error:invalid":c&&a(c.error??null),l(d.ERROR);break;case"loading":l(d.LOADING);break;case"loaded":l(d.LOADED);break;case"ready":c&&"number"==typeof c.height&&i.current&&(i.current.style.height=`${c.height}px`),l(d.READY);break;case"resize":c&&"number"==typeof c.height&&i.current&&(i.current.style.height=`${c.height}px`);break;case"code_rendering_service:container:get_size":u(f,{type:"render:cmd",body:{cmd:"code_rendering_service:container:size","code_rendering_service:container:size":{width:i.current?.getBoundingClientRect().width}}});break;case"code_rendering_service:markdown:get_data":if(!n.current||!i.current)return;!function(e,t){let n=e.getAttribute("data-content");if(!n)return;let i={type:"render:cmd",body:{cmd:"code_rendering_service:data:ready","code_rendering_service:data:ready":{data:JSON.parse(n).data,width:t.getBoundingClientRect().width}}};u(e.contentWindow,i)}(n.current,i.current)}})(t,e,r,l,a,n,e=>i.current=e),[e,n]);return(0,o.useEffect)(()=>{c(a.current);let e=e=>{(t.current===d.LOADING||t.current===d.LOADED)&&(!e||a.current.hello)&&n(d.ERROR)};return a.current={load:Date.now(),hello:null,helloTimer:window.setTimeout(e,1e4,!0),loadTimer:window.setTimeout(e,45e3)},()=>{c(a.current)}},[t,n]),(0,o.useEffect)(()=>(window.addEventListener("message",s),()=>window.removeEventListener("message",s)),[s]),{renderState:t.current,errorMsg:i.current,iFrameRef:r,containerRef:l}}(g);if("ipynb"===n&&t>3e7||t>2e8)return(0,i.jsx)(l.A,{variant:"danger",children:"Sorry, this is too big to display."});let C=x!==d.READY?{height:"1px",width:"1px",position:"fixed",bottom:0,right:0}:{height:"100%",width:"100%"};return(0,i.jsx)("div",{className:f.FileRendererWrapper,children:(0,i.jsxs)(a.A,{"data-hpc":!0,"data-host":g,"data-type":n,ref:v,sx:{...x!==d.ERROR?{borderBottomLeftRadius:"6px",borderBottomRightRadius:"6px",lineHeight:"0",padding:5,textAlign:"center"}:{},...x===d.READY?{height:"500px",padding:0,background:"none"}:{}},className:f.FileRendererViewport,children:[x===d.ERROR?(0,i.jsx)(h,{error:b}):x!==d.READY?(0,i.jsx)(s.A,{size:"large",className:f.loadingIndicator}):null,x!==d.ERROR&&(0,i.jsx)(a.A,{as:"iframe",ref:y,src:`${m}#${e}`,sandbox:"allow-scripts allow-same-origin allow-top-navigation",sx:{...C},name:e,title:"File display",className:f.fileContentFrame,children:"Viewer requires iframe."})]})})}function h({error:e}){if(!e)return(0,i.jsx)(l.A,{variant:"danger",children:"Unable to render code block"});let t=e.split(`
`);return(0,i.jsxs)(l.A,{variant:"danger",children:[(0,i.jsx)("p",{className:f.errorMessageHeading,children:"Error rendering embedded code"}),(0,i.jsx)("p",{children:t.map((e,t)=>(0,i.jsxs)(o.Fragment,{children:[e,(0,i.jsx)("br",{})]},`error-line-${t}`))})]})}try{m.displayName||(m.displayName="FileRendererBlob")}catch{}try{h.displayName||(h.displayName="FileRendererErrorMessage")}catch{}},81351:(e,t,n)=>{n.d(t,{Gx:()=>s});var i=n(74848),r=n(21728),l=n(83829);function a(e){let t,n=(0,r.c)(2),{char:l}=e;return n[0]!==l?(t=(0,i.jsx)("span",{className:"hidden-unicode-replacement padded",children:l}),n[0]=l,n[1]=t):t=n[1],t}function s(e){return(0,l.Y)(e)?(0,l.t6)(e).map(e=>{let t=l.A0.get(e);return t?`<span class="hidden-unicode-replacement">${t}</span>`:e}).join(""):null}try{a.displayName||(a.displayName="HiddenUnicodeCharacter")}catch{}},69851:(e,t,n)=>{n.d(t,{x:()=>c});var i=n(74848),r=n(21728),l=n(88191),a=n(96540),s=n(80663);function o(e,t){let n,a,o,c,u,f,m=(0,r.c)(13);m[0]!==e?({children:n,src:o,...a}=e,m[0]=e,m[1]=n,m[2]=a,m[3]=o):(n=m[1],a=m[2],o=m[3]),m[4]===Symbol.for("react.memo_cache_sentinel")?(c=[],m[4]=c):c=m[4];let[h]=(0,s.I)(d,!0,c);return m[5]!==h||m[6]!==o?(u=h?{}:{src:o,"data-nonce":(0,l.M1)()},m[5]=h,m[6]=o,m[7]=u):u=m[7],m[8]!==n||m[9]!==a||m[10]!==t||m[11]!==u?(f=(0,i.jsx)("include-fragment",{...a,ref:t,...u,children:n}),m[8]=n,m[9]=a,m[10]=t,m[11]=u,m[12]=f):f=m[12],f}function d(){return!1}let c=(0,a.forwardRef)(o);try{o.displayName||(o.displayName="IncludeFragmentWithRef")}catch{}try{c.displayName||(c.displayName="IncludeFragment")}catch{}}}]);
//# sourceMappingURL=ui_packages_diff-lines_diff-lines_ts-ui_packages_diff-lines_hooks_use-selected-diff-hash_ts-u-62bb97-55fb119a774e.js.map