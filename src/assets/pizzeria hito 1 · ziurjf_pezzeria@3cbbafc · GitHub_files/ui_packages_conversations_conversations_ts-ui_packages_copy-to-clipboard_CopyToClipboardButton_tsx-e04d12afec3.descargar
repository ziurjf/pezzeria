"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_conversations_conversations_ts-ui_packages_copy-to-clipboard_CopyToClipboardButton_tsx"],{74088:(e,t,i)=>{i.d(t,{Su:()=>a.S,UA:()=>o.U,yF:()=>x,cT:()=>T,i4:()=>_.i,L4:()=>D.L});var n=i(15088);i(30754);var a=i(99588);i(83283);var o=i(62812),l=i(74848),r=i(6489),s=i(80221),d=i(9808),c=i(13233),m=i(42083),u=i(96679),f=i(99543),h=i(75177),p=i(96540),g=i(38666);function x({isAnchorable:e=!1,index:t=0,isLastChild:i,anchorPrefix:n="r",comment:a,commentingImplementation:o,filePath:x,hideActions:b,enterDialogMode:y=c.l,onRefreshThread:C,onQuoteReply:v=c.l,threadCommentCount:N,threadId:j,threadsConnectionId:S,ghostUser:E=d.t.ghostUser}){let{addToast:T}=(0,f.Y6)(),[_,D]=(0,p.useState)(!1),[I,L]=(0,p.useState)(a.isHidden),[A,w]=(0,p.useState)(!1),{deleteComment:R,hideComment:k,unhideComment:O}=o,U=(0,p.useRef)(null),P=(0,p.useRef)(null),$=()=>{U.current?.focus()};(0,p.useEffect)(()=>{if(_){let e=window.setTimeout($);return()=>{window.clearTimeout(e)}}},[_]);let H=a.currentDiffResourcePath?.split("#r").pop(),M=H?`${n}${H}`:void 0,B=M&&u.fV?new URL(`${u.fV.pathname}#${M}`,u.fV.origin).toString():void 0,G=(0,p.useRef)(null);(0,p.useEffect)(()=>{e&&H&&M&&window.location.hash.split("#").pop()===M&&((0,g.p)(H,n),y?.(!1),G.current?.focus())},[n,M,H,y,e]);let F={outline:"2px solid",outlineColor:"accent.fg",outlineOffset:"-2px",boxShadow:"none"},V=t>0,q=t>1,z={headingProps:{as:"h3"},avatarUrl:a.author?.avatarUrl??E.avatarUrl,comment:{...a,url:B??"",referenceText:a.reference.text??`#${a.reference.number}`},commentRef:G,deleteComment:()=>{R({commentId:a.id,onCompleted:()=>{C?.(j)},onError:()=>{w(!1),T({type:"error",message:"Failed to delete comment"})},threadCommentCount:N,threadId:j,threadsConnectionId:S,filePath:x})},editComment:()=>{D(!0)},editHistoryComponent:void 0,hideComment:e=>{k({commentDatabaseId:a.databaseId,reason:e,onCompleted:()=>{C?.(j)},onError:()=>{w(!1),T({type:"error",message:"Failed to hide comment"})}})},onMinimize:L,isMinimized:I,commentAuthorLogin:a.author?.login??E.login,navigate:c.l,commentSubjectAuthorLogin:a.reference?.author?.login??"",commentSubjectType:o.commentSubjectType,onReplySelect:v,unhideComment:()=>{O({commentDatabaseId:a.databaseId,onCompleted:()=>{C?.(j)},onError:()=>{w(!1),T({type:"error",message:"Failed to unhide comment"})}})},hideActions:b,isReply:V,forceInlineAvatar:!0,containerStyle:{}};return(0,l.jsxs)(h.A,{ref:G,id:e?M:void 0,tabIndex:-1,sx:{"&:not(:first-child)":{backgroundColor:"canvas.inset"},"&:first-child + div":{borderTop:"1px solid",borderColor:"border.muted"},":target":F,":focus":F,pb:2*!V},children:[q&&(0,l.jsx)(h.A,{sx:{display:"flex",pl:+!!V},children:(0,l.jsx)(h.A,{sx:{ml:4,height:8,borderLeft:"1px solid",borderColor:"border.default"}})}),(0,l.jsx)(h.A,{sx:{px:3,pt:2*!q,pb:0},children:(0,l.jsx)(r.v,{...z,actions:b?void 0:(0,l.jsx)(s.p,{...z})})}),(0,l.jsxs)(h.A,{sx:{display:"flex",pl:+!!V},children:[V&&(0,l.jsx)(h.A,{sx:{ml:4,mr:1,pl:3,borderLeft:"1px solid",borderColor:"border.default",...i&&{borderImage:"linear-gradient(to bottom, var(--borderColor-default, var(--color-border-default)), rgba(0, 0, 0, 0)) 1 100%"}}}),(0,l.jsx)(h.A,{sx:V?{pb:2,pr:2,overflowX:"auto",width:"100%"}:{px:3,pb:2,width:"100%"},children:a.bodyHTML&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(m.oG,{ref:P,className:"markdown-body","comment-testid":`Comment body html for comment ${a.id}`,html:a.bodyHTML,sx:{mt:1,fontSize:1}})})})]})]})}try{x.displayName||(x.displayName="ReviewThreadCommentWithoutReactions")}catch{}var b=i(75367),y=i(85349),C=i(58655),v=i(39459),N=i(38621),j=i(84217),S=i(87330);function E({addCommentDialogTitle:e,isLeftSide:t,filePath:i,lineNumber:a,onAddComment:o,onClose:r,viewerData:s,threadsConnectionId:d,showOnCloseIcon:c=!0,...m}){return(0,l.jsxs)("div",{className:"px-2 pb-2 pt-1",children:[(0,l.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center",children:[(0,l.jsxs)(j.A,{as:"h4",className:"f5 ml-1 pt-1 pb-2",children:[(0,l.jsx)(v.r,{alt:s.login,size:24,src:s.avatarUrl||"",className:"mr-2"}),(0,l.jsx)("span",{children:e??"Add a comment"})]}),r&&c&&(0,l.jsx)(S.K,{variant:"invisible",icon:N.XIcon,onClick:r,"aria-label":"Cancel"})]}),(0,l.jsx)(n.U,{focusOnMount:!0,condensed:!1,fileLevelComment:!1,filePath:i,lineNumber:a,onAddComment:({commentText:e,onCompleted:t,onError:n,submitBatch:a})=>{o({text:e,onError:n,onCompleted:(e,i)=>{i&&(0,g.p)(i.toString()),t?.(e,i)},submitBatch:a,filePath:i,threadsConnectionId:d})},onCancelComment:r,side:t?"LEFT":"RIGHT",...m})]})}try{E.displayName||(E.displayName="StartThreadComment")}catch{}function T({align:e="end",anchorRef:t,isOpen:i,isDialog:n=!0,returnFocusRef:a,onCloseCommentDialog:o,suggestedChangesConfig:r,...s}){let{sendAnalyticsEvent:d}=(0,b.s)(),{isInDialogMode:m}=(0,C.q)(),u=(0,p.useMemo)(()=>{if(i&&r?.configureSuggestedChangesFromLineRange)return r.configureSuggestedChangesFromLineRange(r?.selectedDiffRowRange,r?.shouldStartNewConversationWithSuggestedChange)},[i,r]);return i?n?(0,l.jsx)(y.T,{align:e,anchorRef:t,focusZoneSettings:{disabled:!0},open:i,renderAnchor:null,focusTrapSettings:{disabled:!0},overlayProps:{id:"conversation-dialog",role:"dialog",width:"xlarge",preventOverflow:!1,returnFocusRef:a,sx:{borderRadius:2},"aria-label":"Add a comment",onClickOutside:c.l,onKeyDown:e=>{"Escape"!==e.key&&e.stopPropagation()}},onClose:o,children:(0,l.jsx)(E,{onClose:()=>{o(),d("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},suggestedChangesConfig:u,...s})}):(0,l.jsx)("div",{className:"rounded-2 bgColor-default","data-marker-id":"new-comment",tabIndex:m?0:-1,children:(0,l.jsx)(E,{onClose:()=>{o(),d("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},showOnCloseIcon:!1,suggestedChangesConfig:u,...s})}):null}try{T.displayName||(T.displayName="StartConversation")}catch{}var _=i(64058),D=i(35608);i(55238),c.l,c.l,c.l,c.l,c.l,c.l,c.l,c.l,c.l,c.l,c.l,c.l,c.l,c.l,c.l,c.l},38666:(e,t,i)=>{i.d(t,{p:()=>a});var n=i(66871);function a(e,t="r"){(0,n.Zu)(`#${t}${e}`)}},35608:(e,t,i)=>{i.d(t,{L:()=>c});var n=i(85351),a=i(44263),o=i(96540);let{getItem:l,removeItem:r,setItem:s}=(0,n.D)("localStorage"),d=(e,t)=>{let{diffSide:i,filePath:n,line:a,subjectId:o}=e;if(t)return`PullRequest:${o}-File:${n}`;if(void 0!==a&&void 0!==i)return`PullRequest:${o}-File:${n}-Line:${a}-DiffSide:${i}`;throw Error("Cannot build diff line comment cache key for a comment without a line number or diff side")};function c({diffSide:e,filePath:t,handlePersistedCommentExists:i,line:n,subjectId:c,threadId:m,fileLevelComment:u}){var f,h;let p,g,[x,b]=(0,o.useState)(!1),y=(0,o.useMemo)(()=>m||(m??d({diffSide:e,filePath:t,line:n,subjectId:c},u)),[e,t,n,c,m,u]),{hasPersistedComment:C,removePersistedCommentFromStorage:v}=(f=y,h=i,p=l(f),g=!!p?.text?.trim(),(0,o.useEffect)(()=>{g&&h?.(p)},[g]),{hasPersistedComment:g,removePersistedCommentFromStorage:()=>{r(f),g=!1,p=null}});return{hasPersistedComment:C,persistCommentToStorage:(0,a.d)(e=>{if(x)return;let t={text:e.text};e.startLine&&e.startSide&&(t={...t,startLine:e.startLine,startSide:e.startSide});try{s(y,t)}catch{b(!0)}},1e3),removePersistedCommentFromStorage:v}}},43032:(e,t,i)=>{function n(e,t){return t.some(t=>{var i,n;return i=t,n=e,i.commentId===n.commentId&&i.path===n.path&&i.suggestion.length===n.suggestion.length&&a(i.suggestion,n.suggestion)})}i.d(t,{EJ:()=>r,Lm:()=>s,c0:()=>n,o_:()=>l});let a=(e,t)=>e.length===t.length&&!e.some((e,i)=>e!==t[i]),o={USER_CANNOT_APPLY_SUGGESTION:"You do not have permission to apply this suggestion.",PULL_REQUEST_IS_CLOSED:"This suggestion cannot be applied because the pull request is closed.",PULL_REQUEST_IS_IN_MERGE_QUEUE:"This suggestion cannot be applied because the pull request is queued to merge.",IS_OUTDATED:"This suggestion is outdated and cannot be applied.",IS_PENDING:"This suggestion is part of a pending comment and cannot be applied.",IS_RESOLVED:"This suggestion is part of a resolved comment and cannot be applied.",UNCHANGED_CODE:"This suggestion is invalid because no changes were made to the code.",INVALID_RANGE:"Unable to commit due to other pending changes affecting this line.",BATCH_TOO_BIG:"Unable to commit due to too many changes in the batch.",DELETED_LINES:"Unable to apply suggestions on deleted lines.",RANGE_NOT_PROVIDED:"This suggestion does not have a valid line range.",UNABLE_TO_DETERMINE_VALIDITY:"Unable to determine the validity of this suggestion."};function l({suggestedChange:e,isOutdated:t,isPending:i,isResolved:n,pullRequestIsClosed:a,pullRequestIsInMergeQueue:l,userCanApplySuggestion:r,applySuggestedChangesValidationData:s,suggestedChangesConfig:d}){let{lineRange:c}=s;if(t)return{isValid:!1,reason:o.IS_OUTDATED};if(i)return{isValid:!1,reason:o.IS_PENDING};if(n)return{isValid:!1,reason:o.IS_RESOLVED};if(a)return{isValid:!1,reason:o.PULL_REQUEST_IS_CLOSED};if(l)return{isValid:!1,reason:o.PULL_REQUEST_IS_IN_MERGE_QUEUE};if(!r)return{isValid:!1,reason:o.USER_CANNOT_APPLY_SUGGESTION};if(!c)return{isValid:!1,reason:o.RANGE_NOT_PROVIDED};if(!d)return{isValid:!1,reason:o.UNABLE_TO_DETERMINE_VALIDITY};if(!d?.isValidSuggestionRange)return{isValid:!1,reason:o.DELETED_LINES};let m=d?.sourceContentFromDiffLines,u=e.suggestion.join(`
`);return 0!==e.suggestion.length&&u===m?{isValid:!1,reason:o.UNCHANGED_CODE}:{isValid:!0}}function r(e,t){let i={isValid:!1,reason:o.INVALID_RANGE},n={isValid:!1,reason:o.BATCH_TOO_BIG};return t.length>=50?n:t.find(t=>t.threadId===e.threadId)||function(e,t){for(let a of t)if(e.path===a.path){var i,n;return i=e.lineRange,n=a.lineRange,i.endLineNumber>=n.startLineNumber&&i.startLineNumber<=n.endLineNumber}return!1}(e,t)?i:{isValid:!0}}function s(e){if(!e||"LINE"!==e.subjectType||!e.subject)return;let t=e.subject.startDiffSide??e.subject.endDiffSide;if(!t)return;if(e.isOutdated&&e.subject.originalStartLine&&e.subject.originalEndLine)return{endLineNumber:e.subject.originalEndLine,endOrientation:e.subject.endDiffSide||"RIGHT",startLineNumber:e.subject.originalStartLine,startOrientation:t};if(!e.subject.endLine||!e.subject.endDiffSide)return;let i=e.subject.startLine??e?.subject.endLine;return{endLineNumber:e.subject.endLine,endOrientation:e.subject.endDiffSide,startLineNumber:i,startOrientation:t||"RIGHT"}}},55238:(e,t,i)=>{i.d(t,{U:()=>n});let n={Failure:"FAILURE",Notice:"NOTICE",Warning:"WARNING"}},51891:(e,t,i)=>{function n(e,t){for(let i of function e(t,i=[]){if(""===t)return i;let n=t.match(a());if(!n)return i;let o=n.groups.fence;if(!o)return i;let l=o.includes("~")?"~":"`",r=t.match(function(e,t){let i=a([e],t);return RegExp(`${i.source}(?:\r?
)(?<suggestion>.*?)(?:\r?
)^ {0,3}${e}{${t},}[ 	]*$`,"ms")}(l,o.length));if(!r)return i;let s=0,d=n.groups.indent;""!==d&&(s=d.length);let c=r.groups.suggestion;if(s>0){let e=RegExp(`^ {0,${s}}`,"m");c=c.replace(e,"")}return i.push(c),e(t.slice(r.index+r[0].length),i)}(e))if(i===t)return{isValid:!1,errorMessage:"Suggested change cannot be the same as the original line"};return{isValid:!0,errorMessage:""}}function a(e=["`","~"],t){let i=t?`{${t}}`:"{3,}",n=e.map(e=>`${e}${i}`);return RegExp(`^(?<indent> {0,3})(?<fence>${n.join("|")})suggestion[ 	]*$`,"m")}i.d(t,{u:()=>n})},640:(e,t,i)=>{i.d(t,{D:()=>n});function n(e){if("clipboard"in navigator)return navigator.clipboard.writeText(e);let t=document.body;if(!t)return Promise.reject(Error());let i=function(e){let t=document.createElement("pre");return t.style.width="1px",t.style.height="1px",t.style.position="fixed",t.style.top="5px",t.textContent=e,t}(e);return t.appendChild(i),!function(e){if("clipboard"in navigator)return navigator.clipboard.writeText(e.textContent||"");let t=getSelection();if(null==t)return Promise.reject(Error());t.removeAllRanges();let i=document.createRange();i.selectNodeContents(e),t.addRange(i),document.execCommand("copy"),t.removeAllRanges(),Promise.resolve()}(i),t.removeChild(i),Promise.resolve()}},87591:(e,t,i)=>{function n(e){return`line-${e}`}function a(e,t,i){return`${e}${"left"===t?"L":"R"}${i}`}function o(e){return"DELETION"===e?"left":"right"}function l(e,t=!1,i=!1){if(i)return"var(--bgColor-attention-muted, var(--color-attention-subtle))";switch(e){case"ADDITION":return t?"var(--diffBlob-additionNum-bgColor, var(--diffBlob-addition-bgColor-num))":"var(--diffBlob-additionLine-bgColor, var(--diffBlob-addition-bgColor-line))";case"DELETION":return t?"var(--diffBlob-deletionNum-bgColor, var(--diffBlob-deletion-bgColor-num))":"var(--diffBlob-deletionLine-bgColor, var(--diffBlob-deletion-bgColor-line))";case"HUNK":return t?"var(--diffBlob-hunkNum-bgColor, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-hunkLine-bgColor, var(--bgColor-accent-muted))";case"EMPTY":return t?"var(--diffBlob-emptyNum-bgColor, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-emptyLine-bgColor, var(--bgColor-accent-muted))";default:return}}function r(e){let t=0;if(e)for(let i of e)t=Math.max(t,i?.left??0,i?.right??0);return Math.max(8*t.toString().length+20,40).toString()}i.d(t,{IQ:()=>a,Sq:()=>n,XU:()=>o,c7:()=>r,gK:()=>l})},91215:(e,t,i)=>{i.d(t,{Jg:()=>c,nq:()=>u,uP:()=>f.u,$e:()=>x,P3:()=>p,wj:()=>b,l4:()=>S,Qe:()=>y,Ah:()=>T});var n=i(74848),a=i(21728),o=i(34164),l=i(42083),r=i(87591);let s=e=>{let t,i,s,d,c,m,u,f,h,p,g=(0,a.c)(34),{dragging:x,isHighlighted:b,isLeftColumn:y,colSpan:C,line:v,lineAnchor:N}=e,j=v.html,S="";if(["ADDITION","DELETION"].includes(v.type)&&["+","-"].includes(j[0])){let e;S=j[0],g[0]!==j?(e=j.slice(1),g[0]=j,g[1]=e):e=g[1],j=e}let E=x&&b,T=y&&"HUNK"!==v.type;g[2]!==E||g[3]!==T?(t=(0,o.$)("diff-text-cell",{"border-left color-border-accent-emphasis":E,"border-right":T}),g[2]=E,g[3]=T,g[4]=t):t=g[4],g[5]!==N?(i=N?(0,r.Sq)(N):void 0,g[5]=N,g[6]=i):i=g[6],g[7]!==b||g[8]!==v.type?(s=(0,r.gK)(v.type,!1,b),g[7]=b,g[8]=v.type,g[9]=s):s=g[9],g[10]!==s?(d={backgroundColor:s},g[10]=s,g[11]=d):d=g[11];let _=S,D="ADDITION"===v.type,I="DELETION"===v.type;g[12]!==D||g[13]!==I?(c=(0,o.$)("diff-text syntax-highlighted-line",{addition:D,deletion:I}),g[12]=D,g[13]=I,g[14]=c):c=g[14];let L=e.lineChild,A="HUNK"===v.type;g[15]!==A?(m=(0,o.$)("diff-text-inner",{"color-fg-muted":A}),g[15]=A,g[16]=m):m=g[16];let w="CONTEXT"===v.type?"-7px":void 0;return g[17]!==w?(u={marginLeft:w},g[17]=w,g[18]=u):u=g[18],g[19]!==j||g[20]!==m||g[21]!==u?(f=(0,n.jsx)(l.mo,{className:m,html:j,style:u}),g[19]=j,g[20]=m,g[21]=u,g[22]=f):f=g[22],g[23]!==S||g[24]!==e.lineChild||g[25]!==f||g[26]!==c?(h=(0,n.jsxs)("code",{"data-code-marker":_,className:c,children:[L,f]}),g[23]=S,g[24]=e.lineChild,g[25]=f,g[26]=c,g[27]=h):h=g[27],g[28]!==C||g[29]!==h||g[30]!==t||g[31]!==i||g[32]!==d?(p=(0,n.jsx)("td",{className:t,colSpan:C,id:i,style:d,children:h}),g[28]=C,g[29]=h,g[30]=t,g[31]=i,g[32]=d,g[33]=p):p=g[33],p};try{s.displayName||(s.displayName="DiffText")}catch{}let d=e=>{let t,i,l,s,d,c,m,u,f,h,p,g,x,b=(0,a.c)(30);b[0]!==e?({ariaLabel:t,children:i,hasExpanderButton:s,lineType:m,colSpan:l,interactiveProps:d,isHighlighted:c,...u}=e,b[0]=e,b[1]=t,b[2]=i,b[3]=l,b[4]=s,b[5]=d,b[6]=c,b[7]=m,b[8]=u):(t=b[1],i=b[2],l=b[3],s=b[4],d=b[5],c=b[6],m=b[7],u=b[8]),b[9]!==i?(f=(0,n.jsx)("code",{className:"pr-2",children:i}),b[9]=i,b[10]=f):f=b[10];let y=f;if(d){let e;b[11]!==t||b[12]!==d||b[13]!==y?(e=(0,n.jsx)("button",{className:"diff-line-number-button",...d,"aria-label":t,children:y}),b[11]=t,b[12]=d,b[13]=y,b[14]=e):e=b[14],y=e}let C=d?void 0:t,v=!!d;b[15]!==s||b[16]!==v?(h=(0,o.$)("diff-line-number",{"has-expander":s,clickable:v}),b[15]=s,b[16]=v,b[17]=h):h=b[17];let N=l||1;return b[18]!==c||b[19]!==m?(p=(0,r.gK)(m,!0,c),b[18]=c,b[19]=m,b[20]=p):p=b[20],b[21]!==p?(g={backgroundColor:p},b[21]=p,b[22]=g):g=b[22],b[23]!==u||b[24]!==C||b[25]!==h||b[26]!==N||b[27]!==g||b[28]!==y?(x=(0,n.jsx)("td",{"aria-label":C,"data-line-number":!0,className:h,colSpan:N,style:g,...u,children:y}),b[23]=u,b[24]=C,b[25]=h,b[26]=N,b[27]=g,b[28]=y,b[29]=x):x=b[29],x};try{d.displayName||(d.displayName="LineNumber")}catch{}let c=e=>{let t,i,o,l,r=(0,a.c)(28),{dragging:c,isHighlighted:m,isLeftColumn:u,isSplit:f,lineAnchor:h,line:p,lineChild:g,onLineNumberClick:x}=e,b="CONTEXT"===p.type||"INJECTED_CONTEXT"===p.type,y="ADDITION"!==p.type,C=y||!f,v="DELETION"!==p.type,N=v&&!b||!f,j=f&&b?u?p.left:p.right:p.left;return r[0]!==j||r[1]!==m||r[2]!==p.left||r[3]!==p.right||r[4]!==p.type||r[5]!==x||r[6]!==y||r[7]!==C?(t=C&&(0,n.jsx)(d,{ariaLabel:`Line ${y?p.left?.toString():p.right?.toString()}`,lineType:p.type,interactiveProps:x?{onClick:x}:null,isHighlighted:m,children:y&&j}),r[0]=j,r[1]=m,r[2]=p.left,r[3]=p.right,r[4]=p.type,r[5]=x,r[6]=y,r[7]=C,r[8]=t):t=r[8],r[9]!==m||r[10]!==p.left||r[11]!==p.right||r[12]!==p.type||r[13]!==x||r[14]!==v||r[15]!==N?(i=N&&(0,n.jsx)(d,{ariaLabel:`Line ${v?p.right?.toString():p.left?.toString()}`,lineType:p.type,interactiveProps:x?{onClick:x}:null,isHighlighted:m,children:v&&p.right}),r[9]=m,r[10]=p.left,r[11]=p.right,r[12]=p.type,r[13]=x,r[14]=v,r[15]=N,r[16]=i):i=r[16],r[17]!==c||r[18]!==m||r[19]!==u||r[20]!==p||r[21]!==h||r[22]!==g?(o=(0,n.jsx)(s,{dragging:c,isHighlighted:m,isLeftColumn:u,line:p,lineAnchor:h,lineChild:g}),r[17]=c,r[18]=m,r[19]=u,r[20]=p,r[21]=h,r[22]=g,r[23]=o):o=r[23],r[24]!==t||r[25]!==i||r[26]!==o?(l=(0,n.jsxs)(n.Fragment,{children:[t,i,o]}),r[24]=t,r[25]=i,r[26]=o,r[27]=l):l=r[27],l};try{c.displayName||(c.displayName="DiffLinePart")}catch{}var m=i(75177);function u(){let e,t,i,o=(0,a.c)(3);return o[0]===Symbol.for("react.memo_cache_sentinel")?(e={bottom:"0 !important",clip:"rect(1px, 1px, 1px, 1px)",clipPath:"inset(50%)",height:"84px",position:"absolute",width:"320px"},o[0]=e):e=o[0],o[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsxs)("clipPath",{id:"diff-placeholder",children:[(0,n.jsx)("rect",{height:"11.9298746",rx:"2",width:"67.0175439",x:"0",y:"0"}),(0,n.jsx)("rect",{height:"11.9298746",rx:"2",width:"100.701754",x:"18.9473684",y:"47.7194983"}),(0,n.jsx)("rect",{height:"11.9298746",rx:"2",width:"37.8947368",x:"0",y:"71.930126"}),(0,n.jsx)("rect",{height:"11.9298746",rx:"2",width:"53.3333333",x:"127.017544",y:"48.0703769"}),(0,n.jsx)("rect",{height:"11.9298746",rx:"2",width:"72.9824561",x:"187.719298",y:"48.0703769"}),(0,n.jsx)("rect",{height:"11.9298746",rx:"2",width:"140.350877",x:"76.8421053",y:"0"}),(0,n.jsx)("rect",{height:"11.9298746",rx:"2",width:"140.350877",x:"17.8947368",y:"23.8597491"}),(0,n.jsx)("rect",{height:"11.9298746",rx:"2",width:"173.684211",x:"166.315789",y:"23.8597491"})]}),o[1]=t):t=o[1],o[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsx)(m.A,{"aria-hidden":"true",as:"svg",version:"1.1",viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",sx:e,children:(0,n.jsxs)("defs",{children:[t,(0,n.jsxs)("linearGradient",{id:"animated-diff-gradient",spreadMethod:"reflect",x1:"0",x2:"0",y1:"0",y2:"1",children:[(0,n.jsx)("stop",{offset:"0",stopColor:"#eee"}),(0,n.jsx)("stop",{offset:"0.2",stopColor:"#eee"}),(0,n.jsx)("stop",{offset:"0.5",stopColor:"#ddd"}),(0,n.jsx)("stop",{offset:"0.8",stopColor:"#eee"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#eee"}),(0,n.jsx)("animateTransform",{attributeName:"y1",dur:"1s",repeatCount:"3",values:"0%; 100%; 0"}),(0,n.jsx)("animateTransform",{attributeName:"y2",dur:"1s",repeatCount:"3",values:"100%; 200%; 0"})]})]})}),o[2]=i):i=o[2],i}try{u.displayName||(u.displayName="DiffPlaceholder")}catch{}var f=i(42597);i(24965);var h=i(38621);function p(e){let t,i,o,l=(0,a.c)(10),{currentLine:r,hunkButton:c,isLeftColumn:m,isSplit:u}=e;if(u&&!m)return null;l[0]!==r.type||l[1]!==c||l[2]!==u?(t=c?(0,n.jsx)(d,{colSpan:u?1:2,hasExpanderButton:!0,lineType:r.type,children:c}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d,{lineType:r.type,children:(0,n.jsx)(h.KebabHorizontalIcon,{})}),!u&&(0,n.jsx)(d,{lineType:r.type,children:(0,n.jsx)(h.KebabHorizontalIcon,{})})]}),l[0]=r.type,l[1]=c,l[2]=u,l[3]=t):t=l[3];let f=u?3:void 0;return l[4]!==r||l[5]!==f?(i=(0,n.jsx)(s,{isHighlighted:!1,isLeftColumn:!0,colSpan:f,line:r}),l[4]=r,l[5]=f,l[6]=i):i=l[6],l[7]!==t||l[8]!==i?(o=(0,n.jsxs)(n.Fragment,{children:[t,i]}),l[7]=t,l[8]=i,l[9]=o):o=l[9],o}try{p.displayName||(p.displayName="HunkHeaderDiffLine")}catch{}function g(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{className:"hunk-kebab-icon pr-2 pb-1",children:(0,n.jsx)(h.KebabHorizontalIcon,{})}),t[0]=e):e=t[0],e}try{g.displayName||(g.displayName="HunkKebabIcon")}catch{}function x(e){let t,i,l,r=(0,a.c)(5),{isLeftColumn:s}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(d,{lineType:"EMPTY"}),r[0]=t):t=r[0],r[1]!==s?(i=(0,o.$)("empty-diff-line",{"border-right":s}),r[1]=s,r[2]=i):i=r[2],r[3]!==i?(l=(0,n.jsxs)(n.Fragment,{children:[t,(0,n.jsx)("td",{className:i,colSpan:1})]}),r[3]=i,r[4]=l):l=r[4],l}try{x.displayName||(x.displayName="EmptyDiffLine")}catch{}function b(e){let t,i,o,l,r,s,d,c,m=(0,a.c)(15);return m[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)("thead",{className:"sr-only",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{scope:"col",children:"Original file line number"}),(0,n.jsx)("th",{scope:"col",children:"Original file line"}),(0,n.jsx)("th",{scope:"col",children:"Diff line number"}),(0,n.jsx)("th",{scope:"col",children:"Diff line change"})]})}),m[0]=t):t=m[0],m[1]!==e.lineWidth?(i=(0,n.jsx)("col",{width:e.lineWidth}),m[1]=e.lineWidth,m[2]=i):i=m[2],m[3]===Symbol.for("react.memo_cache_sentinel")?(o=(0,n.jsx)("col",{}),m[3]=o):o=m[3],m[4]!==e.lineWidth?(l=(0,n.jsx)("col",{width:e.lineWidth}),m[4]=e.lineWidth,m[5]=l):l=m[5],m[6]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)("col",{}),m[6]=r):r=m[6],m[7]!==i||m[8]!==l?(s=(0,n.jsxs)("colgroup",{children:[i,o,l,r]}),m[7]=i,m[8]=l,m[9]=s):s=m[9],m[10]!==e.children?(d=(0,n.jsx)("tbody",{children:e.children}),m[10]=e.children,m[11]=d):d=m[11],m[12]!==s||m[13]!==d?(c=(0,n.jsxs)(n.Fragment,{children:[t,s,d]}),m[12]=s,m[13]=d,m[14]=c):c=m[14],c}try{b.displayName||(b.displayName="SplitDiffTable")}catch{}function y(e){let t,i,o,l,r,s,d,c=(0,a.c)(13);return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)("thead",{className:"sr-only",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{scope:"col",children:"Original file line number"}),(0,n.jsx)("th",{scope:"col",children:"Diff line number"}),(0,n.jsx)("th",{scope:"col",children:"Diff line change"})]})}),c[0]=t):t=c[0],c[1]!==e.lineWidth?(i=(0,n.jsx)("col",{width:e.lineWidth}),o=(0,n.jsx)("col",{width:e.lineWidth}),c[1]=e.lineWidth,c[2]=i,c[3]=o):(i=c[2],o=c[3]),c[4]===Symbol.for("react.memo_cache_sentinel")?(l=(0,n.jsx)("col",{width:"100%"}),c[4]=l):l=c[4],c[5]!==i||c[6]!==o?(r=(0,n.jsxs)("colgroup",{children:[i,o,l]}),c[5]=i,c[6]=o,c[7]=r):r=c[7],c[8]!==e.children?(s=(0,n.jsx)("tbody",{children:e.children}),c[8]=e.children,c[9]=s):s=c[9],c[10]!==r||c[11]!==s?(d=(0,n.jsxs)(n.Fragment,{children:[t,r,s]}),c[10]=r,c[11]=s,c[12]=d):d=c[12],d}try{y.displayName||(y.displayName="UnifiedDiffTable")}catch{}let C={diffTextCell:"UnifiedDiffLines-module__diffTextCell--UAuIr",diffHunkCell:"UnifiedDiffLines-module__diffHunkCell--qPkzg",diffHunkText:"UnifiedDiffLines-module__diffHunkText--Sfwuu",diffTextInner:"UnifiedDiffLines-module__diffTextInner--IuEAA",diffTextMarker:"UnifiedDiffLines-module__diffTextMarker--MdAo4",syntaxHighlightedAdditionLine:"UnifiedDiffLines-module__syntaxHighlightedAdditionLine--lU_S2",syntaxHighlightedDeletionLine:"UnifiedDiffLines-module__syntaxHighlightedDeletionLine--xgQwN",diffLineNumber:"UnifiedDiffLines-module__diffLineNumber--bzzxf",unifiedDiffLines:"UnifiedDiffLines-module__unifiedDiffLines--SSvV2"};function v(e){let t,i,o,l,s=(0,a.c)(9),{line:d,children:c}=e;return s[0]!==d.type?(t=(0,r.gK)(d.type,!0),s[0]=d.type,s[1]=t):t=s[1],s[2]!==t?(i={backgroundColor:t,textAlign:"center"},s[2]=t,s[3]=i):i=s[3],s[4]!==c?(o=(0,n.jsx)("code",{children:c}),s[4]=c,s[5]=o):o=s[5],s[6]!==i||s[7]!==o?(l=(0,n.jsx)("td",{className:C.diffLineNumber,style:i,children:o}),s[6]=i,s[7]=o,s[8]=l):l=s[8],l}function N(e){let t,i,r,s=(0,a.c)(4),{line:d}=e;s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(g,{}),s[0]=t):t=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.$)(C.diffTextInner,"color-fg-muted"),s[1]=i):i=s[1];let c=d.html;return s[2]!==c?(r=(0,n.jsx)("td",{colSpan:4,className:C.diffHunkCell,valign:"top",children:(0,n.jsxs)("div",{className:"d-flex flex-row",children:[t,(0,n.jsx)("code",{className:C.diffHunkText,children:(0,n.jsx)(l.mo,{className:i,html:c})})]})}),s[2]=c,s[3]=r):r=s[3],r}function j(e){let t,i,s,d=(0,a.c)(13),{line:c}=e,m="HUNK"===c.type,u="ADDITION"!==c.type,f="DELETION"!==c.type,h="ADDITION"===c.type?"+":"DELETION"===c.type?"-":void 0,p=!!h;return d[0]!==m||d[1]!==c?(t=m&&(0,n.jsx)(N,{line:c}),d[0]=m,d[1]=c,d[2]=t):t=d[2],d[3]!==m||d[4]!==c||d[5]!==h||d[6]!==u||d[7]!==p||d[8]!==f?(i=!m&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v,{line:c,children:u&&c.left}),(0,n.jsx)(v,{line:c,children:f&&c.right}),(0,n.jsx)("td",{className:C.diffTextCell,style:{backgroundColor:(0,r.gK)(c.type,!1)},children:(0,n.jsxs)("code",{className:(0,o.$)("ADDITION"===c.type&&C.syntaxHighlightedAdditionLine,"DELETION"===c.type&&C.syntaxHighlightedDeletionLine),children:[p&&(0,n.jsx)("span",{className:C.diffTextMarker,children:h}),(0,n.jsx)(l.mo,{className:C.diffTextInner,html:c.html,style:{backgroundColor:(0,r.gK)(c.type,!1)}})]})})]}),d[3]=m,d[4]=c,d[5]=h,d[6]=u,d[7]=p,d[8]=f,d[9]=i):i=d[9],d[10]!==t||d[11]!==i?(s=(0,n.jsxs)("tr",{children:[t,i]}),d[10]=t,d[11]=i,d[12]=s):s=d[12],s}function S(e){let t,i,l,r,s=(0,a.c)(14),{className:d,lines:c,lineWidth:m,tabSize:u}=e;if(s[0]!==c||s[1]!==u){let e;s[3]!==u?(e=(e,t)=>(0,n.jsx)(j,{line:e,tabSize:u},t),s[3]=u,s[4]=e):e=s[4],t=c.map(e),s[0]=c,s[1]=u,s[2]=t}else t=s[2];let f=t;return s[5]!==d?(i=(0,o.$)(C.unifiedDiffLines,d,"tab-size"),s[5]=d,s[6]=i):i=s[6],s[7]!==f||s[8]!==m?(l=(0,n.jsx)(y,{lineWidth:m,children:f}),s[7]=f,s[8]=m,s[9]=l):l=s[9],s[10]!==i||s[11]!==l||s[12]!==u?(r=(0,n.jsx)("table",{className:i,"data-tab-size":u,children:l}),s[10]=i,s[11]=l,s[12]=u,s[13]=r):r=s[13],r}try{v.displayName||(v.displayName="LineNumberCell")}catch{}try{N.displayName||(N.displayName="HunkCell")}catch{}try{j.displayName||(j.displayName="UnifiedDiffRow")}catch{}try{S.displayName||(S.displayName="UnifiedDiffLines")}catch{}function E(e){return"LEFT"===e?"-":"RIGHT"===e?"+":""}function T({startDiffSide:e,endDiffSide:t,originalStartLine:i,originalEndLine:n}){return e&&t&&"number"==typeof i&&"number"==typeof n?0===i&&1===n&&e===t?"-1 to +1":e===t&&i===n?`${E(e)}${i}`:`${E(e)}${i} to ${E(t)}${n}`:""}},1515:(e,t,i)=>{i.d(t,{z:()=>o});var n=i(74848),a=i(75177);let o=(0,i(96540).forwardRef)(({onClick:e,id:t,children:i},o)=>(0,n.jsx)(a.A,{as:"button",type:"button",id:t,ref:o,sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"left",fontWeight:400,color:"fg.muted",width:"100%",backgroundColor:"canvas.default",border:"1px solid",borderColor:"border.default",cursor:"text",borderRadius:2,height:"var(--control-medium-size)",lineHeight:"var(--text-body-lineHeight-medium)",px:2},onClick:e,children:i}));o.displayName="CompactCommentButton"},15088:(e,t,i)=>{i.d(t,{U:()=>m});var n=i(74848),a=i(96071),o=i(96679),l=i(96540),r=i(35608),s=i(51891);let d={AddCommentEditor:"AddCommentEditor-module__AddCommentEditor--V58b9"};var c=i(99588);function m({batchPending:e,batchingEnabled:t,commentBoxConfig:i,commentBoxSubject:m,condensed:u,fileLevelComment:f,filePath:h,focusOnMount:p,isReplying:g,lineNumber:x,onAddComment:b,onCancelComment:y,onPersistedCommentExists:C,quotedText:v="",side:N,startLineNumber:j,subjectId:S,threadId:E,suggestedChangesConfig:T}){let[_,D]=(0,l.useState)(v),[I,L]=(0,l.useState)(!1),[A,w]=(0,l.useState)(),R=(0,l.useRef)(null),k=(0,l.useRef)(null),{persistCommentToStorage:O,removePersistedCommentFromStorage:U}=(0,r.L)({diffSide:N,filePath:h,line:x,subjectId:S,threadId:E,handlePersistedCommentExists:({text:e})=>{e&&(D(e),C?.())},fileLevelComment:!!f});(0,l.useEffect)(()=>{if(p){let e=setTimeout(()=>{if(k.current&&(o.XC||o.cg)){let e=k.current,t=e.getBoundingClientRect(),i=o.XC?.documentElement.clientHeight||0;if(!(t.top>=0&&t.bottom<=(o.cg?.innerHeight||i))){let n=t.top,a=o.XC?.documentElement.getBoundingClientRect().top||0,l=e.clientHeight*(2/3);o.cg?.scrollTo({top:n-a-2/3*i+l,behavior:"smooth"})}}R.current?.focus()},100);return()=>{window.clearTimeout(e)}}},[p]);let P=({submitBatch:e})=>{let t="Failed to save comment";if(I)return;if(!_.trim())return void w(`${t}: Body can't be blank`);L(!0),w(void 0);let i=(0,s.u)(_,T?.sourceContentFromDiffLines??"");if(!i.isValid){w(i.errorMessage),L(!1);return}b?.({commentText:_,onCompleted(){L(!1),M()},onError(e){L(!1),e.message&&(t=`${t}: ${e.message}`),w(t)},submitBatch:e})},$=()=>P({submitBatch:!1}),H=()=>P({submitBatch:!0}),M=(0,l.useCallback)(()=>{U(),D(""),y?.()},[y,U]),B={footer:{justifyContent:g?"end":"space-between","> div:first-child":{display:u||g?"none":"flex"},...u&&{"> div:last-child":{display:"flex",flexDirection:"column",width:"100%"}}}};return(0,n.jsx)("div",{className:d.AddCommentEditor,onKeyDown:e=>{"Escape"!==e.key||_.trim()?e.stopPropagation():(e.preventDefault(),M())},children:(0,n.jsxs)(c.S,{ref:R,label:"Add diff comment",sx:B,value:_,onChange:e=>{w(void 0),O({text:e}),D(e)},onPrimaryAction:t?$:H,userSettings:i,suggestedChangesConfig:T,markdownErrorMessage:A,subject:m,lineNumber:x,filePath:h,startLineNumber:j,children:[y&&(0,n.jsx)(a.x,{disabled:I,className:"py-1 px-2",variant:"default",onClick:M,children:"Cancel"}),!e&&(0,n.jsx)(a.x,{disabled:I||!_.length,className:"py-1 px-2",variant:t?"default":"primary",onClick:H,ref:k,children:g?"Reply":"Comment"}),t&&(0,n.jsx)(a.x,{disabled:I||!_.length,className:"py-1 px-2",variant:"primary",onClick:$,children:e?"Add review comment":"Start a review"})]})})}try{m.displayName||(m.displayName="AddCommentEditor")}catch{}},30754:(e,t,i)=>{i.d(t,{$:()=>x});var n=i(74848),a=i(75367),o=i(64899),l=i(69676),r=i(82678),s=i(63867),d=i(73451),c=i(9591),m=i(19647),u=i(2724),f=i(96540);function h({children:e,footerButtons:t}){let{containerRef:i}=(0,r.G)({bindKeys:l.z0.ArrowHorizontal|l.z0.Tab,focusInStrategy:"closest"});return t?(0,n.jsx)(u.l.Footer,{ref:i,children:(0,n.jsxs)("div",{className:"d-flex flex-column",children:[(0,n.jsx)("div",{className:"d-flex flex-row gap-2 flex-justify-end",children:(0,n.jsx)(u.l.Buttons,{buttons:t})}),e]})}):null}let p={CHANGE_COMMIT_MESSAGE:"CHANGE_COMMIT_MESSAGE",CHANGE_EXTENDED_DESCRIPTION:"CHANGE_EXTENDED_DESCRIPTION"};function g(e,t){switch(t.type){case p.CHANGE_COMMIT_MESSAGE:return{...e,commitMessage:t.payload};case p.CHANGE_EXTENDED_DESCRIPTION:return{...e,extendedDescription:t.payload};default:return console.error("Unknown suggested change action."),e}}function x({authorLogins:e,batchSize:t,onClose:i,onCommit:l}){let r=(0,o.A)(),{sendAnalyticsEvent:x}=(0,a.s)(),[b,y]=(0,f.useState)(!1),[C,v]=(0,f.useState)(),[N,j]=(0,f.useReducer)(g,{commitMessage:1===e.length?`Apply suggestion from @${e[0]}`:1===new Set(e).size?`Apply suggestions from @${e[0]}`:"Apply suggestions from code review",extendedDescription:""}),S=(0,f.useCallback)((e,t,i)=>{if(!r())return;let n="There was an error trying to commit changes";i?n+=`: ${i}`:n+=".",y(!1),v(n)},[r]),E=(0,f.useCallback)(()=>{r()&&(y(!1),C&&v(void 0))},[C,r]),T=(0,f.useCallback)(()=>{b||(y(!0),x("comments.commit_suggestion","COMMIT_SUGGESTION_DIALOG_BUTTON",{batchSize:t}),l(`${N.commitMessage}

${N.extendedDescription}`,S,E))},[t,N.commitMessage,N.extendedDescription,E,S,b,l,x]);return(0,n.jsxs)(u.l,{title:"Apply suggestion",renderFooter:()=>(0,n.jsx)(h,{footerButtons:[{content:"Cancel",onClick:i},{content:(0,n.jsxs)("span",{className:"d-flex flex-row flex-items-center",children:["Commit changes",b&&(0,n.jsx)(s.A,{size:"small",className:"ml-1"})]}),onClick:T,buttonType:"primary"}],children:C&&(0,n.jsx)(d.A.Validation,{variant:"error",className:"mt-2 pt-1 flex-justify-end",children:C})}),onClose:i,children:[(0,n.jsxs)(d.A,{className:"mb-2",children:[(0,n.jsx)(d.A.Label,{children:"Commit message"}),(0,n.jsx)(c.A,{block:!0,name:"commit_message",onChange:e=>j({type:p.CHANGE_COMMIT_MESSAGE,payload:e.target.value}),value:N.commitMessage})]}),(0,n.jsxs)(d.A,{children:[(0,n.jsx)(d.A.Label,{children:"Extended description (optional)"}),(0,n.jsx)(m.Ay,{block:!0,rows:3,placeholder:"Add an optional description...",onChange:e=>j({type:p.CHANGE_EXTENDED_DESCRIPTION,payload:e.target.value}),value:N.extendedDescription})]})]})}try{h.displayName||(h.displayName="DialogFooter")}catch{}try{x.displayName||(x.displayName="ApplySuggestionDialog")}catch{}},99588:(e,t,i)=>{i.d(t,{S:()=>o});var n=i(74848),a=i(46542);let o=(0,i(96540).forwardRef)(({children:e,subject:t,...i},o)=>(0,n.jsx)(a.h,{...i,ref:o,placeholder:"Leave a comment",actions:e,subject:t,showLabel:!1}));o.displayName="ConversationCommentBox"},83283:(e,t,i)=>{i.d(t,{H:()=>p});var n=i(74848),a=i(1515),o=i(96679),l=i(75367),r=i(75177),s=i(37827),d=i(96540),c=i(38666),m=i(43032),u=i(15088),f=i(62812),h=i(64058);function p({batchingEnabled:e,batchPending:t,commentAnchorPrefix:i,commentingImplementation:p,commentsConnectionId:g,filePath:x,hideDiffPreview:b,isInlineComment:y,onRefreshThread:C,enterDialogMode:v,repositoryId:N,subject:j,subjectId:S,tabSize:E,thread:T,threadPositionNumber:_,threadsConnectionId:D,shouldLimitHeight:I=!0,suggestedChangesConfig:L,viewerData:A,ghostUser:w}){let[R,k]=(0,d.useState)(!1),[O,U]=(0,d.useState)(void 0),{sendAnalyticsEvent:P}=(0,l.s)(),{addThreadReply:$}=p,H=(0,d.useRef)(null),M=e=>{U(e),k(!0)};if(null===T.commentsData.comments||T.commentsData.comments.length<1)return null;let B=(0,m.Lm)(T),G="LINE"===T.subjectType?{lineRange:B}:void 0;return(0,n.jsx)("div",{"data-testid":"review-thread",children:(0,n.jsxs)(r.A,{sx:I?{maxHeight:"40vh",overflowY:"auto"}:{},children:[!b&&T.isOutdated&&(0,n.jsx)(h.i,{subject:T.subject,tabSize:E??4}),T.commentsData.comments.map((e,t)=>(0,n.jsx)(f.U,{enterDialogMode:v,isAnchorable:!0,index:t,threadPositionNumber:_,isFirstComment:0===t,isInlineComment:y,isLastChild:t===T.commentsData.comments.length-1,anchorPrefix:i,comment:e,commentConnectionId:T.commentsData.__id,commentingImplementation:p,filePath:x,isOutdated:T.isOutdated,repositoryId:N,subject:j,subjectId:S,threadId:T.id,onRefreshThread:C,onQuoteReply:M,threadCommentCount:T.commentsData.comments.length,threadsConnectionId:D,isThreadResolved:!!T.isResolved,suggestedChangesConfig:L,applySuggestedChangesValidationData:G,viewerData:A,ghostUser:w},e.id)),T.reviewCommentsLimitExceeded&&(0,n.jsx)(s.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${(T.reviewCommentsLimit||0)-1} replies are currently being shown.`,className:"m-3"}),T.viewerCanReply&&(0,n.jsxs)("div",{className:"rounded-bottom-2 p-2",children:[R&&(0,n.jsx)(u.U,{batchingEnabled:e,batchPending:t,commentBoxConfig:p.commentBoxConfig,commentBoxSubject:p.commentBoxSubject,condensed:!1,fileLevelComment:!0,filePath:x,focusOnMount:!0,isReplying:!0,onCancelComment:()=>{k(!1),P("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON"),o.cg?.requestAnimationFrame(()=>H.current?.focus())},repositoryId:N,quotedText:O,subjectId:S,threadId:T.id,onAddComment:({commentText:e,onCompleted:t,onError:i,submitBatch:n})=>{let a=[];T.commentsData.__id&&a.push(T.commentsData.__id),g&&a.push(g),$({commentsConnectionIds:a,filePath:x,thread:T,text:e,submitBatch:n,onCompleted:e=>{e&&(0,c.p)(e.toString()),t?.(),C?.(T.id)},onError:i,threadsConnectionId:D}),P("comments.add","ADD_COMMENT_BUTTON")},suggestedChangesConfig:L}),!R&&(0,n.jsx)(a.z,{ref:H,onClick:()=>{P("comments.start_thread_reply","REPLY_TO_THREAD_INPUT_BUTTON"),k(!0)},children:"Write a reply"})]})]})})}try{p.displayName||(p.displayName="ReviewThread")}catch{}},62812:(e,t,i)=>{i.d(t,{U:()=>z});var n=i(74848),a=i(46542),o=i(6489),l=i(80221),r=i(9808),s=i(40538),d=i(13233),c=i(63849),m=i(75062),u=i(12617),f=i(42083),h=i(96679),p=i(99543),g=i(38621),x=i(53526),b=i(75177),y=i(6869),C=i(34164),v=i(96540),N=i(58655),j=i(38666),S=i(35608),E=i(51891),T=i(99588),_=i(17515),D=i(40961),I=i(43032),L=i(46839),A=i(75367),w=i(55847);function R({commentingImplementation:e,suggestedChange:t}){let{sendAnalyticsEvent:i}=(0,A.s)();return(0,n.jsx)("div",{className:"d-flex flex-row-reverse",children:(0,n.jsx)(w.Q,{variant:"primary",onClick:()=>{i("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON"),e.addSuggestedChangeToPendingBatch(t)},children:"Add suggestion to batch"})})}try{R.displayName||(R.displayName="AddToExistingBatch")}catch{}var k=i(91321),O=i(89323),U=i(87330),P=i(15385);let $={applySuggestion:{text:"Apply suggestion"},addSuggestionToBatch:{text:"Add suggestion to batch",inactive:!0,inactiveReason:"This feature is not supported yet."}};function H({commentingImplementation:e,onOpenDialog:t,suggestedChange:i}){let{sendAnalyticsEvent:a}=(0,A.s)(),[o,l]=(0,v.useState)($.applySuggestion),[r,s]=(0,v.useState)(!1),d=(0,v.useRef)(null),c=(0,v.useRef)(null),m=()=>s(!r),{addSuggestedChangeToPendingBatch:u}=e,f=(0,v.useCallback)(()=>{o===$.addSuggestionToBatch&&(u(i),a("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON")),o===$.applySuggestion&&t(c)},[u,t,o,a,i]);return(0,n.jsx)("div",{className:"d-flex flex-row-reverse",children:(0,n.jsxs)(k.A,{children:[(0,n.jsx)(w.Q,{variant:"primary",onClick:f,ref:c,children:o.text}),(0,n.jsxs)(O.W,{anchorRef:d,open:r,onOpenChange:m,children:[(0,n.jsx)(O.W.Anchor,{children:(0,n.jsx)(U.K,{ref:d,"aria-haspopup":"true","aria-label":"More suggestion batching options",icon:g.TriangleDownIcon,size:"medium",variant:"primary",onClick:m})}),(0,n.jsx)(O.W.Overlay,{width:"medium",children:(0,n.jsx)(P.l,{selectionVariant:"single",children:Object.keys($).map(e=>{let t=$[e];return(0,n.jsx)(P.l.Item,{selected:o===t,onSelect:()=>l(t),inactiveText:t.inactiveReason,children:t.text},e)})})})]})]})})}try{H.displayName||(H.displayName="ApplyOrAddToBatch")}catch{}var M=i(30754);function B({reason:e,className:t="m-2"}){return(0,n.jsx)("div",{className:t,children:(0,n.jsx)("small",{className:"fgColor-muted",children:e})})}try{B.displayName||(B.displayName="CodeSuggestionUnavailable")}catch{}var G=i(47139);function F({commentingImplementation:e,onOpenDialog:t,suggestedChange:i}){let a=(0,v.useRef)(null),o=(0,v.useCallback)(()=>{t(a)},[t]),l=e.pendingSuggestedChangesBatch.length,{sendAnalyticsEvent:r}=(0,A.s)();return(0,n.jsxs)("div",{className:"d-flex flex-row flex-justify-between",children:[(0,n.jsx)(G.A,{variant:"attention",className:"my-auto",children:"Pending in batch"}),(0,n.jsxs)("div",{className:"d-flex gap-2",children:[(0,n.jsx)(w.Q,{size:"medium",variant:"danger",onClick:()=>{e.removeSuggestedChangeFromPendingBatch(i),r("comments.remove_suggested_change_from_batch","REMOVE_SUGGESTED_CHANGE_FROM_BATCH_BUTTON")},children:"Remove from batch"}),(0,n.jsx)(w.Q,{ref:a,size:"medium",count:l,variant:"primary",onClick:o,children:`Apply suggestion${l>1?"s":""}`})]})]})}try{F.displayName||(F.displayName="CommitOrRemoveFromBatch")}catch{}function V({commentingImplementation:e,suggestedChange:t}){let{setIsDialogOpen:i}=(0,L.W)(),[a,o]=(0,v.useState)(!1),l=(0,v.useRef)(void 0),{pendingSuggestedChangesBatch:r,submitSuggestedChanges:s}=e,d=(0,I.c0)(t,r),c=0===r.length,{isValid:m,reason:u}=(0,I.EJ)(t,r),f=(0,v.useMemo)(()=>d?r:[t],[d,r,t]),h=(0,v.useCallback)(e=>{o(e),i?.(e)},[i]),p=(0,v.useCallback)(()=>{if(h(!1),l.current){let e=l.current.current;setTimeout(()=>e?.focus())}},[h]),g=(0,v.useCallback)(e=>{h(!0),l.current=e},[h,l]),x=(0,v.useCallback)((e,t,i)=>{s({suggestedChanges:f,commitMessage:e,onCompleted:()=>{p(),i()},onError:t})},[p,s,f]);return(0,n.jsxs)("div",{className:"border-top p-2",children:[d&&(0,n.jsx)(F,{commentingImplementation:e,suggestedChange:t,onOpenDialog:g}),!d&&!m&&u&&(0,n.jsx)(B,{reason:u,className:"m-0"}),!d&&c&&(0,n.jsx)(H,{commentingImplementation:e,suggestedChange:t,onOpenDialog:g}),!d&&m&&!c&&(0,n.jsx)(R,{commentingImplementation:e,suggestedChange:t}),a&&(0,n.jsx)(M.$,{authorLogins:f.map(e=>e.authorLogin),batchSize:f.length,onClose:p,onCommit:x})]})}try{V.displayName||(V.displayName="CodeSuggestionActions")}catch{}function q({applySuggestedChangesValidationData:e,comment:t,commentBodyRef:i,commentingImplementation:a,filePath:o,isOutdated:l,isThreadResolved:r,subject:s,suggestedChangesConfig:d,databaseId:c,viewerData:m}){let u=function(e,t,i,n,a){let[o,l]=(0,v.useState)();return(0,_.N)(()=>{if(!e.current||t.subjectType?.toUpperCase()!=="LINE")return;let o=[...e.current.getElementsByClassName("js-apply-changes")];if(o.length>0){let e=[];for(let l of o){let o=l?.closest("div.js-suggested-changes-blob");if(!o)continue;let r=[...o.querySelectorAll(".js-blob-code-addition")];a.lineRange&&e.push({authorLogin:t.author?.login??"ghost",commentId:t.id,path:i,ref:l,suggestion:r.map(e=>e.textContent),lineRange:a.lineRange,threadId:n})}l(e)}},[a.lineRange,t.author?.login,t.bodyHTML,t.id,t.subjectType,e,i,n]),o}(i,t,o,c,e),f=s?.state?.toUpperCase();return(0,n.jsx)(n.Fragment,{children:u?.length?u.map(i=>{let{isValid:o,reason:c}=(0,I.o_)({suggestedChange:i,isOutdated:l,isPending:"PENDING"===t.state.toUpperCase(),isResolved:r,pullRequestIsClosed:void 0===f||"CLOSED"===f||"MERGED"===f,pullRequestIsInMergeQueue:!!s?.isInMergeQueue,userCanApplySuggestion:!!m?.viewerCanApplySuggestion,applySuggestedChangesValidationData:e,suggestedChangesConfig:d});return!o&&c?(0,D.createPortal)((0,n.jsx)(B,{reason:c}),i.ref):(0,D.createPortal)((0,n.jsx)(V,{commentingImplementation:a,suggestedChange:i}),i.ref)}):null})}try{q.displayName||(q.displayName="SuggestedChangeView")}catch{}function z({isAnchorable:e=!1,index:t=0,isInlineComment:i,isLastChild:_,isOutdated:D,isThreadResolved:I,anchorPrefix:L="r",comment:A,commentingImplementation:w,filePath:R,hideActions:k,isFirstComment:O=!1,enterDialogMode:U=d.l,onRefreshThread:P,onQuoteReply:$=d.l,subjectId:H,subject:M,threadCommentCount:B,threadId:G,threadPositionNumber:F,threadsConnectionId:V,suggestedChangesConfig:z,applySuggestedChangesValidationData:W,viewerData:K,ghostUser:Q=r.t.ghostUser,skipReactions:Y=!1,originalDiffPathUri:X}){let{addToast:J}=(0,p.Y6)(),[Z,ee]=(0,v.useState)(!1),[et,ei]=(0,v.useState)(A.isHidden),[en,ea]=(0,v.useState)(A.body),[eo,el]=(0,v.useState)(!1),[er,es]=(0,v.useState)(""),{persistCommentToStorage:ed,removePersistedCommentFromStorage:ec}=(0,S.L)({subjectId:H,filePath:R,fileLevelComment:"FILE"===A.subjectType,threadId:A.id,handlePersistedCommentExists:({text:e})=>{e&&ea(e)}}),{blockUserFromOrg:em,unblockUserFromOrg:eu,editComment:ef,deleteComment:eh,hideComment:ep,unhideComment:eg,reactToComment:ex,lazyFetchReactionGroups:eb}=w,ey=!!em,eC=!!eu,ev=(0,v.useRef)(null),eN=(0,v.useRef)(null),[ej,eS]=(0,v.useState)(""),{isInDialogMode:eE}=(0,N.q)(),eT=()=>{ev.current?.focus()};(0,v.useEffect)(()=>{if(Z){let e=window.setTimeout(eT);return()=>{window.clearTimeout(e)}}},[Z]);let e_=(0,x.S)(),{enableInlineCommentDialogMode:eD,disableInlineCommentDialogMode:eI}=(0,N.q)(),eL=async()=>{eI();let e=!1;try{e=await e_({title:"Delete comment?",content:"Are you sure you want to delete this comment?",confirmButtonContent:"Delete",confirmButtonType:"danger"})}finally{eD()}e&&eh({commentId:A.id,onCompleted:()=>{P?.(G)},onError:()=>{el(!1),J({type:"error",message:"Failed to delete comment"})},threadCommentCount:B,threadId:G,threadsConnectionId:V,filePath:R})},eA=(0,v.useCallback)((e,t,i,n,a,o)=>{em&&em({duration:e,shouldHideComment:t,hiddenReason:i,organizationLogin:n,notifyBlockedUser:a,userLogin:o,onCompleted:()=>{t&&ei(!0),P?.(G)},onError:()=>{eS("Failed to block user")}})},[em,P,G]),ew=(0,v.useCallback)((e,t)=>{eu&&eu({organizationLogin:e,userLogin:t,onCompleted:()=>{P?.(G)},onError:()=>{eS("Failed to unblock user")}})},[P,G,eu]),eR=(0,v.useCallback)(()=>{el(!0);let e=(0,E.u)(en,z?.sourceContentFromDiffLines??"");if(!e.isValid){es(e.errorMessage),el(!1);return}ef({text:en,comment:A,onCompleted:()=>{ee(!1),el(!1),ec(),P?.(G)},onError:()=>{el(!1),J({type:"error",message:"Failed to update comment"})}})},[J,en,A,ef,P,ec,z,G]),ek=A.databaseId?.toString(),eO=ek?`${L}${ek}`:void 0,eU=eO&&h.fV?new URL(`${h.fV.pathname}#${eO}`,h.fV.origin).toString():"",eP=(0,v.useRef)(null);(0,v.useEffect)(()=>{e&&ek&&eO&&window.location.hash.split("#").pop()===eO&&((0,j.p)(ek,L),U?.(!1),eP.current?.focus())},[L,eO,ek,U,e]);let e$={outline:"2px solid",outlineColor:"accent.fg",outlineOffset:"-2px",boxShadow:"none"},eH=t>0,eM=t>1,eB=w.suggestedChangesEnabled,eG=Z?"editing":et?"hidden":"visible",eF={headingProps:{as:"h3"},avatarUrl:A.author?.avatarUrl??Q.avatarUrl,comment:{...A,url:eU,referenceText:A.reference.text??`#${A.reference.number}`},commentRef:eP,deleteComment:eL,editComment:()=>{ee(!0)},editHistoryComponent:void 0,hideComment:e=>{ep({commentDatabaseId:A.databaseId,reason:e,onCompleted:()=>{ei(!0),P?.(G)},onError:()=>{el(!1),eS("Failed to hide comment")}})},onBlock:ey?eA:void 0,onUnblock:eC?ew:void 0,onMinimize:ei,onSuccessfulBlock:()=>{setTimeout(()=>h.cg?.location.reload(),800)},isMinimized:et,commentAuthorLogin:A.author?.login??Q.login,navigate:d.l,commentSubjectAuthorLogin:A.reference?.author?.login??"",commentSubjectType:w.commentSubjectType,onReplySelect:$,unhideComment:()=>{eg({commentDatabaseId:A.databaseId,onCompleted:()=>{ei(!1),P?.(G)},onError:()=>{el(!1),eS("Failed to unhide comment")}})},hideActions:k,isReply:eH,forceInlineAvatar:!0,containerStyle:{},originalDiffPathUri:X,isOutdated:D,commentAuthorSlug:"copilot"===A.reviewVariantType?"copilot-pull-request-reviewer":void 0,commentAuthorType:"copilot"===A.reviewVariantType?"Bot":void 0};return(0,n.jsxs)(b.A,{ref:eP,id:e?eO:void 0,tabIndex:i?eE?0:-1:0,"data-first-thread-comment":O,"data-marker-navigation-comment-thread-id":G,"data-marker-navigation-comment-id":A.id,...eE?{role:"document","aria-roledescription":"comment","aria-label":eH?void 0!==F?`Reply ${t} to Comment ${F}`:`Reply ${t}`:void 0!==F?`Comment ${F}`:"Comment"}:{},sx:{"&:not(:first-child)":{backgroundColor:"canvas.inset"},"&:first-child + div":{borderTop:"1px solid",borderColor:"border.muted"},":target":e$,":focus":e$,scrollMarginTop:e?"120px":0},children:[eM&&(0,n.jsx)(b.A,{sx:{display:"flex",pl:+!!eH},children:(0,n.jsx)(b.A,{sx:{ml:4,height:8,borderLeft:"1px solid",borderColor:"border.default"}})}),(0,n.jsx)(b.A,{sx:{px:3,pt:2*!eM,pb:0},children:(0,n.jsx)(o.v,{...eF,commentBody:A.body,threadCommentCount:B,isInDialogMode:eE,actions:k?void 0:(0,n.jsx)(l.p,{...eF}),isOutdated:D})}),ej&&(0,n.jsxs)(y.A,{variant:"danger",className:"m-3",children:[(0,n.jsx)(g.StopIcon,{className:"mr-2"}),ej]}),(0,n.jsxs)(b.A,{sx:{display:"flex",pl:+!!eH},children:[eH&&(0,n.jsx)(b.A,{sx:{ml:4,mr:1,pl:3,borderLeft:"1px solid",borderColor:"border.default",..._&&{borderImage:"linear-gradient(to bottom, var(--borderColor-default, var(--color-border-default)), rgba(0, 0, 0, 0)) 1 100%"}}}),"editing"===eG&&(0,n.jsx)("div",{className:(0,C.$)("flex-1 min-width-0 pr-2 pt-1 pb-2",eH?"pl-0":"pl-2"),children:(0,n.jsxs)(T.S,{ref:ev,label:"Update comment",value:en,onChange:e=>{ed({text:e}),ea(e),es(void 0)},onPrimaryAction:eR,userSettings:w.commentBoxConfig,subject:w.commentBoxSubject,suggestedChangesConfig:z,markdownErrorMessage:er,children:[(0,n.jsx)(a.x,{variant:"default",onClick:()=>{ee(!1),ec(),ea(A.body)},children:"Cancel"}),(0,n.jsx)(a.x,{disabled:eo||!en.length,variant:"primary",onClick:eR,children:"Update"})]})}),"visible"===eG&&(0,n.jsx)(b.A,{sx:eH?{pb:2,pr:2,overflowX:"auto",width:"100%"}:{px:3,pb:2,width:"100%"},children:A.bodyHTML&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.oG,{ref:eN,className:"markdown-body","comment-testid":`Comment body html for comment ${A.id}`,html:A.bodyHTML,sx:{mt:1,fontSize:1}}),"copilot"===A.reviewVariantType&&(0,n.jsxs)("p",{className:"text-small color-fg-muted mt-2 mb-1",children:[(0,n.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"Link--inTextBlock",href:"https://docs.github.com/en/copilot/responsible-use-of-github-copilot-features/responsible-use-of-github-copilot-code-review",children:"Copilot"})," ","uses AI. Check for mistakes."]}),(0,n.jsxs)("div",{className:"d-flex flex-direction-column gap-2",children:["copilot"===A.reviewVariantType&&(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)(s.Z,{commentUrl:A.url,commentId:A.databaseId?.toString()??""})}),A.reactionGroups&&ex?(0,n.jsx)("div",{className:"d-flex flex-direction-column mt-2",children:(0,n.jsx)(c.P,{reactionGroups:A.reactionGroups,onReact:(e,t)=>{ex?.({commentDatabaseId:A.databaseId,threadId:G,reaction:e,viewerHasReacted:t,onCompleted:()=>{P?.(G)},onError:()=>{el(!1),J({type:"error",message:"Failed to react to comment"})}})},canReact:A.viewerCanReact})}):!Y&&(0,n.jsx)(b.A,{sx:{display:"flex",flexDirection:"column",mt:3},children:eb?(0,n.jsx)(v.Suspense,{fallback:(0,n.jsx)(m.e,{}),children:(0,n.jsx)(u.ReactionViewerRelayQueryComponent,{id:A.id,subjectLocked:!A.viewerCanReact})}):(0,n.jsx)(u.ReactionViewerRelay,{reactionGroups:A,subjectId:A.id,canReact:A.viewerCanReact})})]}),eB&&W&&(0,n.jsx)(q,{comment:A,commentBodyRef:eN,commentingImplementation:w,filePath:R,isOutdated:D,isThreadResolved:I,databaseId:A.databaseId,suggestedChangesConfig:z,applySuggestedChangesValidationData:W,subject:M,viewerData:K})]})})]})]})}try{z.displayName||(z.displayName="ReviewThreadComment")}catch{}},64058:(e,t,i)=>{i.d(t,{i:()=>s});var n=i(74848),a=i(87591),o=i(91215),l=i(34164);let r={StaticDiffPreview:"StaticUnifiedDiffPreview-module__StaticDiffPreview--otVuG",HeaderContainer:"StaticUnifiedDiffPreview-module__HeaderContainer--tQoY0"};function s({subject:e,tabSize:t,hideHeaderDetails:i,className:s,diffTableClassName:d}){if(!e?.diffLines||e?.diffLines.length<1)return null;let c=(0,a.c7)(e.diffLines);return(0,n.jsxs)("div",{className:(0,l.$)(r.StaticDiffPreview,s),children:[!i&&(0,n.jsx)("div",{className:r.HeaderContainer,children:(0,n.jsxs)("span",{className:"text-small fgColor-muted",children:["Line"," ",(0,o.Ah)({originalStartLine:e.originalStartLine,originalEndLine:e.originalEndLine,startDiffSide:e.startDiffSide,endDiffSide:e.endDiffSide}),", commit ",(0,n.jsx)("code",{children:e.pullRequestCommit?.commit.abbreviatedOid})]})}),(0,n.jsx)(o.l4,{lineWidth:c,lines:e.diffLines,tabSize:t,className:d})]})}try{s.displayName||(s.displayName="StaticUnifiedDiffPreview")}catch{}},46839:(e,t,i)=>{i.d(t,{W:()=>r,j:()=>l});var n=i(74848),a=i(96540);let o=(0,a.createContext)({});function l({children:e}){let[t,i]=(0,a.useState)(!1),l=(0,a.useMemo)(()=>({isDialogOpen:t,setIsDialogOpen:i}),[t,i]);return(0,n.jsx)(o.Provider,{value:l,children:e})}let r=()=>(0,a.useContext)(o);try{o.displayName||(o.displayName="DialogStateContext")}catch{}try{l.displayName||(l.displayName="DialogStateProvider")}catch{}},58655:(e,t,i)=>{i.d(t,{f:()=>l,q:()=>r});var n=i(74848),a=i(96540);let o=(0,a.createContext)({isInDialogMode:!1,enableInlineCommentDialogMode:()=>{},disableInlineCommentDialogMode:()=>{}});function l({enableDiffGridMode:e,children:t}){let[i,l]=(0,a.useState)(!1),r=(0,a.useCallback)(()=>{l(!0),e?.(!1)},[e]),s=(0,a.useCallback)(()=>{l(!1),e?.(!0)},[e]),d=(0,a.useMemo)(()=>({isInDialogMode:i,enableInlineCommentDialogMode:r,disableInlineCommentDialogMode:s}),[i,r,s]);return(0,n.jsx)(o.Provider,{value:d,children:t})}let r=()=>(0,a.useContext)(o);try{o.displayName||(o.displayName="InlineCommentDialogModeContext")}catch{}try{l.displayName||(l.displayName="InlineCommentDialogModeProvider")}catch{}},40538:(e,t,i)=>{i.d(t,{Z:()=>j});var n=i(74848),a=i(21728),o=i(70179),l=i(96679),r=i(60039),s=i(96540),d=i(38621),c=i(87330),m=i(2724),u=i(19797),f=i(73451),h=i(19647),p=i(55847),g=i(65607);let x=[{label:"Comment is harmful or unsafe",value:"OFFENSIVE_OR_DISCRIMINATORY"},{label:"Comment is poorly formatted",value:"POORLY_FORMATTED"},{label:"Comment is not true",value:"INCORRECT"},{label:"Comment is not helpful",value:"UNHELPFUL"},{label:"Comment is attached to the wrong line(s)",value:"INCORRECT_LINE"},{label:"Code suggestion is harmful or unsafe",value:"SUGGESTION_OFFENSIVE_OR_DISCRIMINATORY"},{label:"Code suggestion is poorly formatted",value:"SUGGESTION_POORLY_FORMATTED"},{label:"Code suggestion does not solve the problem in the comment",value:"SUGGESTION_UNHELPFUL"},{label:"Code suggestion is invalid",value:"SUGGESTION_INVALID"}],b=e=>{let t,i,o,l,r=(0,a.c)(15),{onClose:d,onSubmit:c,feedbackOptions:g,returnFocusRef:b}=e,C=void 0===g?x:g,[v,N]=(0,s.useState)(!1);r[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],r[0]=t):t=r[0];let[j,S]=(0,s.useState)(t),[E,T]=(0,s.useState)("");r[1]!==j||r[2]!==c||r[3]!==E?(i=e=>{e.preventDefault(),N(!0),j.length&&c("NEGATIVE",j,E)},r[1]=j,r[2]=c,r[3]=E,r[4]=i):i=r[4];let _=i;return r[5]!==v||r[6]!==j||r[7]!==C||r[8]!==_||r[9]!==E?(o=()=>(0,n.jsxs)("form",{onSubmit:_,children:[(0,n.jsxs)(m.l.Body,{children:[(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsxs)(u.A,{onChange:S,required:!0,children:[(0,n.jsx)(u.A.Label,{children:"Category"}),C.map(y),v&&!j&&(0,n.jsx)(u.A.Validation,{variant:"error",children:"Please select a feedback category"})]})}),(0,n.jsxs)(f.A,{id:"text_response",children:[(0,n.jsx)(f.A.Label,{children:"How should we improve this response?"}),(0,n.jsx)(h.Ay,{block:!0,rows:2,wrap:"wrap",name:"text_response",value:E,resize:"vertical",onChange:e=>T(e.currentTarget.value)})]})]}),(0,n.jsx)(m.l.Footer,{children:(0,n.jsx)(p.Q,{type:"submit",disabled:v&&(!E||!j),children:"Submit"})})]}),r[5]=v,r[6]=j,r[7]=C,r[8]=_,r[9]=E,r[10]=o):o=r[10],r[11]!==d||r[12]!==b||r[13]!==o?(l=(0,n.jsx)(m.l,{onClose:d,title:"Provide additional feedback",subtitle:"Please help us improve GitHub Copilot by sharing more details about this comment.",returnFocusRef:b,renderBody:o}),r[11]=d,r[12]=b,r[13]=o,r[14]=l):l=r[14],l};try{b.displayName||(b.displayName="NegativeFeedbackForm")}catch{}function y(e){return(0,n.jsxs)(f.A,{id:`feedback_choice_${e.value}`,children:[(0,n.jsx)(g.A,{value:e.value}),(0,n.jsx)(f.A.Label,{children:e.label})]},e.value)}let C=e=>{let t,i,o=(0,a.c)(5),{onClick:l,disabled:r}=e;return o[0]!==l?(t=()=>l("POSITIVE"),o[0]=l,o[1]=t):t=o[1],o[2]!==r||o[3]!==t?(i=(0,n.jsx)(c.K,{size:"small",variant:"invisible",disabled:r,icon:d.ThumbsupIcon,title:"Positive Feedback","aria-label":"Positive Feedback",onClick:t}),o[2]=r,o[3]=t,o[4]=i):i=o[4],i},v=e=>{let t,i,o,l,r,m=(0,a.c)(12),{onClick:u,disabled:f,feedbackOptions:h}=e,[p,g]=(0,s.useState)(!1),x=(0,s.useRef)(null);m[0]!==u?(t=(e,t,i)=>{u(e,t,i),g(!1)},m[0]=u,m[1]=t):t=m[1];let y=t;return m[2]!==p||m[3]!==h||m[4]!==y?(i=p&&(0,n.jsx)(b,{onClose:()=>g(!1),onSubmit:y,feedbackOptions:h,returnFocusRef:x}),m[2]=p,m[3]=h,m[4]=y,m[5]=i):i=m[5],m[6]===Symbol.for("react.memo_cache_sentinel")?(o=()=>g(!0),m[6]=o):o=m[6],m[7]!==f?(l=(0,n.jsx)(c.K,{ref:x,size:"small",variant:"invisible",disabled:f,icon:d.ThumbsdownIcon,title:"Negative Feedback","aria-label":"Negative Feedback",onClick:o}),m[7]=f,m[8]=l):l=m[8],m[9]!==i||m[10]!==l?(r=(0,n.jsxs)(n.Fragment,{children:[i,l]}),m[9]=i,m[10]=l,m[11]=r):r=m[11],r};try{C.displayName||(C.displayName="PositiveFeedbackButton")}catch{}try{v.displayName||(v.displayName="NegativeFeedbackButton")}catch{}let N=({commentId:e,commentUrl:t,feedbackPath:i,feedbackOptions:a,additionalParameters:o})=>{let[d,c]=(0,s.useState)(),m=(0,s.useMemo)(()=>{if(i)return i;if(t){let e=new URL(t,l.fV.origin);return e.hash="",`${e}/code_review_feedback`}throw Error("missing feedbackPath and commentUrl")},[t,i]),u=(t,i,n)=>{c(t);try{let a=new FormData;if(a.set("comment_id",e),a.set("feedback",t),o)for(let[e,t]of Object.entries(o))a.set(e,t);for(let e of i??[])a.append("feedback_choice[]",e);n&&a.set("text_response",n),(0,r.DI)(m,{method:"POST",body:a})}catch{}};return(0,n.jsxs)("div",{"data-testid":`copilot-code-review-feedback-${e}`,className:"d-flex gap-1",children:["NEGATIVE"!==d&&(0,n.jsx)(C,{disabled:!!d,onClick:u}),"POSITIVE"!==d&&(0,n.jsx)(v,{disabled:!!d,onClick:u,feedbackOptions:a})]})},j=e=>{let t,i=(0,a.c)(2);return i[0]!==e?(t=(0,n.jsx)(o.t,{fallback:null,children:(0,n.jsx)(N,{...e})}),i[0]=e,i[1]=t):t=i[1],t};try{N.displayName||(N.displayName="Feedback")}catch{}try{j.displayName||(j.displayName="CopilotCodeReviewFeedback")}catch{}},8579:(e,t,i)=>{i.d(t,{T:()=>f});var n=i(74848),a=i(64899),o=i(38621),l=i(87330),r=i(96540),s=i(34164),d=i(42522),c=i(52811),m=i(640);let u={tooltip:"CopyToClipboardButton-module__tooltip--Dq1IB"};function f({icon:e=o.CopyIcon,size:t="medium",onCopy:i,textToCopy:f,tooltipProps:h,variant:p="invisible",ariaLabel:g,className:x,disabled:b,...y}){let[C,v]=r.useState(!1),N=(0,a.A)(),j=g??`Copy "${f}" to clipboard`,S=C?"Copied!":j,E={size:t,variant:p,onClick:()=>{v(!0),(0,c.i)("Copied!"),(0,m.D)(f),i?.(),setTimeout(()=>N()&&v(!1),2e3)},icon:C?o.CheckIcon:e,className:(0,s.$)(C?"color-fg-success":void 0,x),...y},T=(0,r.useId)();return b?(0,n.jsx)(l.K,{...E,"aria-label":j,disabled:!0}):(0,n.jsx)(d.m,{text:S,"aria-label":j,type:"label",id:T,"aria-hidden":!0,...h,className:(0,s.$)(u.tooltip,h?.className),children:(0,n.jsx)(l.K,{...E,"aria-labelledby":T})})}try{f.displayName||(f.displayName="CopyToClipboardButton")}catch{}},42597:(e,t,i)=>{i.d(t,{u:()=>r});var n=i(74848),a=i(21728),o=i(34164);let l={diffSquare:"DiffSquares-module__diffSquare--h5kjy",addition:"DiffSquares-module__addition--jeNtt",deletion:"DiffSquares-module__deletion--hKV3q",neutral:"DiffSquares-module__neutral--VlyoP"};function r(e){let t,i,o=(0,a.c)(4),{squares:l}=e;return o[0]!==l?(t=l.map(s),o[0]=l,o[1]=t):t=o[1],o[2]!==t?(i=(0,n.jsx)("div",{className:"d-flex",children:t}),o[2]=t,o[3]=i):i=o[3],i}function s(e,t){return(0,n.jsx)("div",{"data-testid":`${e} diffstat`,className:(0,o.$)(l.diffSquare,l[e])},t)}try{r.displayName||(r.displayName="DiffSquares")}catch{}},24965:(e,t,i)=>{i.d(t,{z:()=>r});var n=i(74848),a=i(21728),o=i(42597);let l={addition:"addition",deletion:"deletion",neutral:"neutral"};function r(e){let t,i,r,s,d,c,m,u=(0,a.c)(20),{linesAdded:f,linesDeleted:h,linesChanged:p}=e,g=void 0===f?0:f,x=void 0===h?0:h,b=void 0===p?0:p;if(!g&&!x&&!b||0===b)return null;if(u[0]!==g||u[1]!==b||u[2]!==x){let{greenSquares:e,redSquares:i,graySquares:n}=function(e,t,i){let n=i>5?5/i:1,a=Math.floor(e*n),o=Math.floor(t*n);return{greenSquares:a,redSquares:o,graySquares:5-a-o}}(g,x,b);t=[...Array(e).fill(l.addition),...Array(i).fill(l.deletion),...Array(n).fill(l.neutral)],u[0]=g,u[1]=b,u[2]=x,u[3]=t}else t=u[3];let y=t;return u[4]!==g?(i=g>0&&(0,n.jsxs)("span",{"aria-hidden":"true",className:"f6 text-bold fgColor-success",children:["+",g.toLocaleString()]}),u[4]=g,u[5]=i):i=u[5],u[6]!==x?(r=x>0&&(0,n.jsxs)("span",{"aria-hidden":"true",className:"f6 text-bold fgColor-danger",children:["-",x.toLocaleString()]}),u[6]=x,u[7]=r):r=u[7],u[8]!==g||u[9]!==x?(s=function({linesAdded:e,linesDeleted:t}){let i="Lines changed: ";return i+`${e} ${1===e?"addition":"additions"} & ${t} ${1===t?"deletion":"deletions"}`}({linesAdded:g,linesDeleted:x}),u[8]=g,u[9]=x,u[10]=s):s=u[10],u[11]!==s?(d=(0,n.jsx)("span",{className:"sr-only",children:s}),u[11]=s,u[12]=d):d=u[12],u[13]!==y?(c=(0,n.jsx)(o.u,{squares:y}),u[13]=y,u[14]=c):c=u[14],u[15]!==i||u[16]!==r||u[17]!==d||u[18]!==c?(m=(0,n.jsxs)("div",{className:"d-flex flex-items-center gap-1 pl-1",children:[i,r,d,c]}),u[15]=i,u[16]=r,u[17]=d,u[18]=c,u[19]=m):m=u[19],m}try{r.displayName||(r.displayName="DiffStats")}catch{}},75062:(e,t,i)=>{i.d(t,{e:()=>o});var n=i(74848),a=i(94232);function o(){return(0,n.jsx)("div",{className:"d-flex flex-wrap gap-1",children:(0,n.jsx)(a.O,{variant:"elliptical",height:"28px",width:"28px"})})}try{o.displayName||(o.displayName="ReactionViewerLoading")}catch{}}}]);
//# sourceMappingURL=ui_packages_conversations_conversations_ts-ui_packages_copy-to-clipboard_CopyToClipboardButton_tsx-30f0566b7a49.js.map